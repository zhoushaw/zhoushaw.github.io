## 申请权限

[机器申请](http://mops.mogujie.org/dops/index#/product?id=6211&name=%E5%86%85%E5%AE%B9%E6%8A%80%E6%9C%AF&tag=0&_k=out1dg)

## 登录

* 登录堡垒机命令：ssh sushi@t2.mogujie.org -p10022，登陆后再直接输入服务器ip即可完成登录。
* 线下机器：10.70.96.67
* 线上机器：10.50.183.199,10.50.186.31

## 切换用户
切换到 `mapp` 账户，`sudo su mapp`

centOs像puppeteer都无法运行

## 安装git、Nginx

需要 sudo 权限

* sudo yum install git
* sudo yum install nginx

[Nginx安装-故障排查](https://lm1427934400.github.io/2017/11/17/Nginx%E5%AE%89%E8%A3%85-%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5/)

> 启动Nginx

`sudo systemctl start nginx`

## linux 安装nvm,通过nvm安装node

```
curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash

```

or

```
wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash

```

* source ~/.bashrc
* 通过命令 nvm --version 可查看版本，说明安装成功
* 通过 nvm ls-remote可查看node所有版本
* 通过 nvm install <version>(版本号) 例如：nvm install v10.6.0
* 安装后可通过node -v ,npm -v 查看版本，说明安装成功

## 部署服务

因为目前集团的node框架采用koa，并且封装了typescript，所以在部署前需要先进行build，然后通过pm2指向build后的跟文件

## 更新python

[更新规则](https://www.cnblogs.com/leon-zyl/p/8422699.html)


[puppeteer依赖解决](https://github.com/GoogleChrome/puppeteer/issues/1471)

## centOs7.0无法运行问题

centos必须升级到7.0以上否则会遇到依赖版本缺失问题

```
yum install ipa-gothic-fonts xorg-x11-fonts-100dpi xorg-x11-fonts-75dpi xorg-x11-utils xorg-x11-fonts-cyrillic xorg-x11-fonts-Type1 xorg-x11-fonts-misc -y

yum install pango.x86_64 libXcomposite.x86_64 libXcursor.x86_64 libXdamage.x86_64 libXext.x86_64 libXi.x86_64 libXtst.x86_64 cups-libs.x86_64 libXScrnSaver.x86_64 libXrandr.x86_64 GConf2.x86_64 alsa-lib.x86_64 atk.x86_64 gtk3.x86_64 -y

# 再安装NSS的依赖：
yum install nss.x86_64

# puppeteer的执行文件中去沙箱运行：
browser = await puppeteer.launch({
  headless: true,
  args: ['--no-sandbox', '--disable-setuid-sandbox']
});
```

